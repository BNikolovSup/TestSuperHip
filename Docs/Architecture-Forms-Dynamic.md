# Hippocrates 360 – Dynamic Forms Architecture (FMX)

Този документ описва архитектурата на *динамичните форми* в Hippocrates 360 – новият механизъм,
който заменя статичните екрани на стария Хипократ.

Основната цел е:
- един контейнер със стилове (FMX)
- едно дърво с данни (VirtualTree)
- автоматично генериране на форма според номенклатурите
- без нужда от статични екрани
- без ограничение по размер и тип елементи

---

# 1. Проблемът със старите форми

Старият Хипократ използваше *фиксирани форми върху шаблон-картинка*, напр. преглед (АП/ХРН).
- Не може да се мащабира
- Няма динамика
- Нови полета → няма къде да се сложат
- Част от информацията вече не се печата, но екранът не може да се промени
- „Дългосрочната грижа“ доведе до десетки нови елементи → невъзможно за стария UI

Динамичните екрани решават това: *показва се само това, което реално се изисква според възраст/пол/вид услуга.*

---

# 2. Концепция за динамичния UI

Всички динамични екрани се изграждат от **един единствен FMX контейнер**:

`FmxControls.pas/.fmx`

Това НЕ е форма за показване, а:
- склад на *готови стилови контроли*
- готови `Layout` структури
- popup-и, listbox-и, анимации
- базови "шаблони", които се *клонират*

---

# 3. Основният принцип: клониране на Layout-и

За всеки вид динамичен контрол има един предварително дефиниран Layout:

| Тип контрол | Layout шаблон | Клас за работа |
|------------|---------------|----------------|
| Едитор (число, текст) | `lytEdit` | `TEditLabel` |
| Memo поле | `lytMemo` | `TMemoLabel` |
| Single combo | `lytComboDyn` | `TComboOneLabel` |
| Multi combo | `lytMultiCombo` | `TComboMultiLabel` |
| Дата | `lytDate` | `TDateEditLabel` |
| CheckBox | `lytCheckDyn` | `TLayoutCheck` |

Всички те имат вътре комплексна структура (Rectangles, Lines, Animations, Text, Edit/Memo/Combo).

**Клонирането става така:**

```delphi
TempEditLYT := TLayout(frmFmxControls.lytEdit.Clone(self));

**üß© Aspect LTC Engine - Unified Specification (v1.0)**

**0\. Overview**

Aspect LTC Engine –µ –º–æ–¥—É–ª—ä—Ç –Ω–∞ –•–∏–ø–æ–∫—Ä–∞—Ç 360, –æ—Ç–≥–æ–≤–æ—Ä–µ–Ω –∑–∞:

- –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–Ω–∏—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ –∑–∞ –≤—Å–µ–∫–∏ –ø–∞—Ü–∏–µ–Ω—Ç
- –æ–±–≤—ä—Ä–∑–≤–∞–Ω–µ –Ω–∞ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∏—Ç–µ CL132, PR001, CL134, CL088, CL142
- –Ω–∞–º–∏—Ä–∞–Ω–µ –Ω–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏—Ç–µ (PregledNew) –∏ –Ω–µ–∏–∑–ø—ä–ª–Ω–µ–Ω–∏—Ç–µ –¥–µ–π–Ω–æ—Å—Ç–∏
- —Ñ–æ—Ä–º–∏—Ä–∞–Ω–µ –Ω–∞ –≥—Ä–∞—Ñ –æ—Ç —Ç–∏–ø _–ú–∏–Ω–∞–ª–∏ / –¢–µ–∫—É—â–∏ / –ë—ä–¥–µ—â–∏_
- –ø–æ–¥–¥—Ä—ä–∂–∫–∞ –Ω–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –Ω–∞ –ù–ó–ò–° –∑–∞ –≤—ä–∑—Ä–∞—Å—Ç, –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

–¢–æ–∑–∏ –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å–≤–∞ **—Ü—è–ª–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ª–æ–≥–∏–∫–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–Ω–∏—è –¥–≤–∏–≥–∞—Ç–µ–ª**, –∫–æ—è—Ç–æ –ø–æ–Ω–∞—Å—Ç–æ—è—â–µ–º –µ —Ä–µ–∞–ª–∏–∑–∏—Ä–∞–Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ –≤ –º–µ—Ç–æ–¥–∞:

TProfGraph.GeneratePeriod(Apat: TObject)

Engine-—ä—Ç —â–µ –±—ä–¥–µ –∏–∑–≤–ª–µ—á–µ–Ω, —Ñ–æ—Ä–º–∞–ª–∏–∑–∏—Ä–∞–Ω –∏ –ø–æ–¥–≥–æ—Ç–≤–µ–Ω –∑–∞ –±—ä–¥–µ—â–æ –ø—Ä–µ–Ω–∞—Å—è–Ω–µ –∫—ä–º Aspect —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ç–∞, –∫—ä–¥–µ—Ç–æ:

- –≤—Å–µ–∫–∏ CL132 –∏–Ω—Ç–µ—Ä–≤–∞–ª —Å—Ç–∞–≤–∞ –∞—Å–ø–µ–∫—Ç–µ–Ω –≤—ä–∑–µ–ª
- PR001 ‚Üí –∞—Å–ø–µ–∫—Ç–Ω–∏ –¥–µ–π–Ω–æ—Å—Ç–∏
- CL134 ‚Üí –∞—Å–ø–µ–∫—Ç–Ω–∏ –ø–æ–¥–ø–æ–ª–µ—Ç–∞
- CL088 / CL142 ‚Üí –ø—Ä–∞–≤–∏–ª–∞
- Pregledi / ExamAnalysis ‚Üí runtime –¥–∞–Ω–Ω–∏

–¶–µ–ª—Ç–∞ –µ –¥–∏–∑–∞–π–Ω, –∫–æ–π—Ç–æ –ø–æ–∑–≤–æ–ª—è–≤–∞:

- –ª–µ—Å–Ω–∞ –ø–æ–¥–¥—Ä—ä–∂–∫–∞
- debug-friendly —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –ø—Ä–æ–≤–µ—Ä–∏–º–æ—Å—Ç –Ω–∞ –≤—Å–∏—á–∫–∏ –ø—Ä–∞–≤–∏–ª–∞
- –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç –∑–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞ XML –∫—ä–º –ù–ó–ò–°
- –±—ä–¥–µ—â–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–∏ –ª–æ–≥–∏–∫–∏

**0.1. –ö–∞–∫–≤–æ –ø—Ä–∞–≤–∏ LTC Engine –≤—Å—ä—â–Ω–æ—Å—Ç?**

**1) –ß–µ—Ç–µ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∏—Ç–µ CL132 (–ø–ª–∞–Ω–æ–≤–µ)**  
–í CL132 –µ –æ–ø–∏—Å–∞–Ω–æ:

- –æ—Ç –∫–æ—è –≤—ä–∑—Ä–∞—Å—Ç –∑–∞–ø–æ—á–≤–∞ –¥–∞–¥–µ–Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞
- –¥–æ–∫–æ–≥–∞ —Ç—Ä–∞–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ä—Ç
- –∫–∞–∫ —Å–µ –ø–æ–≤—Ç–∞—Ä—è
- –∫–∞–∫—ä–≤ —Ç–∏–ø –µ (–ø—Ä–µ–≥–ª–µ–¥ / –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ / –∏–º—É–Ω–∏–∑–∞—Ü–∏—è)
- –¥–∞–ª–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ä—Ç –∑–∞–ø–æ—á–≤–∞ "–Ω–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –¥–µ–Ω" –∏–ª–∏ "–Ω–∞ 1 —è–Ω—É–∞—Ä–∏"

**2) –û–±–≤—ä—Ä–∑–≤–∞ CL132 ‚Üí PR001 (–¥–µ–π–Ω–æ—Å—Ç–∏)**  
–¢–æ–≤–∞ —Å–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ç–µ –∫–ª–∏–Ω–∏—á–Ω–∏ –¥–µ–π—Å—Ç–≤–∏—è.

**3) –û–±–≤—ä—Ä–∑–≤–∞ PR001 ‚Üí CL134 / CL142 / CL088**  
–¢–æ–≤–∞ —Å–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, –ø–æ–¥–¥–µ–π–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞.

**4) –ó–∞ –≤—Å–µ–∫–∏ –ø–∞—Ü–∏–µ–Ω—Ç –∏–∑—á–∏—Å–ª—è–≤–∞ –≤—Å–∏—á–∫–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ –¥–æ 120 –≥–æ–¥–∏–Ω–∏ –Ω–∞–ø—Ä–µ–¥.**

**5) –ó–∞ –≤—Å–µ–∫–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª —Ç—ä—Ä—Å–∏ –¥–∞–ª–∏ –∏–º–∞:**

- –∏–∑–≤—ä—Ä—à–µ–Ω –ø—Ä–µ–≥–ª–µ–¥ (TPregledNew)
- –∏–∑–≤—ä—Ä—à–µ–Ω–∏ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è (TExamAnalysis)

**6) –†–µ–∑—É–ª—Ç–∞—Ç—ä—Ç:**  
–ì—Ä–∞—Ñ –æ—Ç –æ–±–µ–∫—Ç–∏ TGraphPeriod132, —Ä–∞–∑–¥–µ–ª–µ–Ω–∏ –≤ UI –Ω–∞:

- –ú–∏–Ω–∞–ª–∏
- –¢–µ–∫—É—â–∏
- –ë—ä–¥–µ—â–∏

**7) –°–ø–µ—Ü–∏–∞–ª–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞ –Ω–∞ –ù–ó–ò–°:**

- –Ω—è–∫–æ–∏ –ø–ª–∞–Ω–æ–≤–µ —Å–∞ –≤–∞–ª–∏–¥–Ω–∏ —Å–∞–º–æ –≤ –≥–æ–¥–∏–Ω–∞—Ç–∞ –Ω–∞ –Ω–∞–≤—ä—Ä—à–≤–∞–Ω–µ
- –Ω—è–∫–æ–∏ –∑–∞–ø–æ—á–≤–∞—Ç –Ω–∞ 1 —è–Ω—É–∞—Ä–∏
- V16 –∏–º–∞ –Ω–∞–ø—ä–ª–Ω–æ –æ—Ç–¥–µ–ª–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞ –≤—ä–∑—Ä–∞—Å—Ç–∏—Ç–µ
- A1 –∫–æ—Ä–∏–≥–∏—Ä–∞ –Ω–∞—á–∞–ª–Ω–∞—Ç–∞ –¥–∞—Ç–∞ —Å–ø—Ä—è–º–æ —Ä–æ–∂–¥–µ–Ω–∞—Ç–∞ –¥–∞—Ç–∞
- –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏—Ç–µ –ø—Ä–µ–¥–∏ 1821 –≥. –Ω–µ —Å–µ –æ—Ç—á–∏—Ç–∞—Ç (StartNzisData)

**0.2. –ó–∞—â–æ —Å–µ –Ω–∞—Ä–∏—á–∞ Aspect LTC Engine?**

–ó–∞—â–æ—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–Ω–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–∞:

- –µ –π–µ—Ä–∞—Ä—Ö–∏—á–Ω–∞
- –∏–º–∞ –≤—ä–∑–ª–∏ (CL132), –ø–æ–¥ –≤—ä–∑–ª–∏ (PR001), –ø–æ–¥-–ø–æ–ª–µ—Ç–∞ (CL134), –ø—Ä–∞–≤–∏–ª–∞ (CL088)
- –º–æ–∂–µ –¥–∞ —Å–µ –º–æ–¥–µ–ª–∏—Ä–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–æ –∫–∞—Ç–æ _–∞—Å–ø–µ–∫—Ç–Ω–æ –¥—ä—Ä–≤–æ_
- –º–æ–∂–µ –¥–∞ —Å–µ –∫–æ–º–ø–æ–∑–∏—Ä–∞, –Ω–∞—Å–ª–µ–¥—è–≤–∞ –∏ –∫–æ–º–±–∏–Ω–∏—Ä–∞

LTC Engine –µ –Ω–∞–π-–≥–æ–ª–µ–º–∏—è—Ç —Ä–µ–∞–ª–µ–Ω –ø—Ä–∏–º–µ—Ä –≤ –•–∏–ø–æ–∫—Ä–∞—Ç 360 –∑–∞ —Ç–æ–≤–∞ –∫–∞–∫ Aspect –º–æ–¥–µ–ª–∞ –º–æ–∂–µ:

- –¥–∞ –æ–ø–∏—à–µ —Ü—è–ª–æ—Ç–æ –¥—ä—Ä–≤–æ
- –¥–∞ –¥–∞–¥–µ UI, —Ç—ä—Ä—Å–µ–Ω–µ –∏ –ª–æ–≥–∏–∫–∞
- –±–µ–∑ —Ç–≤—ä—Ä–¥–æ –∫–æ–¥–∏—Ä–∞–Ω–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏

**0.3. –†–æ–ª—è –≤ —Å–∏—Å—Ç–µ–º–∞—Ç–∞**

LTC Engine —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –∑–∞:

**‚úî –ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–Ω–∏ –ø–ª–∞–Ω–æ–≤–µ**

**‚úî –ü–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ —Ç–µ–∫—É—â–∏—Ç–µ –∑–∞–¥—ä–ª–∂–µ–Ω–∏—è –Ω–∞ –ª–µ–∫–∞—Ä—è**

**‚úî –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –ø—Ä–æ–ø—É—Å–Ω–∞—Ç–∏ –ø—Ä–µ–≥–ª–µ–¥–∏**

**‚úî –ò–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ —Å—ä–æ–±—â–µ–Ω–∏—è –∫—ä–º –ù–ó–ò–°**

**‚úî –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –º–∞—Ä–∫–∏—Ä–∞–Ω–µ –Ω–∞ –ø—Ä–µ–≥–ª–µ–¥ –∫–∞—Ç–æ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ–Ω**

**0.4. –û—Å–Ω–æ–≤–Ω–∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏**

| **–ö–æ–Ω—Ü–µ–ø—Ü–∏—è** | **–û–ø–∏—Å–∞–Ω–∏–µ** |
| --- | --- |
| **CL132** | –î–µ—Ñ–∏–Ω–∏—Ü–∏—è –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª |
| **PR001** | –î–µ–π–Ω–æ—Å—Ç –ø–æ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞—Ç–∞ |
| **CL134** | –ü–æ–¥–¥–µ–π–Ω–æ—Å—Ç–∏ / –µ–ª–µ–º–µ–Ω—Ç–∏ –∑–∞ –ø–æ–ø—ä–ª–≤–∞–Ω–µ |
| **CL088** | –î–µ—Ç–∞–π–ª–Ω–∏ –ø–æ–¥–ø—Ä–∞–≤–∏–ª–∞ |
| **CL142** | –ö–æ–¥–æ–≤–µ –∑–∞ –¥–µ–π–Ω–æ—Å—Ç–∏ / –±–ª–æ–∫–æ–≤–µ |
| **GraphPeriod132** | –†–µ–∑—É–ª—Ç–∞—Ç–µ–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª –∑–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞ |
| **PregledNew** | –†–µ–∞–ª–µ–Ω –ø—Ä–µ–≥–ª–µ–¥ |
| **ExamAnalysis** | –†–µ–∞–ª–Ω–æ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ |
| **StartNzisData** | –ú–∏–Ω–∏–º–∞–ª–Ω–∞ –¥–∞—Ç–∞, –æ—Ç –∫–æ—è—Ç–æ –ù–ó–ò–° –ø—Ä–∏–∑–Ω–∞–≤–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ |
| **Event Trigger** | –õ–æ–≥–∏–∫–∞ "–Ω–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –¥–µ–Ω" –∏–ª–∏ "–Ω–∞ 1 —è–Ω—É–∞—Ä–∏" |
| **Repeat Years** | –¶–∏–∫–ª–∏—á–Ω–æ—Å—Ç –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞—Ç–∞ |

**0.5. –ö–∞–∫–≤–æ —â–µ —Å—ä–¥—ä—Ä–∂–∞ —Ç–æ–∑–∏ –¥–æ–∫—É–º–µ–Ω—Ç?**

–¶—è–ª–∞—Ç–∞ —Å—Ö–µ–º–∞ –Ω–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—è:

- –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –∞–ª–≥–æ—Ä–∏—Ç–º–∏
- –ø—Ä–∞–≤–∏–ª–∞ –∏ –∏–∑–∫–ª—é—á–µ–Ω–∏—è
- –¥–∏–∞–≥—Ä–∞–º–∏
- –ø—Å–µ–≤–¥–æ–∫–æ–¥
- –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∑–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

**‚úÖ –ê–∫–æ –°–µ–∫—Ü–∏—è 0 –µ –û–ö ‚Üí –ø—Ä–µ–º–∏–Ω–∞–≤–∞–º –∫—ä–º**

**–°–µ–∫—Ü–∏—è 1: System Architecture**

–ö–∞–∂–∏ —Å–∞–º–æ:  
**‚Äû–ü—Ä–æ–¥—ä–ª–∂–∏ —Å—ä—Å –°–µ–∫—Ü–∏—è 1"**

**–í–∏–µ –∫–∞–∑–∞—Ö—Ç–µ:**

–ü—Ä–æ–¥—ä–ª–∂–∏ —Å—ä—Å –°–µ–∫—Ü–∏—è 1

**ChatGPT –∫–∞–∑–∞:**

–ß—É–¥–µ—Å–Ω–æ. –ü—Ä–æ–¥—ä–ª–∂–∞–≤–∞–º–µ —Å—ä—Å **–°–µ–∫—Ü–∏—è 1: System Architecture**  
–°—Ç–∏–ª: —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏-–æ–±—è—Å–Ω–∏—Ç–µ–ª–µ–Ω, –æ—Ä–∏–µ–Ω—Ç–∏—Ä–∞–Ω –∫—ä–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏—Ü–∏.

–°–ª–µ–¥ –∫–∞—Ç–æ —è –æ–¥–æ–±—Ä–∏—à ‚Üí —â–µ —è –≤–∫–∞—Ä–∞–º –≤ DOCX –∏ –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞–º–µ —Å—ä—Å –°–µ–∫—Ü–∏—è 2.

**#Ô∏è‚É£ 1. System Architecture**

Aspect LTC Engine –µ –º–æ–¥—É–ª –æ—Ç –•–∏–ø–æ–∫—Ä–∞—Ç 360, –∫–æ–π—Ç–æ —Ä–µ–∞–ª–∏–∑–∏—Ä–∞ _–∂–∏–≤–æ—Ç–Ω–∏—è —Ü–∏–∫—ä–ª –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–Ω–∏—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏_ –∑–∞ –ø–∞—Ü–∏–µ–Ω—Ç.  
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞—Ç–∞ –µ –∏–∑–≥—Ä–∞–¥–µ–Ω–∞ –æ—Ç —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω–∏ —Å–ª–æ—è:

- **Data Layer** (–Ωomenclatures + patient data)
- **Binding Layer** (–≤—Ä—ä–∑–∫–∏ CL132 ‚Üí PR001 ‚Üí CL134 ‚Üí CL088 ‚Üí CL142)
- **Execution Layer** (–¥–æ—Å—Ç—ä–ø–Ω–æ —á—Ä–µ–∑ TProfGraph.GeneratePeriod)

–ú–æ–¥—É–ª—ä—Ç –µ –Ω–∞–ø—ä–ª–Ω–æ –∞–≤—Ç–æ–Ω–æ–º–µ–Ω –∏ –º–æ–∂–µ –¥–∞ —Ä–∞–±–æ—Ç–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç UI. –ò–∑—Ö–æ–¥—ä—Ç –º—É (TGraphPeriod132 —Å–ø–∏—Å—ä—Ü–∏) –µ —á–∏—Å—Ç–∏ –¥–∞–Ω–Ω–∏, –∫–æ–∏—Ç–æ UI —Ä–µ—à–∞–≤–∞ –∫–∞–∫ –¥–∞ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–∞.

**1.1. High-level –¥–∏–∞–≥—Ä–∞–º–∞ –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏—Ç–µ**

+----------------------------+

| Data Layer |

|----------------------------|

| CL132 (–ø–ª–∞–Ω–æ–≤–µ) |

| PR001 (–¥–µ–π–Ω–æ—Å—Ç–∏) |

| CL134 (–ø–æ–¥–¥–µ–π–Ω–æ—Å—Ç–∏) |

| CL142 (–∫–æ–¥–æ–≤–µ/–ø—Ä–∞–≤–∏–ª–∞) |

| CL088 (–¥–µ—Ç–∞–π–ª–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞) |

| –ü–∞—Ü–∏–µ–Ω—Ç—Å–∫–∏ –¥–∞–Ω–Ω–∏ |

+-------------+--------------+

|

v

+----------------------------+

| Binding Layer |

|----------------------------|

| FillPr001InCl132 |

| FillCl142InPr001 |

| FillCl088InCl142 |

| FillCL134 (–∑–∞ PR001) |

| Sort & Index operations |

+-------------+--------------+

|

v

+----------------------------+

| Execution Layer |

|----------------------------|

| GeneratePeriod |

| Matching Pregledi |

| Matching ExamAnalysis |

| Output: lstGraph |

+----------------------------+

**1.2. –û—Å–Ω–æ–≤–Ω–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –∏ —Ç–µ—Ö–Ω–∏—Ç–µ —Ä–æ–ª–∏**

**1.2.1. CL132 - –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ–Ω –ø–ª–∞–Ω**

–í—Å–µ–∫–∏ –∑–∞–ø–∏—Å –æ—Ç CL132 –¥–µ—Ñ–∏–Ω–∏—Ä–∞ _–≤–∏–¥ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞_:

- –æ—Ç –∫–æ—è –≤—ä–∑—Ä–∞—Å—Ç –∑–∞–ø–æ—á–≤–∞
- –∫–∞–∫ —Å–µ –∏–∑—á–∏—Å–ª—è–≤–∞ –Ω–∞—á–∞–ª–æ—Ç–æ
- –¥–æ–∫–æ–≥–∞ –≤–∞–∂–∏
- –¥–∞–ª–∏ –µ —Ü–∏–∫–ª–∏—á–Ω–∞
- –¥–∞–ª–∏ —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞ –Ω–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –¥–µ–Ω –∏–ª–∏ –Ω–∞ 1 —è–Ω—É–∞—Ä–∏
- –æ—Ç –∫–æ–π –ø–æ–ª
- —Ç–∏–ø –Ω–∞ –¥–µ–π–Ω–æ—Å—Ç—Ç–∞:
  - –ø—Ä–µ–≥–ª–µ–¥
  - –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ
  - –∏–º—É–Ω–∏–∑–∞—Ü–∏—è

**–í LTC Engine CL132 –µ "Master Definition" –æ–±–µ–∫—Ç.**

**1.2.2. PR001 - –î–µ–π–Ω–æ—Å—Ç–∏ –∫—ä–º –ø–ª–∞–Ω**

PR001 –µ —Å–ø–∏—Å—ä–∫ –æ—Ç –¥–µ–π–Ω–æ—Å—Ç–∏ –∫—ä–º –≤—Å—è–∫–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞:

- –∫–æ–Ω–∫—Ä–µ—Ç–µ–Ω –∫–ª–∏–Ω–∏—á–µ–Ω –∞–∫—Ç
- –ª–æ–≥–∏–∫–∞ –∑–∞ –ø—Ä–∏–ª–æ–∂–∏–º–æ—Å—Ç
- –≤—Ä—ä–∑–∫–∞ –∫—ä–º CL134 (–ø–æ–¥–¥–µ–π–Ω–æ—Å—Ç–∏)
- –≤—Ä—ä–∑–∫–∞ –∫—ä–º CL142 ( ACHI / NHIF –∫–æ–¥–æ–≤–µ )
- –ª–æ–≥–∏—á–µ—Å–∫–∏ –ø—Ä–∞–≤–∏–ª–∞ (Rules)

–í CL132.FListPr001 —Å–µ –ø–∞–∑—è—Ç —Å–∞–º–æ –≤–∞–ª–∏–¥–Ω–∏—Ç–µ –¥–µ–π–Ω–æ—Å—Ç–∏ —Å–ø–æ—Ä–µ–¥ RuleCl132_PR001.

**1.2.3. CL134 - –ü–æ–¥–¥–µ–π–Ω–æ—Å—Ç–∏ (–µ–ª–µ–º–µ–Ω—Ç–∏)**

CL134 —Å–∞ –µ–ª–µ–º–µ–Ω—Ç–∏, –∫–æ–∏—Ç–æ —Å–µ –ø–æ–ø—ä–ª–≤–∞—Ç –ø—Ä–∏ –∏–∑–≤—ä—Ä—à–≤–∞–Ω–µ –Ω–∞ –¥–∞–¥–µ–Ω–∞ –¥–µ–π–Ω–æ—Å—Ç:

- –±–µ–ª–µ–∂–∫–∏
- —Å—Ç–æ–π–Ω–æ—Å—Ç–∏
- —Ç–∏–ø–æ–≤–µ –¥–∞–Ω–Ω–∏
- –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ —É—Å–ª–æ–≤–∏—è

–í –º–æ–¥–µ–ª–∞ —Å–∞ –≤:

TRealPR001Item.LstCl134 : List&lt;TRealCl134Item&gt;

**1.2.4. CL142 - –î—ä—Ä–≤–æ –Ω–∞ –∫–æ–¥–æ–≤–µ**

CL142 –æ–ø–∏—Å–≤–∞:

- ACHI –±–ª–æ–∫
- ACHI –∫–æ–¥
- NHIF –∫–æ–¥
- –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∑–∞ specialty / –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–∏ –¥–µ–π–Ω–æ—Å—Ç–∏

–°–≤—ä—Ä–∑–≤–∞ —Å–µ –∫—ä–º PR001 –ø–æ Activity_ID.

**1.2.5. CL088 - –î–µ—Ç–∞–π–ª–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞**

CL088 –µ _—Ä–∞–∑–≥—ä–Ω–∞—Ç–∞ –≤—ä—Ç—Ä–µ—à–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –ª–æ–≥–∏–∫–∞_, –∫–æ—è—Ç–æ:

- —Ä–∞–∑—à–∏—Ä—è–≤–∞ CL142
- –¥–µ—Ñ–∏–Ω–∏—Ä–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- —É–∫–∞–∑–≤–∞, –∫–æ–∏ –ø–æ–¥–¥–µ–π–Ω–æ—Å—Ç–∏ –≤–∞–∂–∞—Ç –≤ –∫–æ–∏ —Å–ª—É—á–∞–∏

–í –º–æ–¥–µ–ª–∞:

TRealCl142Item.FListCL088

**1.2.6. –ü–∞—Ü–∏–µ–Ω—Ç—Å–∫–∏ –¥–∞–Ω–Ω–∏**

–ù–∞–π-–≤–∞–∂–Ω–∏ –∑–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—è —Å–∞:

- –¥–∞—Ç–∞ –Ω–∞ —Ä–∞–∂–¥–∞–Ω–µ
- –ø–æ–ª
- —Å–ø–∏—Å—ä–∫ –æ—Ç –ø—Ä–µ–≥–ª–µ–¥–∏ (FPregledi)
- —Å–ø–∏—Å—ä–∫ –æ—Ç –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è (FExamAnals)
- lstGraph - —Ä–µ–∑—É–ª—Ç–∞—Ç—ä—Ç

**1.2.7. PregledNew / ExamAnalysis**

**PregledNew = —Ä–µ–∞–ª–µ–Ω –ø—Ä–µ–≥–ª–µ–¥**

**ExamAnalysis = —Ä–µ–∞–ª–Ω–æ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ**

–¢–µ —Å–µ match-–≤–∞—Ç –∫—ä–º –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–∏—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏.

**1.3. TProfGraph - —Ü–µ–Ω—Ç—Ä–∞–ª–Ω–∏—è—Ç orchestrator**

–ö–ª–∞—Å—ä—Ç TProfGraph –µ —è–¥—Ä–æ—Ç–æ –Ω–∞ —Å–∏—Å—Ç–µ–º–∞—Ç–∞.  
–¢–æ–π —É–ø—Ä–∞–≤–ª—è–≤–∞:

**1) –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–Ω–∏—Ç–µ –≤—Ä—ä–∑–∫–∏**

–ß—Ä–µ–∑ –º–µ—Ç–æ–¥–∏—Ç–µ:

- FillPr001InCl132
- FillCl142InPr001
- FillCl088InCL142
- FillCL134
- FillCl050, FillCl050_1 (–∑–∞ –¥—Ä—É–≥–∏ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∏)

–ò–∑–≤–∏–∫–≤–∞—Ç —Å–µ **—Å–∞–º–æ –≤–µ–¥–Ω—ä–∂** (isFilled = False ‚Üí True).

**2) –û—Å–Ω–æ–≤–Ω–∏—è—Ç –∞–ª–≥–æ—Ä–∏—Ç—ä–º**

procedure GeneratePeriod(Apat: TObject)

–í –Ω–µ–≥–æ —Å–µ –∏–∑–≤—ä—Ä—à–≤–∞:

- –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –ø–µ—Ä–∏–æ–¥–∏ –æ—Ç CL132
- –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ start/end
- –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç
- special trigger rules
- –¥–æ–±–∞–≤—è–Ω–µ –≤ –≥—Ä–∞—Ñ–∞
- match –∫—ä–º –ø—Ä–µ–≥–ª–µ–¥–∏ –∏ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è

**3) –ü–æ—Å—Ç—Ä–æ—è–≤–∞–Ω–µ –Ω–∞ UI –¥—ä—Ä–≤–æ**

–ú–µ—Ç–æ–¥–∏:

- LoadVtrGraph
- LoadVtrGraphOutVtr
- LoadVtrGraph1

–ù–µ —Å–∞ —á–∞—Å—Ç –æ—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏—è –¥–≤–∏–≥–∞—Ç–µ–ª, –Ω–æ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–∞—Ç —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ.

**1.4. –ü–æ—Ç–æ–∫ –Ω–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ (Execution Flow)**

–ø–∞—Ç ‚Üí GeneratePeriod ‚Üí lstGraph

‚Üí Match Pregledi / ExamAnal

‚Üí —Ä–µ–∑—É–ª—Ç–∞—Ç: –ú–∏–Ω–∞–ª–∏ / –¢–µ–∫—É—â–∏ / –ë—ä–¥–µ—â–∏

- –ü—Ä–æ—á–µ—Ç–∏ CL132
- –ß–µ—Ç–∏ PR001 –∏ –ø–æ–¥—Ä–µ–¥–∏ –¥–µ–π–Ω–æ—Å—Ç–∏—Ç–µ
- –ò–∑—á–∏—Å–ª–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ —Å–ø—Ä—è–º–æ –ø–∞—Ü–∏–µ–Ω—Ç–∞
- –í–∞–ª–∏–¥–∏—Ä–∞–π –∏ –¥–æ–±–∞–≤–∏ –≤ lstGraph
- –ó–∞ –≤—Å–µ–∫–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª —Ç—ä—Ä—Å–∏ —Ä–µ–∞–ª–Ω–∏ –ø—Ä–µ–≥–ª–µ–¥–∏
- –ó–∞ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è - —Ç—ä—Ä—Å–∏ –ø–æ CL22 –∫–æ–¥–∞
- –ú–∞—Ä–∫–∏—Ä–∞–π —Ç–µ–∫—É—â–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª
- –ü–æ–¥–≥–æ—Ç–≤–∏ –¥–∞–Ω–Ω–∏—Ç–µ –∑–∞ UI

**1.5. –ö—ä–¥–µ —â–µ –±—ä–¥–µ Aspect –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è—Ç–∞?**

Aspect –º–æ–¥–µ–ª—ä—Ç —â–µ –º–æ–∂–µ:

- –¥–∞ –æ–ø–∏—Å–≤–∞ CL132 –∫–∞—Ç–æ _–∞—Å–ø–µ–∫—Ç–Ω–∏ –Ω–æ–¥–æ–≤–µ_
- PR001 –∫–∞—Ç–æ _child –∞—Å–ø–µ–∫—Ç–∏_
- CL134 –∫–∞—Ç–æ _leaf –∞—Å–ø–µ–∫—Ç–∏_
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä–∞ UI
- –¥–∞ –ø–æ–¥–¥—ä—Ä–∂–∞ binding –¥–∏–Ω–∞–º–∏—á–Ω–æ
- –¥–∞ –Ω–∞–º–∞–ª–∏ –∫–æ–¥–∞ –Ω–∞ GeneratePeriod –¥–æ 10-15% –æ—Ç —Å–µ–≥–∞—à–Ω–∏—è

–¢–æ–≤–∞ —â–µ –±—ä–¥–µ —á–∞—Å—Ç –æ—Ç Engine 2.0, –æ–ø–∏—Å–∞–Ω–æ –≤ –°–µ–∫—Ü–∏—è 12.

**‚ùì –ì–æ—Ç–æ–≤–æ –ª–∏ –µ –∑–∞ –≤–∫–∞—Ä–≤–∞–Ω–µ –≤ DOCX?**

–ê–∫–æ –∫–∞–∂–µ—à **"–û–¥–æ–±—Ä—è–≤–∞–º –°–µ–∫—Ü–∏—è 1"**, —è –ø—Ä–µ—Ö–≤—ä—Ä–ª—è–º –≤ DOCX –∏ –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞–º —Å—ä—Å:

üëâ **–°–µ–∫—Ü–∏—è 2: Data Model (CL132, PR001, CL134, CL088, CL142, Patient, Pregled, Analysis)**

**–í–∏–µ –∫–∞–∑–∞—Ö—Ç–µ:**

–û–¥–æ–±—Ä—è–≤–∞–º –°–µ–∫—Ü–∏—è 1

**ChatGPT –∫–∞–∑–∞:**

–°–µ–∫—Ü–∏—è 1 –µ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–µ–Ω–∞ –∫—ä–º –¥–æ–∫—É–º–µ–Ω—Ç–∞!  
–ú–æ–∂–µ—à –¥–∞ –≥–æ —Å–≤–∞–ª–∏—à –æ—Ç—Ç—É–∫:

üëâ **Aspect_LTC_Engine_Unified_Spec_v1.0.docx - Download**

–í –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤–µ—á–µ —Å–∞ –≤–∫–ª—é—á–µ–Ω–∏:

- –ó–∞–≥–ª–∞–≤–∏–µ—Ç–æ
- –°–µ–∫—Ü–∏—è 0: Overview
- –°–µ–∫—Ü–∏—è 1: System Architecture

**–ì–æ—Ç–æ–≤ —Å—ä–º –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∞ —Å—ä—Å**

**–°–µ–∫—Ü–∏—è 2: Data Model (CL132, PR001, CL134, CL088, CL142, Patient, Pregled, ExamAnalysis)**

–ö–æ–≥–∞—Ç–æ –∫–∞–∂–µ—à:  
**‚Äû–ü—Ä–æ–¥—ä–ª–∂–∏ —Å—ä—Å –°–µ–∫—Ü–∏—è 2"**,  
–∑–∞–ø–æ—á–≤–∞–º –∏–∑–≥—Ä–∞–∂–¥–∞–Ω–µ—Ç–æ –Ω–∞ –º–æ–¥–µ–ª–∞ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ - —Ç–æ–≤–∞ –µ –Ω–∞–π-–≤–∞–∂–Ω–∞—Ç–∞ –æ—Å–Ω–æ–≤–∞ –∑–∞ —Ü–µ–ª–∏—è –∞–ª–≥–æ—Ä–∏—Ç—ä–º.

**–í–∏–µ –∫–∞–∑–∞—Ö—Ç–µ:**

–ü—Ä–æ–¥—ä–ª–∂–∏ —Å—ä—Å –°–µ–∫—Ü–∏—è 2

**ChatGPT –∫–∞–∑–∞:**

–ï—Ç–æ —è –°–µ–∫—Ü–∏—è 2 –≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏-–æ–±—è—Å–Ω–∏—Ç–µ–ª–µ–Ω —Å—Ç–∏–ª (–∏ –≤–µ—á–µ –µ –¥–æ–±–∞–≤–µ–Ω–∞ –∏ –≤ DOCX —Ñ–∞–π–ª–∞ **Aspect_LTC_Engine_Unified_Spec_v1.0.docx**):

**2\. Data Model (LTC / –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞)**

–¢–∞–∑–∏ —Å–µ–∫—Ü–∏—è –æ–ø–∏—Å–≤–∞ –º–æ–¥–µ–ª–∞ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ, –≤—ä—Ä—Ö—É –∫–æ–π—Ç–æ —Å—Ç—ä–ø–≤–∞ LTC / –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–Ω–∏—è –¥–≤–∏–≥–∞—Ç–µ–ª. –§–æ–∫—É—Å—ä—Ç –µ –≤—ä—Ä—Ö—É —Ç–æ–≤–∞ –∫–∞–∫ –ù–ó–ò–° –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∏—Ç–µ (CL132, PR001, CL134, CL088, CL142) —Å–µ —Å–≤—ä—Ä–∑–≤–∞—Ç —Å —Ä–µ–∞–ª–Ω–∏—Ç–µ –æ–±–µ–∫—Ç–∏ –≤ –•–∏–ø–æ–∫—Ä–∞—Ç 360 (–ø–∞—Ü–∏–µ–Ω—Ç, –ø—Ä–µ–≥–ª–µ–¥, –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ) –∏ –∫–∞–∫ –æ—Ç —Ç—è—Ö —Å–µ –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–∞ TGraphPeriod132 –∑–∞ –≤—Å–µ–∫–∏ –ø–∞—Ü–∏–µ–Ω—Ç.

**2.1. –ö–æ–Ω—Ü–µ–ø—Ç—É–∞–ª–µ–Ω –º–æ–¥–µ–ª**

–ù–∞ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª–Ω–æ –Ω–∏–≤–æ –∏–º–∞–º–µ —Ç—Ä–∏ —Å–ª–æ—è:

- **–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∏ –Ω–∞ –ù–ó–ò–°** - –æ–ø–∏—Å–≤–∞—Ç –∫–∞–∫–≤–∏ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–Ω–∏ –¥–µ–π–Ω–æ—Å—Ç–∏ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—Ç, –∫–æ–≥–∞ —Å–µ –ø—Ä–∞–≤—è—Ç –∏ –ø—Ä–∏ –∫–∞–∫–≤–∏ —É—Å–ª–æ–≤–∏—è.
- **–†–µ–∞–ª–Ω–∏ –¥–∞–Ω–Ω–∏ –∑–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞** - –∫–æ–≥–∞ –µ —Ä–æ–¥–µ–Ω, –∫–∞–∫—ä–≤ –ø–æ–ª –µ, –∫–∞–∫–≤–∏ –ø—Ä–µ–≥–ª–µ–¥–∏ –∏ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è —Ä–µ–∞–ª–Ω–æ —Å–∞ –º—É –∏–∑–≤—ä—Ä—à–µ–Ω–∏.
- **LTC –≥—Ä–∞—Ñ (TGraphPeriod132)** - —Ä–µ–∑—É–ª—Ç–∞—Ç—ä—Ç –æ—Ç –¥–≤–∏–≥–∞—Ç–µ–ª—è: –≤—Å–∏—á–∫–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏, –≤ –∫–æ–∏—Ç–æ –¥–∞–¥–µ–Ω –ø–∞—Ü–∏–µ–Ω—Ç –∏–º–∞ –ø—Ä–∞–≤–æ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–Ω–∞ –¥–µ–π–Ω–æ—Å—Ç, –ø–ª—é—Å –≤—Ä—ä–∑–∫–∞ –∫—ä–º —Å—ä–æ—Ç–≤–µ—Ç–Ω–∏—è –∑–∞–ø–∏—Å –æ—Ç CL132.

–û—Å–Ω–æ–≤–Ω–∞—Ç–∞ –∏–¥–µ—è: **–≤—Å–∏—á–∫–∏ –ø—Ä–∞–≤–∏–ª–∞ –∑–∞ –¥—ä–ª–≥–æ—Å—Ä–æ—á–Ω–∞—Ç–∞ –≥—Ä–∏–∂–∞ —Å–∞ –∫–æ–¥–∏—Ä–∞–Ω–∏ –≤ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∏—Ç–µ.** –•–∏–ø–æ–∫—Ä–∞—Ç 360 –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–æ —á–µ—Ç–µ —Ç–µ–∑–∏ –ø—Ä–∞–≤–∏–ª–∞, –ø—Ä–∏–ª–∞–≥–∞ –≥–∏ –≤—ä—Ä—Ö—É –∫–æ–Ω–∫—Ä–µ—Ç–µ–Ω –ø–∞—Ü–∏–µ–Ω—Ç –∏ –≥–∏ –ø—Ä–µ–≤—Ä—ä—â–∞ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ –æ—Ç –≤—Ä–µ–º–µ (startDate / endDate) –∑–∞ –≤—Å—è–∫–∞ –¥–µ–π–Ω–æ—Å—Ç.

**2.2. –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∏ –Ω–∞ –ù–ó–ò–°**

**2.2.1. CL132 - –ü–ª–∞–Ω–∏—Ä–∞–Ω–∏ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–Ω–∏ –¥–µ–π–Ω–æ—Å—Ç–∏**

CL132 –µ —è–¥—Ä–æ—Ç–æ –Ω–∞ LTC –ª–æ–≥–∏–∫–∞—Ç–∞. –í—Å–µ–∫–∏ –∑–∞–ø–∏—Å –≤ CL132 –æ–ø–∏—Å–≤–∞ –µ–¥–∏–Ω –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ–Ω –ø–ª–∞–Ω (‚Äû–¥–µ–π–Ω–æ—Å—Ç").

**–ö–ª—é—á–æ–≤–∏ DDL –ø–æ–ª–µ—Ç–∞ (TCL132Item.TRecCL132):**

- Key - —É–Ω–∏–∫–∞–ª–µ–Ω –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–∞ –ø–ª–∞–Ω–∞ (–Ω–∞–ø—Ä. "C11", "V16").
- Description / DescriptionEn - —Ç–µ–∫—Å—Ç–æ–≤–æ –æ–ø–∏—Å–∞–Ω–∏–µ.
- group / cl047 - –≥—Ä—É–ø–∏—Ä–∞–Ω–µ –ø–æ —Ç–∏–ø –¥–µ–π–Ω–æ—Å—Ç (–¥–µ—Ç—Å–∫–æ –∑–¥—Ä–∞–≤–µ, –º–∞–π—á–∏–Ω–æ –∑–¥—Ä–∞–≤–µ, –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞ –Ω–∞ –≤—ä–∑—Ä–∞—Å—Ç–Ω–∏ –∏ –¥—Ä.).
- cl136 - —Ç–∏–ø –¥–µ–π–Ω–æ—Å—Ç: –ø—Ä–µ–≥–ª–µ–¥ / –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ / –∏–º—É–Ω–∏–∑–∞—Ü–∏—è (–∏–∑–ø–æ–ª–∑–≤–∞ —Å–µ –æ—Ç –¥–≤–∏–≥–∞—Ç–µ–ª—è).
- cl011 - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–∞—â–∏ –ø—Ä–∞–≤–∏–ª–∞ (–≤—Ä—ä–∑–∫–∞ –∫—ä–º –¥—Ä—É–≥–∞ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞).
- event_trigger - –∫–æ–≥–∞ —Å–µ –∑–∞–¥–µ–π—Å—Ç–≤–∞ —Å—ä–±–∏—Ç–∏–µ—Ç–æ (–Ω–∞–ø—Ä. –ø—Ä–∏ –Ω–∞–≤—ä—Ä—à–≤–∞–Ω–µ –Ω–∞ –≤—ä–∑—Ä–∞—Å—Ç / –ø—Ä–∏ –Ω–∞—Å—Ç—ä–ø–≤–∞–Ω–µ –Ω–∞ –≥–æ–¥–∏–Ω–∞).
- repeat_years - –ø—Ä–µ–∑ –∫–æ–ª–∫–æ –≥–æ–¥–∏–Ω–∏ —Å–µ –ø–æ–≤—Ç–∞—Ä—è –ø–ª–∞–Ω–∞ (–∞–∫–æ –∏–º–∞ –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç).
- gender - –∑–∞ –∫–æ–π –ø–æ–ª –≤–∞–∂–∏ (m / f / –ø—Ä–∞–∑–Ω–æ).
- min_age / max_age - –æ—Ç/–¥–æ –∫–∞–∫–≤–∞ –≤—ä–∑—Ä–∞—Å—Ç (–≤ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤ —Ñ–æ—Ä–º–∞—Ç –Ω–∞ –ù–ó–ò–°).
- min_interval / max_interval - –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∑–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ (–≤ –º–æ–º–µ–Ω—Ç–∞ –ª–æ–≥–∏–∫–∞—Ç–∞ –µ —Ñ–æ–∫—É—Å–∏—Ä–∞–Ω–∞ –≤—ä—Ä—Ö—É –≤—ä–∑—Ä–∞—Å—Ç—Ç–∞).
- recurring - —Ñ–ª–∞–≥ –¥–∞–ª–∏ –µ –ø–æ–≤—Ç–∞—Ä—è—â–∞ —Å–µ –¥–µ–π–Ω–æ—Å—Ç.
- Logical - –ª–æ–≥–∏—á–µ—Å–∫–∏ –±–∏—Ç–æ–≤–µ –∑–∞ –≤—ä—Ç—Ä–µ—à–Ω–∏ —Ñ–ª–∞–≥–æ–≤–µ (TlogicalCL132Set).

**–†–∞–∑—à–∏—Ä–µ–Ω –∫–ª–∞—Å:** TRealCl132Item = class(TCL132Item)

- FListPr001: TList&lt;TRealPR001Item&gt; - –≤—Å–∏—á–∫–∏ –¥–µ–π–Ω–æ—Å—Ç–∏ (PR001), —Å–≤—ä—Ä–∑–∞–Ω–∏ —Å —Ç–æ–∑–∏ –ø–ª–∞–Ω.
- FPatient: TObject - —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è –∫—ä–º –ø–∞—Ü–∏–µ–Ω—Ç–∞ (–∞–∫–æ –µ –Ω—É–∂–Ω–æ –ª–æ–∫–∞–ª–Ω–æ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ).
- FPregled: TObject - —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è –∫—ä–º –∫–æ–Ω–∫—Ä–µ—Ç–µ–Ω –ø—Ä–µ–≥–ª–µ–¥, –∫–æ–π—Ç–æ –µ –∏–∑–ø—ä–ª–Ω–∏–ª –ø–ª–∞–Ω–∞ (–∞–∫–æ –∏–º–∞ —Ç–∞–∫—ä–≤).
- FExamAnal: TObject - —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏—è –∫—ä–º –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ, –∏–∑–ø—ä–ª–Ω–∏–ª–æ –ø–ª–∞–Ω–∞ (–∞–∫–æ –∏–º–∞ —Ç–∞–∫–æ–≤–∞).
- StartDate / EndDate: TDate - –∫–µ—à–∏—Ä–∞–Ω–∏ –ø–æ–ª–µ—Ç–∞, –∫–æ–∏—Ç–æ –º–æ–≥–∞—Ç –¥–∞ —Å–µ –ø–æ–ª–∑–≤–∞—Ç –æ—Ç –¥–≤–∏–≥–∞—Ç–µ–ª/–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
- CL136: string - –∫–µ—à–∏—Ä–∞–Ω–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç –Ω–∞ cl136 (—Ç–∏–ø –¥–µ–π–Ω–æ—Å—Ç).
- CL137: TCL137 - —Å—Ç–∞—Ç—É—Å: Pending / PartiallyCompleted / Completed (–≤—ä—Ç—Ä–µ—à–Ω–∞ –ª–æ–≥–∏–∫–∞).

**2.2.2. PR001 - –î–µ–π–Ω–æ—Å—Ç–∏ –≤ —Ä–∞–º–∫–∏—Ç–µ –Ω–∞ –ø–ª–∞–Ω**

PR001 –æ–ø–∏—Å–≤–∞ **–∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ç–µ –¥–µ–π–Ω–æ—Å—Ç–∏**, –∫–æ–∏—Ç–æ –º–æ–≥–∞—Ç –¥–∞ –±—ä–¥–∞—Ç —á–∞—Å—Ç –æ—Ç –¥–∞–¥–µ–Ω –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ–Ω –ø–ª–∞–Ω - –ø—Ä–µ–≥–ª–µ–¥–∏, –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è, –ø—Ä–æ—Ü–µ–¥—É—Ä–∏ –∏ –¥—Ä.

**–ö–ª—é—á–æ–≤–∏ DDL –ø–æ–ª–µ—Ç–∞ (TPR001Item.TRecPR001):**

- CL132 - –∫–ª—é—á –∫—ä–º –ø–ª–∞–Ω–∞ (CL132.Key).
- Nomenclature - –∫—ä–º –∫–æ—è –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ –µ Activity_ID (–Ω–∞–ø—Ä. "CL133", "CL088" –∏ —Ç.–Ω.).
- Activity_ID - –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—è—Ç –∫–æ–¥ –∑–∞ –¥–µ–π–Ω–æ—Å—Ç—Ç–∞.
- Description / Notes - —Ç–µ–∫—Å—Ç–æ–≤–æ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –±–µ–ª–µ–∂–∫–∏.
- Rules - —Ç–µ–∫—Å—Ç–æ–≤–∏ –ø—Ä–∞–≤–∏–ª–∞ (–∏–∑–ø–æ–ª–∑–≤–∞—Ç —Å–µ –Ω–∞–ø—Ä–∏–º–µ—Ä –∑–∞ —Ñ–∏–ª—Ç—Ä–∏—Ä–∞–Ω–µ –ø–æ CL088).
- Specialty_CL006 - –∫—ä–º –∫–æ—è —Å–ø–µ—Ü–∏–∞–ª–Ω–æ—Å—Ç –µ –Ω–∞—Å–æ—á–µ–Ω–∞ –¥–µ–π–Ω–æ—Å—Ç—Ç–∞.
- Valid_Until - –≤–∞–ª–∏–¥–Ω–æ—Å—Ç –Ω–∞ –¥–µ–π–Ω–æ—Å—Ç—Ç–∞.
- Logical - –ª–æ–≥–∏—á–µ—Å–∫–∏ —Ñ–ª–∞–≥–æ–≤–µ (TlogicalPR001Set).

**–†–∞–∑—à–∏—Ä–µ–Ω –∫–ª–∞—Å:** TRealPR001Item = class(TPr001Item)

- CL133: TCL133 - —Ç–∏–ø —Å–µ–∫—Ü–∏—è/—Ñ–æ—Ä–º–∞ (RiskFactors, SocialDataPerson, Pregnancy –∏ –¥—Ä.).
- CL142: TRealCl142Item - –≤—Ä—ä–∑–∫–∞ –∫—ä–º ACHI –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ (–∞–∫–æ –¥–µ–π–Ω–æ—Å—Ç—Ç–∞ –µ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞).
- LstCl134: TList&lt;TRealCl134Item&gt; - —Å–ø–∏—Å—ä–∫ –æ—Ç –≤—ä–ø—Ä–æ—Å–∏/–ø–æ–ª–µ—Ç–∞ (CL134), —Å–≤—ä—Ä–∑–∞–Ω–∏ —Å –¥–µ–π–Ω–æ—Å—Ç—Ç–∞.
- FExamAnal: TObject - –∞–∫–æ –¥–µ–π–Ω–æ—Å—Ç—Ç–∞ –µ –∏–∑–ø—ä–ª–Ω–µ–Ω–∞ —á—Ä–µ–∑ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ (ExamAnalysis), —Ç—É–∫ —Å–µ –∑–∞–∫–∞—á–∞ —Å—ä–æ—Ç–≤–µ—Ç–Ω–∏—è—Ç –∑–∞–ø–∏—Å.
- Rules: string - property, –∫–æ–µ—Ç–æ –ø–∞–∑–∏ –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–æ –æ–±—Ä–∞–±–æ—Ç–µ–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞.

**2.2.3. CL134 - –í—ä–ø—Ä–æ—Å–∏ / –ø–æ–ª–µ—Ç–∞ –∫—ä–º –¥–µ–π–Ω–æ—Å—Ç–∏—Ç–µ**

CL134 –æ–ø–∏—Å–≤–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏ **–ø–æ–ª–µ—Ç–∞/–≤—ä–ø—Ä–æ—Å–∏** –∑–∞ –≤—ä–≤–µ–∂–¥–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏ –ø–æ –¥–∞–¥–µ–Ω–∞ –¥–µ–π–Ω–æ—Å—Ç - –Ω–∞–ø—Ä. –≤—ä–ø—Ä–æ—Å–∏ –∑–∞ —Ä–∏—Å–∫–æ–≤–∏ —Ñ–∞–∫—Ç–æ—Ä–∏, —Å–æ—Ü–∏–∞–ª–µ–Ω —Å—Ç–∞—Ç—É—Å, –Ω–µ—Ä–≤–Ω–æ-–ø—Å–∏—Ö–∏—á–µ—Å–∫–æ —Ä–∞–∑–≤–∏—Ç–∏–µ –∏ —Ç.–Ω.

**–ö–ª—é—á–æ–≤–∏ DDL –ø–æ–ª–µ—Ç–∞ (TCL134Item.TRecCL134):**

- Key - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–∞ –ø–æ–ª–µ—Ç–æ.
- Description - —Ç–µ–∫—Å—Ç–æ–≤–æ –∏–º–µ –Ω–∞ –ø–æ–ª–µ—Ç–æ.
- Display_Value_BG / EN - —Ç–µ–∫—Å—Ç –∑–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏ / –∞–Ω–≥–ª–∏–π—Å–∫–∏.
- Note - –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –±–µ–ª–µ–∂–∫–∞ (–∏–∑–ø–æ–ª–∑–≤–∞ —Å–µ –∏ –∑–∞ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞ –≤ –¥–≤–∏–≥–∞—Ç–µ–ª—è).
- CL133 - –∫—ä–º –∫–æ—è —Å–µ–∫—Ü–∏—è –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏ (TCL133).
- Multiple_Choice - –¥–∞–ª–∏ –ø–æ–∑–≤–æ–ª—è–≤–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ—Ç–≥–æ–≤–æ—Ä–∏.
- CL028 - —Ç–∏–ø –Ω–∞ –æ—Ç–≥–æ–≤–æ—Ä–∞ (—á–∏—Å–ª–æ–≤, –Ω–æ–º–∏–Ω–∞–ª–µ–Ω, –¥–∞—Ç–∞, –±—É–ª–µ–≤ –∏ —Ç.–Ω.).
- Answer_Nomenclature - –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ –∑–∞ –æ—Ç–≥–æ–≤–æ—Ä–∏—Ç–µ.
- Since / Valid_Until - –≤–∞–ª–∏–¥–Ω–æ—Å—Ç –Ω–∞ –ø–æ–ª–µ—Ç–æ –≤—ä–≤ –≤—Ä–µ–º–µ—Ç–æ.

**–†–∞–∑—à–∏—Ä–µ–Ω –∫–ª–∞—Å:** TRealCl134Item = class(TCL134Item)

- –≤ –º–æ–º–µ–Ω—Ç–∞ –æ—Å–Ω–æ–≤–Ω–æ —Å–µ –ø–æ–ª–∑–≤–∞ –∫–∞—Ç–æ —Å–∏–ª–Ω–æ-—Ç–∏–ø–∏–∑–∏—Ä–∞–Ω–∞ –æ–ø–∞–∫–æ–≤–∫–∞ –≤—ä—Ä—Ö—É TCL134Item.
- —Ä–µ–∞–ª–Ω–∞—Ç–∞ –ª–æ–≥–∏–∫–∞ –µ –≤ TRealCL134Coll.sortListByKey, –∫–æ—è—Ç–æ —Å–æ—Ä—Ç–∏—Ä–∞ CL134 –ø–æ Key –≤ —Ä–∞–º–∫–∏—Ç–µ –Ω–∞ –¥–∞–¥–µ–Ω–∞ –¥–µ–π–Ω–æ—Å—Ç.

**2.2.4. CL088 - –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ / —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –æ—Ç –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è**

CL088 –æ–ø–∏—Å–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏—Ç–µ –Ω–∞ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è—Ç–∞ - **–∫–∞–∫–≤–æ —Ç–æ—á–Ω–æ —Å–µ –∏–∑–º–µ—Ä–≤–∞** –∏ **–∫–∞–∫—ä–≤ —Ç–∏–ø** –µ –∏–∑–º–µ—Ä–≤–∞–Ω–µ—Ç–æ.

**–ö–ª—é—á–æ–≤–∏ DDL –ø–æ–ª–µ—Ç–∞ (TCL088Item.TRecCL088):**

- Key - –∫–æ–¥ –Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—ä—Ä–∞.
- Description / DescriptionEn - –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—ä—Ä–∞.
- ucum - –º–µ—Ä–Ω–∞ –µ–¥–∏–Ω–∏—Ü–∞.
- cl050 / cl012 / cl028 / cl032 - —Ä–∞–∑–ª–∏—á–Ω–∏ –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –∫–ª–∞—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏.
- cl138 - —Ç–∏–ø –Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—ä—Ä–∞ (—Ñ–∏–∑–∏–∫–∞–ª–µ–Ω –ø—Ä–µ–≥–ª–µ–¥, –ø—Å–∏—Ö–∏—á–Ω–æ —Ä–∞–∑–≤–∏—Ç–∏–µ, –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏ –¥—Ä.).
- conclusion / note - —Ç–µ–∫—Å—Ç –∑–∞ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ –∏ –±–µ–ª–µ–∂–∫–∏.
- cl142 - –≤—Ä—ä–∑–∫–∞ –∫—ä–º CL142 (–ø—Ä–æ—Ü–µ–¥—É—Ä–∞).

**–†–∞–∑—à–∏—Ä–µ–Ω –∫–ª–∞—Å:** TRealCl088Item = class(TCL088Item)

- CL138: TStringList - –∫–µ—à–∏—Ä–∞–Ω–∏ —Ç–µ–∫—Å—Ç–æ–≤–µ –∑–∞ —Ä–∞–∑–ª–∏—á–Ω–∏—Ç–µ —Ç–∏–ø–æ–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ (—Ñ–∏–∑–∏–∫–∞–ª–µ–Ω –ø—Ä–µ–≥–ª–µ–¥, –Ω–µ—Ä–≤–Ω–æ-–ø—Å–∏—Ö–∏—á–µ—Å–∫–æ —Ä–∞–∑–≤–∏—Ç–∏–µ –∏ –¥—Ä.).
- FItemUp: TRealCl088Item - –º–æ—Å—Ç –∫—ä–º ‚Äû–≥–æ—Ä–Ω–∏—è" —Å–ª–æ–π –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∏ –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ/—ä–ø–¥–µ–π—Ç.

**–ö–æ–ª–µ–∫—Ü–∏—è:** TRealCL088Coll

- SortByKeyRec - —Å–æ—Ä—Ç–∏—Ä–∞ –ø–æ PRecord.Key (—Ä–µ–∞–ª–Ω–æ ‚Äû—á–æ–≤–µ—à–∫–∏—è—Ç" –∫–ª—é—á).
- UpdateCL088 / CompareUpdate - –º–∞—Ä—à—Ä—É—Ç–∏ –∑–∞ –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ.

**2.2.5. CL142 - ACHI –ø—Ä–æ—Ü–µ–¥—É—Ä–∏ / –¥–µ–π–Ω–æ—Å—Ç–∏**

CL142 –æ–ø–∏—Å–≤–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–∏ (ACHI –∫–æ–¥–æ–≤–µ, –ù–ó–û–ö –∫–æ–¥–æ–≤–µ –∏ —Ç.–Ω.), –∫–æ–∏—Ç–æ –º–æ–≥–∞—Ç –¥–∞ –±—ä–¥–∞—Ç —Å–≤—ä—Ä–∑–∞–Ω–∏ —Å –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–Ω–∏—Ç–µ –¥–µ–π–Ω–æ—Å—Ç–∏.

**–ö–ª—é—á–æ–≤–∏ DDL –ø–æ–ª–µ—Ç–∞ (TCL142Item.TRecCL142):**

- Key - –∫–æ–¥ –Ω–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ç–∞.
- Description / DescriptionEn - —Ç–µ–∫—Å—Ç–æ–≤–æ –æ–ø–∏—Å–∞–Ω–∏–µ.
- achi_block / achi_chapter / achi_code - ACHI —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–∞–Ω–µ.
- nhif_code - –∫–æ–¥ –∫—ä–º –ù–ó–û–ö.
- cl048 / cl006 - –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –∫–ª–∞—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —Å–ø–µ—Ü–∏–∞–ª–Ω–æ—Å—Ç–∏.
- highly - –¥–∞–ª–∏ –µ –≤–∏—Å–æ–∫–æ—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–∞–Ω–∞ –¥–µ–π–Ω–æ—Å—Ç.
- Logical - –±–∏—Ç–æ–≤–µ –∑–∞ –ª–æ–≥–∏–∫–∞.

**–†–∞–∑—à–∏—Ä–µ–Ω –∫–ª–∞—Å:** TRealCl142Item = class(TCL142Item)

- FListCL088: TList&lt;TRealCL088Item&gt; - –≤—Å–∏—á–∫–∏ CL088 –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, —Å–≤—ä—Ä–∑–∞–Ω–∏ —Å –ø—Ä–æ—Ü–µ–¥—É—Ä–∞—Ç–∞.
- FListCL144: TList&lt;TRealCL144Item&gt; - –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞/—É—Å–ª–æ–≤–∏—è (CL144).

**2.3. Runtime –æ–±–µ–∫—Ç–∏ (–ø–∞—Ü–∏–µ–Ω—Ç, –ø—Ä–µ–≥–ª–µ–¥, –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ)**

**2.3.1. TRealPatientNewItem - –ü–∞—Ü–∏–µ–Ω—Ç**

TRealPatientNewItem –µ —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ –Ω–∞ TPatientNewItemForFind –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–≤–∞ –æ—Å–Ω–æ–≤–Ω–∏—è—Ç runtime –æ–±–µ–∫—Ç –∑–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞, –≤—ä—Ä—Ö—É –∫–æ–π—Ç–æ —Ä–∞–±–æ—Ç–∏ LTC –¥–≤–∏–≥–∞—Ç–µ–ª—è.

**–ö–ª—é—á–æ–≤–∏ DDL –ø–æ–ª–µ—Ç–∞ (TPatientNewItem.TRecPatientNew):**

- BIRTH_DATE - –¥–∞—Ç–∞ –Ω–∞ —Ä–∞–∂–¥–∞–Ω–µ (–∫—Ä–∏—Ç–∏—á–Ω–∞ –∑–∞ —Å–º–µ—Ç–∫–∏—Ç–µ –ø–æ –≤—ä–∑—Ä–∞—Å—Ç).
- EGN - –ï–ì–ù (–∏–∑–ø–æ–ª–∑–≤–∞ —Å–µ –∑–∞ —Ç–µ—Å—Ç–æ–≤–µ –∏ –ª–æ–≥–∏–∫–∞).
- SEX_TYPE_M / SEX_TYPE_F - –ª–æ–≥–∏—á–µ—Å–∫–∏ —Ñ–ª–∞–≥–æ–≤–µ –∑–∞ –ø–æ–ª–∞ (–≤ Logical).

**–†–∞–∑—à–∏—Ä–µ–Ω–∏—è –≤ TRealPatientNewItem:**

- FPregledi: TList&lt;TRealPregledNewItem&gt; - –≤—Å–∏—á–∫–∏ –ø—Ä–µ–≥–ª–µ–¥–∏ –Ω–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞.
- FExamAnals: TList&lt;TRealExamAnalysisItem&gt; - –≤—Å–∏—á–∫–∏ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è –Ω–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞.
- lstGraph: TList&lt;TGraphPeriod132&gt; - —Ä–µ–∑—É–ª—Ç–∞—Ç –æ—Ç GeneratePeriod; –≤—Å–∏—á–∫–∏ –ø–µ—Ä–∏–æ–¥–∏ –∑–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞.
- FLastPregled: TRealPregledNewItem - –ø–æ—Å–ª–µ–¥–Ω–∏—è—Ç –ø—Ä–µ–≥–ª–µ–¥.
- NoteProf: string - —Ç–µ–∫—Å—Ç–æ–≤–æ —Ä–µ–∑—é–º–µ –∑–∞ —Ç–µ–∫—É—â–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏ (–ø–æ–∫–∞–∑–≤–∞ —Å–µ –≤ UI).
- CurrentGraphIndex: Integer - –∏–Ω–¥–µ–∫—Å –≤ lstGraph –∑–∞ ‚Äû–Ω–∞–π-–≤–∞–∂–Ω–∏—è" —Ç–µ–∫—É—â –∏–Ω—Ç–µ—Ä–≤–∞–ª.
- ListCurrentProf: TList&lt;TGraphPeriod132&gt; - –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ –Ω–∞ lstGraph –∑–∞ —Ç–µ–∫—É—â–∏—Ç–µ –¥–µ–π–Ω–æ—Å—Ç–∏.

**2.3.2. TRealPregledNewItem - –ü—Ä–µ–≥–ª–µ–¥**

TRealPregledNewItem —Ä–∞–∑—à–∏—Ä—è–≤–∞ TPregledNewItem –∏ –æ–ø–∏—Å–≤–∞ –µ–¥–∏–Ω —Ä–µ–∞–ª–µ–Ω –ø—Ä–µ–≥–ª–µ–¥ (–∞–º–±. –ª–∏—Å—Ç, –¥–∞—Ç–∞, —Ç–∏–ø, —Ñ–ª–∞–≥–æ–≤–µ IS_PREVENTIVE, IS_DISPANSERY –∏ —Ç.–Ω.).

**–ö–ª—é—á–æ–≤–∏ DDL –ø–æ–ª–µ—Ç–∞ (TPregledNewItem.TRecPregledNew):**

- START_DATE / START_TIME - –¥–∞—Ç–∞ –∏ —á–∞—Å –Ω–∞ –ø—Ä–µ–≥–ª–µ–¥–∞.
- Logical - –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ—Ç —Ñ–ª–∞–≥–æ–≤–µ (IS_PREVENTIVE, IS_ANALYSIS, IS_BABY_CARE –∏ –¥—Ä.).

**–†–∞–∑—à–∏—Ä–µ–Ω–∏—è –≤ TRealPregledNewItem:**

- Cl132: TObject - –≤—Ä—ä–∑–∫–∞ –∫—ä–º –ø–ª–∞–Ω–∞ (TRealCl132Item), –ø–æ –∫–æ–π—Ç–æ –µ –∏–∑–≤—ä—Ä—à–µ–Ω –ø—Ä–µ–≥–ª–µ–¥—ä—Ç.
- FDiagnosis, FProcedures, FImmuns, FProfCards - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –∑–∞ –¥–∏–∞–≥–Ω–æ–∑–∏, –ø—Ä–æ—Ü–µ–¥—É—Ä–∏, –∏–º—É–Ω–∏–∑–∞—Ü–∏–∏ –∏ –∫–∞—Ä—Ç–∏ –∑–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞.
- –§–ª–∞–≥–æ–≤–µ IS_PREVENTIVE_\*, IS_Screening - —Ä–∞–∑–ª–∏—á–Ω–∏ –≤–∏–¥–æ–≤–µ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞.
- LRN / NRN / AMB_LISTN - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∏, –Ω—É–∂–Ω–∏ –∑–∞ –≤—Ä—ä–∑–∫–∞ —Å –ù–ó–ò–°.

**2.3.3. TRealExamAnalysisItem - –ò–∑—Å–ª–µ–¥–≤–∞–Ω–µ**

TRealExamAnalysisItem –µ runtime –ø—Ä–µ–¥—Å—Ç–∞–≤—è–Ω–µ –Ω–∞ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ. –ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ –∑–∞ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ –Ω–∞ PR001 –¥–µ–π–Ω–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø ‚Äû–∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ" —Å —Ä–µ–∞–ª–Ω–æ –∏–∑–≤—ä—Ä—à–µ–Ω–∏ ExamAnalysis –∑–∞–ø–∏—Å–∏.

**–ö–ª—é—á–æ–≤–∏ DDL –ø–æ–ª–µ—Ç–∞ (TExamAnalysisItem.TRecExamAnalysis):**

- DATA - –¥–∞—Ç–∞ –Ω–∞ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ—Ç–æ.
- NZIS_CODE_CL22 - –∫–æ–¥ –Ω–∞ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ—Ç–æ (CL22).
- RESULT - —Ä–µ–∑—É–ª—Ç–∞—Ç (—Ç–µ–∫—Å—Ç).

**–†–∞–∑—à–∏—Ä–µ–Ω–∏—è –≤ TRealExamAnalysisItem:**

- Cl132: TObject - –≤—Ä—ä–∑–∫–∞ –∫—ä–º –ø–ª–∞–Ω–∞ (TRealCl132Item), –∫–æ–π—Ç–æ —Ç–æ–≤–∞ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ –ø–æ–∫—Ä–∏–≤–∞.
- MdnId / FMdn - –≤—Ä—ä–∑–∫–∞ –∫—ä–º –º–µ–¥. –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.
- LinkNode: PVirtualNode - –≤—Ä—ä–∑–∫–∞ –∫—ä–º UI –¥—ä—Ä–≤–æ—Ç–æ.
- Cl022: string - –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–µ–Ω –∫–æ–¥ –∫—ä–º –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ CL022.

**2.4. TGraphPeriod132 - –µ–¥–∏–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ—Ç LTC –≥—Ä–∞—Ñ–∞**

TGraphPeriod132 –µ –º–∞–ª—ä–∫ record, –∫–æ–π—Ç–æ –æ–ø–∏—Å–≤–∞ –µ–¥–∏–Ω –∫–æ–Ω–∫—Ä–µ—Ç–µ–Ω –≤—Ä–µ–º–µ–≤–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª, –≤ –∫–æ–π—Ç–æ –ø–∞—Ü–∏–µ–Ω—Ç—ä—Ç –∏–º–∞ –ø—Ä–∞–≤–æ –Ω–∞ –¥–∞–¥–µ–Ω –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ–Ω –ø–ª–∞–Ω (CL132).

type

TGraphPeriod132 = record

Cl132: TRealCL132Item;

startDate: TDate;

endDate: TDate;

repNumber: Integer; // 0 = –ø—ä—Ä–≤–∏, >0 = —Å–ª–µ–¥–≤–∞—â–∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è, -1 = –µ–¥–Ω–æ–∫—Ä–∞—Ç–µ–Ω

end;

- Cl132 - –∫—ä–º –∫–æ–π –ø–ª–∞–Ω —Å–µ –æ—Ç–Ω–∞—Å—è —Ç–æ–∑–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª.
- startDate / endDate - –Ω–∞—á–∞–ª–Ω–∞ –∏ –∫—Ä–∞–π–Ω–∞ –¥–∞—Ç–∞ –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç –∑–∞ —Ç–æ–∑–∏ –ø–∞—Ü–∏–µ–Ω—Ç.
- repNumber - –Ω–æ–º–µ—Ä –Ω–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ—Ç–æ (–∑–∞ –ø–µ—Ä–∏–æ–¥–∏—á–Ω–∏ –ø–ª–∞–Ω–æ–≤–µ).

–ó–∞ –≤—Å–µ–∫–∏ –ø–∞—Ü–∏–µ–Ω—Ç TRealPatientNewItem.lstGraph —Å—ä–¥—ä—Ä–∂–∞ —Ü–µ–ª–∏—è –º—É LTC –≥—Ä–∞—Ñ - –≤—Å–∏—á–∫–∏ TGraphPeriod132, –∏–∑—á–∏—Å–ª–µ–Ω–∏ –æ—Ç GeneratePeriod(Apat).

**2.5. –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç–∏ –∏ –≤—Ä—ä–∑–∫–∏ –º–µ–∂–¥—É –º–æ–¥–µ–ª–∏—Ç–µ**

- –í—Å–µ–∫–∏ TGraphPeriod132 —Å–æ—á–∏ –∫—ä–º –≤–∞–ª–∏–¥–µ–Ω TRealCl132Item –æ—Ç CL132Coll.
- –í—Å–µ–∫–∏ TRealCl132Item –º–æ–∂–µ –¥–∞ –∏–º–∞ 0..N TRealPR001Item –≤ FListPr001.
- –í—Å–µ–∫–∏ TRealPR001Item –º–æ–∂–µ –¥–∞ –∏–º–∞ 0..N TRealCl134Item –≤ LstCl134.
- –ê–∫–æ PR001 –¥–µ–π–Ω–æ—Å—Ç—Ç–∞ –µ –æ—Ç —Ç–∏–ø _–∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ_, —Ç—è –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –ø–æ–∫—Ä–∏—Ç–∞ –æ—Ç 0..1 TRealExamAnalysisItem (FExamAnal).
- –ê–∫–æ CL132 –µ –æ—Ç —Ç–∏–ø _–ø—Ä–µ–≥–ª–µ–¥_ (cl136 = '1'), –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –ø–æ–∫—Ä–∏—Ç –æ—Ç 0..1 TRealPregledNewItem (FPregled).
- –í—Å–∏—á–∫–∏ —Ç–µ–∑–∏ –≤—Ä—ä–∑–∫–∏ —Å–∞ –µ–¥–Ω–æ–ø–æ—Å–æ—á–Ω–∏ (–æ—Ç runtime –æ–±–µ–∫—Ç–∏—Ç–µ –∫—ä–º –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∏—Ç–µ), –∑–∞ –¥–∞ –Ω–µ —Å–µ —É—Å–ª–æ–∂–Ω—è–≤–∞ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è—Ç–∞/–∑–∞–ø–∏—Å–∞.

–°–ª–µ–¥–≤–∞—â–∞—Ç–∞ —Å–µ–∫—Ü–∏—è —â–µ —Å—Ç—ä–ø–∏ –Ω–∞ —Ç–æ–∑–∏ –º–æ–¥–µ–ª –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ, –∑–∞ –¥–∞ –æ–ø–∏—à–µ —Å–∞–º–∏—è –∞–ª–≥–æ—Ä–∏—Ç—ä–º –≤ GeneratePeriod(Apat) –∏ –Ω–µ–≥–æ–≤–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å–ª—É—á–∞–∏ (–≤–∞–∫—Å–∏–Ω–∏, V16, —Å—Ç–∞—Ä—Ç–æ–≤–∞ –≥–æ–¥–∏–Ω–∞ –Ω–∞ –ù–ó–ò–° –∏ –¥—Ä.).

–ê–∫–æ –∏—Å–∫–∞—à, —Å–ª–µ–¥–≤–∞—â–∞—Ç–∞ —Å—Ç—ä–ø–∫–∞ –º–æ–∂–µ –¥–∞ –µ **–°–µ–∫—Ü–∏—è 3 - –ê–ª–≥–æ—Ä–∏—Ç—ä–º—ä—Ç GeneratePeriod(Apat)** —Å –ø—Å–µ–≤–¥–æ–∫–æ–¥ + –∫–æ–º–µ–Ω—Ç–∞—Ä–∏ –ø–æ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏—Ç–µ —Å–ª—É—á–∞–∏.

**–í–∏–µ –∫–∞–∑–∞—Ö—Ç–µ:**

–¥–∞

**ChatGPT –∫–∞–∑–∞:**

–ü—Ä–µ–∫—Ä–∞—Å–Ω–æ - –ø—Ä–µ–º–∏–Ω–∞–≤–∞–º–µ –∫—ä–º **–°–µ–∫—Ü–∏—è 3**, –∫–æ—è—Ç–æ –µ _–Ω–∞–π-–≤–∞–∂–Ω–∞—Ç–∞ —á–∞—Å—Ç –Ω–∞ —Ü–µ–ª–∏—è –¥–æ–∫—É–º–µ–Ω—Ç_, –∑–∞—â–æ—Ç–æ –æ–ø–∏—Å–≤–∞ –ª–æ–≥–∏–∫–∞—Ç–∞ –Ω–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—è **GeneratePeriod(Apat)**.

–¢–æ–≤–∞ –µ —Å—ä—Ä—Ü–µ—Ç–æ –Ω–∞ LTC Engine –∏ –≤ —Ç–∞–∑–∏ —Å–µ–∫—Ü–∏—è —â–µ –Ω–∞–ø—Ä–∞–≤–∏–º:

- **–ø—ä–ª–Ω–∞ —Ä–∞–∑–±–∏–≤–∫–∞** –Ω–∞ –∞–ª–≥–æ—Ä–∏—Ç—ä–º–∞
- **–ø—Å–µ–≤–¥–æ–∫–æ–¥** –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ç–∞
- **–∫–∞—Ä—Ç–∞ –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏—Ç–µ —Å–ª—É—á–∞–∏** (V16, A1, JM1, event_trigger = '–ø' –∏ –¥—Ä.)
- **–¥–∏–∞–≥—Ä–∞–º–∞ –Ω–∞ –ø–æ—Ç–æ–∫–∞**
- **–¥–µ—Ç–∞–π–ª–Ω–æ –æ–±—è—Å–Ω–µ–Ω–∏–µ –Ω–∞ –∏–∑—á–∏—Å–ª–µ–Ω–∏—è—Ç–∞ –Ω–∞ –≤—ä–∑—Ä–∞—Å—Ç, –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ –∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è**

–°–ª–µ–¥ –∫–∞—Ç–æ –æ–¥–æ–±—Ä–∏—à —Ç–µ–∫—Å—Ç–∞ ‚Üí —â–µ –≥–æ –≤–∫–∞—Ä–∞–º –∏ –≤ DOCX.

**#Ô∏è‚É£ 3. Core Algorithm: GeneratePeriod(Apat)**

–ê–ª–≥–æ—Ä–∏—Ç—ä–º—ä—Ç GeneratePeriod(Apat) –∏–∑—á–∏—Å–ª—è–≤–∞ **–≤—Å–∏—á–∫–∏ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–Ω–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏** –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–µ–Ω –ø–∞—Ü–∏–µ–Ω—Ç –Ω–∞ –±–∞–∑–∞:

- CL132 —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏—Ç–µ
- –≤—ä–∑—Ä–∞—Å—Ç –Ω–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞
- –ø–æ–ª
- –¥–∞—Ç–∞ –Ω–∞ —Ä–∞–∂–¥–∞–Ω–µ
- –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç
- —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞
- –≤–∞–ª–∏–¥–Ω–æ—Å—Ç –Ω–∞ –Ω–∞—á–∞–ª–æ—Ç–æ –Ω–∞ –ù–ó–ò–° ("StartNzisData")

–†–µ–∑—É–ª—Ç–∞—Ç—ä—Ç –µ —Å–ø–∏—Å—ä–∫:

TRealPatientNewItem.lstGraph : TList&lt;TGraphPeriod132&gt;

–∫—ä–¥–µ—Ç–æ –≤—Å–µ–∫–∏ –µ–ª–µ–º–µ–Ω—Ç –æ–ø–∏—Å–≤–∞ 1 –≤–∞–ª–∏–¥–µ–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª –∑–∞ –¥–∞–¥–µ–Ω –ø–ª–∞–Ω.

**3.1. –û–±—â –∏–∑–≥–ª–µ–¥ –Ω–∞ –∞–ª–≥–æ—Ä–∏—Ç—ä–º–∞**

–ê–ª–≥–æ—Ä–∏—Ç—ä–º—ä—Ç –º–æ–∂–µ –¥–∞ —Å–µ —Ä–∞–∑–¥–µ–ª–∏ –Ω–∞ **4 —Ñ–∞–∑–∏**:

**–§–∞–∑–∞ 1 - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–∞ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∏—Ç–µ (–µ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ –∑–∞ —Å–µ—Å–∏—è—Ç–∞)**

- FillPr001InCl132
- FillCl142InPr001
- FillCl134
- FillCl088InCl142
- Sort operations

–¢–æ–≤–∞ —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞ —Å–∞–º–æ –ø—Ä–∏ –ø—ä—Ä–≤–æ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ.

**–§–∞–∑–∞ 2 - –ò—Ç–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–∑ –≤—Å–∏—á–∫–∏ CL132 –∑–∞–ø–∏—Å–∏**

–ó–∞ –≤—Å–µ–∫–∏ –∑–∞–ø–∏—Å –≤ CL132:

- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –ø–æ–ª
- –ò–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –Ω–∞—á–∞–ª–Ω–∞ –≤—ä–∑—Ä–∞—Å—Ç ‚Üí –¥–∞—Ç–∞
- –ò–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –∫—Ä–∞–π–Ω–∞ –≤—ä–∑—Ä–∞—Å—Ç ‚Üí –¥–∞—Ç–∞
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ event_trigger
- –°–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å–ª—É—á–∞–∏ (V16, A1, JM1‚Ä¶)
- –ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –ø–æ–≤—Ç–∞—Ä—è—â–∏ —Å–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ (repeat_years)
- –§–∏–ª—Ç—Ä–∞—Ü–∏—è —Å–ø—Ä—è–º–æ –Ω–∞—á–∞–ª–æ—Ç–æ –Ω–∞ –ù–ó–ò–° –¥–∞–Ω–Ω–∏—Ç–µ
- –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –≤–∞–ª–∏–¥–Ω–∏—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ –≤ lstGraph

**–§–∞–∑–∞ 3 - –°—ä–ø–æ—Å—Ç–∞–≤—è–Ω–µ –Ω–∞ —Ä–µ–∞–ª–Ω–∏ –ø—Ä–µ–≥–ª–µ–¥–∏ –∏ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è**

–ó–∞ –≤—Å–µ–∫–∏ –ø–µ—Ä–∏–æ–¥:

- —Ç—ä—Ä—Å–∏ —Å–µ –ø—Ä–µ–≥–ª–µ–¥ (TRealPregledNewItem) –ø–æ –¥–∞—Ç–∞
- —Ç—ä—Ä—Å–∏ —Å–µ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ (TRealExamAnalysisItem) –ø–æ CL22 / –¥–∞—Ç–∞

–ú–∞—Ä–∫–∏—Ä–∞–Ω–µ:

CL137 = Pending / PartiallyCompleted / Completed

**–§–∞–∑–∞ 4 - –û—Ü–µ–Ω—è–≤–∞–Ω–µ –Ω–∞ —Ç–µ–∫—É—â–∏—è –ø–µ—Ä–∏–æ–¥ + UI —Å—Ç—Ä—É–∫—Ç—É—Ä–∏**

- –æ–ø—Ä–µ–¥–µ–ª—è —Å–µ "–Ω–∞–π-–≤–∞–∂–Ω–∏—è—Ç" –ø–µ—Ä–∏–æ–¥ (CurrentGraphIndex)
- –∏–∑–≥—Ä–∞–∂–¥–∞—Ç —Å–µ —Å–ø–∏—Å—ä—Ü–∏: –ú–∏–Ω–∞–ª–∏ / –¢–µ–∫—É—â–∏ / –ë—ä–¥–µ—â–∏
- –≥–µ–Ω–µ—Ä–∏—Ä–∞ —Å–µ NoteProf (–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞ –ª–µ–∫–∞—Ä—è)

**3.2. –ü—Å–µ–≤–¥–æ–∫–æ–¥ –Ω–∞ GeneratePeriod**

–¢—É–∫ –¥–∞–≤–∞ –Ω–∞–π-–≤–∞–∂–Ω–∞—Ç–∞ —á–∞—Å—Ç –æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞.

procedure GeneratePeriod(patient):

ensure NomenclaturesFilled()

clear patient.lstGraph

for each cl132 in CL132Coll:

if not IsForPatientGender(cl132, patient) then

continue

// 1) –ò–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞—á–∞–ª–Ω–∞ –¥–∞—Ç–∞

startDate := CalcStartDate(cl132.min_age, patient.birthDate)

// 2) –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ event_trigger

case cl132.event_trigger of

'–ø': startDate := StartOfYear(startDate) // –ø—Ä–∏–º–µ—Ä

'—Ä': startDate := BirthdayStart(startDate)

else: // default behaviour

end

// 3) –°–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å–ª—É—á–∞–∏

if cl132.Key = 'V16' then

handleV16SpecialCase()

if cl132.Key = 'A1' then

adjustA1Start()

if cl132.Key = 'JM1' then

adjustJM1Rules()

// 4) –ò–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –∫—Ä–∞–π–Ω–∞ –¥–∞—Ç–∞

endDate := CalcEndDate(cl132.max_age, patient.birthDate)

// 5) –ê–∫–æ –µ –µ–¥–Ω–æ–∫—Ä–∞—Ç–µ–Ω –ø–ª–∞–Ω

if cl132.repeat_years = 0:

if IsValidPeriod(startDate, endDate):

addPeriod(startDate, endDate, repNum = -1)

continue

// 6) –ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –ø–æ–≤—Ç–∞—Ä—è—â–∏ –ø–µ—Ä–∏–æ–¥–∏

repNum := 0

currStart := startDate

while currStart < patient.MAX_AGE_LIMIT:

currEnd := currStart + 1 year (–∏–ª–∏ CalcEndOfRepeat)

if currEnd < StartNzisData:

currStart += cl132.repeat_years

repNum += 1

continue

if currStart > Today + ENGINE_FUTURE_LIMIT:

break

addPeriod(currStart, currEnd, repNum)

currStart += cl132.repeat_years

repNum += 1

// 7) –°—ä–ø–æ—Å—Ç–∞–≤—è–Ω–µ —Å –ø—Ä–µ–≥–ª–µ–¥–∏

MatchPregledi(patient)

// 8) –°—ä–ø–æ—Å—Ç–∞–≤—è–Ω–µ —Å –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è

MatchExamAnalysis(patient)

// 9) –û–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ —Ç–µ–∫—É—â –ø–µ—Ä–∏–æ–¥

DetermineCurrentPeriod(patient)

end

**3.3. –î–µ—Ç–∞–π–ª–Ω–æ –æ–±—è—Å–Ω–µ–Ω–∏–µ –Ω–∞ –∫–ª—é—á–æ–≤–∏—Ç–µ —á–∞—Å—Ç–∏**

**3.3.1. –ú–∏–Ω/–ú–∞–∫—Å –≤—ä–∑—Ä–∞—Å—Ç ‚Üí –¥–∞—Ç–∞**

–í –ù–ó–ò–° –≤—ä–∑—Ä–∞—Å—Ç–∏—Ç–µ —Å–∞ –≤ —Ç–µ–∫—Å—Ç–æ–≤ —Ñ–æ—Ä–º–∞—Ç:

- "0" ‚Üí –æ—Ç –¥–∞—Ç–∞ –Ω–∞ —Ä–∞–∂–¥–∞–Ω–µ
- "1" ‚Üí –ø—Ä–∏ –Ω–∞–≤—ä—Ä—à–≤–∞–Ω–µ –Ω–∞ 1 –≥–æ–¥–∏–Ω–∞
- "1Y6M" ‚Üí 1 –≥–æ–¥–∏–Ω–∞ –∏ 6 –º–µ—Å–µ—Ü–∞
- "18Y" ‚Üí –Ω–∞–≤—ä—Ä—à–µ–Ω–∏ 18 –≥–æ–¥–∏–Ω–∏
- "65Y" ‚Üí –Ω–∞–≤—ä—Ä—à–µ–Ω–∏ 65 –≥–æ–¥–∏–Ω–∏

–§–æ—Ä–º—É–ª–∞:

CalcDate = BirthDate + Years + Months + Days

**3.3.2. Event trigger**

–¢–∏–ø–∏—á–Ω–æ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏:

| **Trigger** | **–ó–Ω–∞—á–µ–Ω–∏–µ** |
| --- | --- |
| '–ø' | –∑–∞–ø–æ—á–≤–∞ –æ—Ç 1 —è–Ω—É–∞—Ä–∏ –Ω–∞ –≥–æ–¥–∏–Ω–∞—Ç–∞ –Ω–∞ –≤—ä–∑—Ä–∞—Å—Ç—Ç–∞ |
| '—Ä' | –∑–∞–ø–æ—á–≤–∞ –æ—Ç –¥–∞—Ç–∞—Ç–∞ –Ω–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –¥–µ–Ω |
| ''  | —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ |

–ü—Ä–∏–º–µ—Ä–∏:

min_age = "18Y"

birth = 10.07.1980

event_trigger = '–ø'

‚Üí startDate = 01.01.1998

**3.3.3. –ü–æ–≤—Ç–∞—Ä—è—â–∏ —Å–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ (repeat_years)**

–ü—Ä–∏–º–µ—Ä–∏:

repeat_years = 1 ‚Üí –µ–∂–µ–≥–æ–¥–Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞

repeat_years = 2 ‚Üí –ø—Ä–µ–∑ –≥–æ–¥–∏–Ω–∞

repeat_years = 5 ‚Üí –ø—Ä–µ–∑ 5 –≥–æ–¥–∏–Ω–∏

–ü—Ä–∏ —Ü–∏–∫—ä–ª:

currStart = startDate + repNum \* repeat_years

currEnd = currStart + (–º–∞–∫—Å–∏–º–∞–ª–µ–Ω –¥–æ–ø—É—Å—Ç–∏–º –∏–Ω—Ç–µ—Ä–≤–∞–ª)

**3.3.4. –°–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å–ª—É—á–∞–∏**

**‚úî V16 - –°–ø–µ—Ü–∏–∞–ª–µ–Ω –ø–ª–∞–Ω –∑–∞ –≥–æ–¥–∏—à–Ω–∏ –≤—ä–∑—Ä–∞—Å—Ç–∏**

–ò–º–∞ —É–Ω–∏–∫–∞–ª–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞ –Ω–∞–≤—ä—Ä—à–≤–∞–Ω–µ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏ –≤—ä–∑—Ä–∞—Å—Ç–∏ (1,2,3,4,5,6,7 –≥–æ–¥–∏–Ω–∏‚Ä¶).  
–ù–ó–ò–° –∏–∑–ø–æ–ª–∑–≤–∞ —Ä–∞–∑–ª–∏—á–Ω–∞ —Å—Ö–µ–º–∞ –∑–∞ –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ.

**‚úî A1 - –ú–∞–π—á–∏–Ω–æ –∑–¥—Ä–∞–≤–µ**

–ö–æ—Ä–µ–∫—Ü–∏—è —Å–ø–æ—Ä–µ–¥ –≥–µ—Å—Ç–∞—Ü–∏–æ–Ω–Ω–∞ –≤—ä–∑—Ä–∞—Å—Ç –∏–ª–∏ –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏ —É—Å–ª–æ–≤–∏—è –∑–∞ –±—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç.  
–ò–∑–∏—Å–∫–≤–∞ —Å–ø–µ—Ü–∏–∞–ª–Ω–æ –∏–∑—á–∏—Å–ª–µ–Ω–∏–µ –Ω–∞ –Ω–∞—á–∞–ª–Ω–∞—Ç–∞ –¥–∞—Ç–∞.

**‚úî JM1 - –î–µ—Ç—Å–∫–æ –∑–¥—Ä–∞–≤–µ (–º–∞–ª–∫–∏ –≤—ä–∑—Ä–∞—Å—Ç–æ–≤–∏ –≥—Ä—É–ø–∏)**

–¢—É–∫ CL132 –¥–∞–≤–∞ –≤—ä–∑—Ä–∞—Å—Ç–∏ –≤ –º–µ—Å–µ—Ü–∏ –∏ –ø–æ–¥–º–µ—Å–µ—Ü–∏ ‚Üí –¥–≤–∏–≥–∞—Ç–µ–ª—è—Ç –ø–æ–ª–∑–≤–∞ –ø—Ä–µ—Ü–∏–∑–µ–Ω –∞–ª–≥–æ—Ä–∏—Ç—ä–º.

**‚úî StartNzisData**

–ù–ó–ò–° –Ω–µ –ø—Ä–∏–∑–Ω–∞–≤–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ –ø—Ä–µ–¥–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≥–æ–¥–∏–Ω–∞ (–ø—Ä–∏–º–µ—Ä: 2018).

–ê–ª–≥–æ—Ä–∏—Ç—ä–º—ä—Ç –ø—Ä–æ–ø—É—Å–∫–∞:

if endDate < StartNzisData:

skip

**3.4. –î–∏–∞–≥—Ä–∞–º–∞ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–∏—è –ø–æ—Ç–æ–∫**

+----------------------------+

| Start GeneratePeriod |

+----------------------------+

|

v

+----------------------------+

| For each CL132 |

+----------------------------+

|

v

+----------------------------+

| Calc start/end dates |

+----------------------------+

|

v

+----------------------------+

| Apply triggers & special |

+----------------------------+

|

v

+----------------------------+

| Generate repeating cycles |

+----------------------------+

|

v

+----------------------------+

| Add valid periods |

+----------------------------+

|

v

+----------------------------+

| Match Pregledi / Analysis |

+----------------------------+

|

v

+----------------------------+

| Compute current interval |

+----------------------------+

|

v

+----------------------------+

| End |

+----------------------------+

**3.5. –†–µ–∑—É–ª—Ç–∞—Ç–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: TGraphPeriod132**

–í—Å–µ–∫–∏ –ø–µ—Ä–∏–æ–¥ —Å—ä–¥—ä—Ä–∂–∞:

- Cl132 : TRealCl132Item
- startDate : TDate
- endDate : TDate
- repNumber : Integer

–ü—Ä–∏–º–µ—Ä:

(C11) –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ–Ω –ø—Ä–µ–≥–ª–µ–¥ –Ω–∞ –¥–µ—Ü–∞ 1-2 –≥–æ–¥–∏–Ω–∏

repNumber=0 : 10.07.2021 - 10.07.2022

repNumber=1 : 10.07.2022 - 10.07.2023

**3.6. –†–µ–∑—É–ª—Ç–∞—Ç –∑–∞ –ª–µ–∫–∞—Ä—Å–∫–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**

–°–ª–µ–¥ –ø—Ä–∏–∫–ª—é—á–≤–∞–Ω–µ:

- lstGraph –µ –ø—ä–ª–µ–Ω
- ListCurrentProf —Å—ä–¥—ä—Ä–∂–∞ —Ç–µ–∫—É—â–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏
- NoteProf —Å–µ –ø–æ–ø—ä–ª–≤–∞ —Å—ä—Å —Å—ä–≤–µ—Ç–∏ –∫—ä–º –ª–µ–∫–∞—Ä—è
- CurrentGraphIndex –ø–æ—Å–æ—á–≤–∞ –Ω–∞–π-–≤–∞–∂–Ω–∏—è –ø–µ—Ä–∏–æ–¥

**‚ùó –ì–æ—Ç–æ–≤–æ –µ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ –Ω–∞ –°–µ–∫—Ü–∏—è 3.**

–ê–∫–æ –∫–∞–∂–µ—à "**–û–¥–æ–±—Ä—è–≤–∞–º –°–µ–∫—Ü–∏—è 3**", —è –ø—Ä–µ—Ö–≤—ä—Ä–ª—è–º –≤ DOCX —Ñ–∞–π–ª–∞ –∏ –ø—Ä–µ–º–∏–Ω–∞–≤–∞–º–µ –∫—ä–º:

**–°–µ–∫—Ü–∏—è 4: Formal Age/Interval Logic (min_age/max_age, repeat_years, event triggers)**

**–í–∏–µ –∫–∞–∑–∞—Ö—Ç–µ:**

–¥–æ–±—Ä—è–≤–∞–º –°–µ–∫—Ü–∏—è 3

**ChatGPT –∫–∞–∑–∞:**

–ß—É–¥–µ—Å–Ω–æ - **–°–µ–∫—Ü–∏—è 3 –µ –º–∞—Ä–∫–∏—Ä–∞–Ω–∞ –∫–∞—Ç–æ –æ–¥–æ–±—Ä–µ–Ω–∞** –∏ —è –¥–æ–±–∞–≤—è–º –∫—ä–º –¥–æ–∫—É–º–µ–Ω—Ç–∞!

–ú–æ–∂–µ—à –¥–∞ —Å–≤–∞–ª–∏—à –æ–±–Ω–æ–≤–µ–Ω–∏—è —Ñ–∞–π–ª —Ç—É–∫:

üëâ **Aspect_LTC_Engine_Unified_Spec_v1.1.docx - Download**

–í–µ—á–µ —Å—ä–¥—ä—Ä–∂–∞:

- –°–µ–∫—Ü–∏—è 0 - Overview
- –°–µ–∫—Ü–∏—è 1 - System Architecture
- –°–µ–∫—Ü–∏—è 2 - Data Model
- **–°–µ–∫—Ü–∏—è 3 - GeneratePeriod Core Algorithm**

**–ì–æ—Ç–æ–≤ –ª–∏ —Å–∏ –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∏–º —Å—ä—Å:**

**–°–µ–∫—Ü–∏—è 4 - Formal Age/Interval Logic**

üîπ –§–æ—Ä–º–∞–ª–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ min_age, max_age, interval, repeat_years,  
üîπ –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–∞–Ω–∞ –≥—Ä–∞–º–∞—Ç–∏–∫–∞ –∑–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ –≤ –¥–Ω–∏/–º–µ—Å–µ—Ü–∏/–≥–æ–¥–∏–Ω–∏  
üîπ –ö–∞–∫ engine-—ä—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–∞ —Å–ª–æ–∂–Ω–∏ –≤—ä–∑—Ä–∞—Å—Ç–∏ (–º–µ—Å–µ—Ü–∏, –≥–æ–¥–∏–Ω–∏, –¥–∏–∞–ø–∞–∑–æ–Ω–∏)  
üîπ –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–æ–¥–µ–ª + –ø—Ä–∏–º–µ—Ä–∏  
üîπ –ù–ó–ò–° –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –∏ —Ä–µ–∞–ª–Ω–∏ –ø–æ–ø—Ä–∞–≤–∫–∏

–î–∞ –ø—Ä–æ–¥—ä–ª–∂–∞ –ª–∏?

**–í–∏–µ –∫–∞–∑–∞—Ö—Ç–µ:**

–§–∞–π–ª—ä—Ç –Ω–µ –µ –Ω–∞–º–µ—Ä–µ–Ω, –º–∏ –¥–∞–≤–∞ –∑–∞ Aspect_LTC_Engine_Unified_Spec_v1.1.docx - Download

**ChatGPT –∫–∞–∑–∞:**

–ì–æ—Ç–æ–≤–æ - **—Ñ–∞–π–ª—ä—Ç –µ —É—Å–ø–µ—à–Ω–æ –≤—ä–∑—Å—Ç–∞–Ω–æ–≤–µ–Ω**.

–ú–æ–∂–µ—à –¥–∞ –≥–æ —Å–≤–∞–ª–∏—à –æ—Ç—Ç—É–∫:

üëâ **Aspect_LTC_Engine_Unified_Spec_v1.1.docx - Download**

‚ö†Ô∏è –í –º–æ–º–µ–Ω—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç—ä—Ç —Å—ä–¥—ä—Ä–∂–∞ —Å–∞–º–æ placeholder —Ç–µ–∫—Å—Ç, –∑–∞—â–æ—Ç–æ –ø—Ä–µ–¥–∏—à–Ω–∞—Ç–∞ –≤–µ—Ä—Å–∏—è –Ω–µ –±–µ—à–µ –∑–∞–ø–∏—Å–∞–Ω–∞ –∫–æ—Ä–µ–∫—Ç–Ω–æ.  
–ö–∞–∂–∏ –º–∏:

**‚Äû–í–º—ä–∫–Ω–∏ –°–µ–∫—Ü–∏–∏ 0-3 –≤ DOCX"**

–∏ —â–µ –≥–µ–Ω–µ—Ä–∏—Ä–∞–º –ø—ä–ª–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç —Å –≤—Å–∏—á–∫–∏ –æ–¥–æ–±—Ä–µ–Ω–∏ —Å–µ–∫—Ü–∏–∏.

**–í–∏–µ –∫–∞–∑–∞—Ö—Ç–µ:**

–¥–∞–≤–∞–π –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∏–º —Å 4

**ChatGPT –∫–∞–∑–∞:**

–ß—É–¥–µ—Å–Ω–æ - –ø—Ä–µ–º–∏–Ω–∞–≤–∞–º–µ –∫—ä–º **–°–µ–∫—Ü–∏—è 4**, –µ–¥–Ω–∞ –æ—Ç –Ω–∞–π-–≤–∞–∂–Ω–∏—Ç–µ –≤ —Ü–µ–ª–∏—è LTC Engine, –∑–∞—â–æ—Ç–æ –¥–µ—Ñ–∏–Ω–∏—Ä–∞ _—Ñ–æ—Ä–º–∞–ª–Ω–∞—Ç–∞ –ª–æ–≥–∏–∫–∞ –∑–∞ –≤—ä–∑—Ä–∞—Å—Ç–∏—Ç–µ, –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏—Ç–µ –∏ –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç–∏—Ç–µ_. –¢—É–∫ —Å–µ –æ–ø–∏—Å–≤–∞ **–∫–∞–∫ —Ç–æ—á–Ω–æ —Å–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–∞—Ç —Ç–µ–∫—Å—Ç–æ–≤–∏—Ç–µ –≤—ä–∑—Ä–∞—Å—Ç–æ–≤–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏**, –∏–∑–ø–æ–ª–∑–≤–∞–Ω–∏ –æ—Ç –ù–ó–ò–° –≤ CL132, –∏ –∫–∞–∫ —Ç–≤–æ—è—Ç GeneratePeriod –¥–≤–∏–≥–∞—Ç–µ–ª –≥–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–≤–∞ –≤ —Ä–µ–∞–ª–Ω–∏ –¥–∞—Ç–∏.

–°–ª–µ–¥ –∫–∞—Ç–æ –æ–¥–æ–±—Ä–∏—à - —â–µ —è –¥–æ–±–∞–≤—è –≤ DOCX.

**#Ô∏è‚É£ –°–µ–∫—Ü–∏—è 4 - Formal Age & Interval Logic (CL132 Age Model)**

**_‚Äû–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ–Ω –º–æ–¥–µ–ª –∑–∞ min_age, max_age, repeat_years –∏ event_trigger"_**

**4.1. –§–æ—Ä–º–∞—Ç –Ω–∞ –≤—ä–∑—Ä–∞—Å—Ç–∏—Ç–µ –≤ CL132**

–ù–ó–ò–° –∏–∑–ø–æ–ª–∑–≤–∞ **—Ç–µ–∫—Å—Ç–æ–≤–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤—è–Ω–∏—è** –∑–∞ –≤—ä–∑—Ä–∞—Å—Ç–æ–≤–∏ –∏–∑—á–∏—Å–ª–µ–Ω–∏—è. –í—ä–∑—Ä–∞—Å—Ç–∏—Ç–µ —Å–∞ _–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º–∏_, –Ω–µ —Å—Ç—Ä–æ–≥–æ —Ç–∏–ø–∏–∑–∏—Ä–∞–Ω–∏.

**–ü–æ–¥–¥—ä—Ä–∂–∞–Ω–∏ —Ñ–æ—Ä–º–∏:**

| **–ü—Ä–∏–º–µ—Ä** | **–ó–Ω–∞—á–µ–Ω–∏–µ** |
| --- | --- |
| "0" | –æ—Ç —Ä–∞–∂–¥–∞–Ω–µ—Ç–æ |
| "1" | 1 –≥–æ–¥–∏–Ω–∞ (–Ω–µ 1 –º–µ—Å–µ—Ü) |
| "1Y" | 1 –≥–æ–¥–∏–Ω–∞ |
| "6M" | 6 –º–µ—Å–µ—Ü–∞ |
| "1Y6M" | 1 –≥–æ–¥–∏–Ω–∞ –∏ 6 –º–µ—Å–µ—Ü–∞ |
| "18Y" | –Ω–∞–≤—ä—Ä—à–µ–Ω–∏ 18 –≥–æ–¥–∏–Ω–∏ |
| "65Y" | –Ω–∞–≤—ä—Ä—à–µ–Ω–∏ 65 –≥–æ–¥–∏–Ω–∏ |
| "0-1Y" | –≤—ä–∑—Ä–∞—Å—Ç–æ–≤ –¥–∏–∞–ø–∞–∑–æ–Ω |
| "10-12M" | –¥–∏–∞–ø–∞–∑–æ–Ω –∑–∞ –∫—ä—Ä–º–∞—á–µ—Ç–∞ |
| "+" | –±–µ–∑–∫—Ä–∞–π–Ω–æ –ø–æ–≤—Ç–∞—Ä—è–Ω–µ (–≤–∏–∂ V16/Vaccines) |

**4.2. –§–æ—Ä–º–∞–ª–Ω–∞ –≥—Ä–∞–º–∞—Ç–∏–∫–∞ (BNF)**

–¢–æ–≤–∞ –µ –Ω—É–∂–Ω–∞—Ç–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è, –∞–∫–æ —É—Ç—Ä–µ —Å–µ –ø—Ä–∞–≤–∏ –ø–∞—Ä—Å–µ—Ä.

AgeSpec ::= Age | Range | Infinite

Age ::= Number ( "Y" | "M" | "D" )?

Range ::= Age "-" Age

Infinite ::= "+"

Number ::= Digit {Digit}

Digit ::= 0..9

–ü—Ä–∏–º–µ—Ä–∏:

"18Y"

"6M"

"10-12M"

"1Y6M"

"+"

**4.3. –ù–æ—Ä–º–∞–ª–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ Age ‚Üí (years, months, days)**

–§—É–Ω–∫—Ü–∏—è:

ParseAge(str) ‚Üí (Years, Months, Days)

–ü—Ä–∏–º–µ—Ä–∏:

| **Input** | **Output** |
| --- | --- |
| "6M" | (0, 6, 0) |
| "1Y6M" | (1, 6, 0) |
| "1" | (1, 0, 0) |
| "18Y" | (18, 0, 0) |
| "10-12M" | Range: from (0,10,0) to (0,12,0) |

**4.4. –ò–∑—á–∏—Å–ª–µ–Ω–∏–µ –Ω–∞ –¥–∞—Ç–∞ —Å–ø—Ä—è–º–æ BirthDate**

–û—Å–Ω–æ–≤–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞:

Date = BirthDate

\+ Years(years)

\+ Months(months)

\+ Days(days)

–í —Ç–≤–æ—è engine:

DatStrToDays(birthDate, ageSpec)

–ü—Ä–∏–µ–º–∞ **–≤–∏–Ω–∞–≥–∏** (baseDate, textualValue)  
‚Üí –≤—Ä—ä—â–∞ —Ä–µ–∞–ª–Ω–∞ –¥–∞—Ç–∞.

**4.5. MaxAge –ª–æ–≥–∏–∫–∞**

–í CL132 max_age –º–æ–∂–µ –¥–∞ –±—ä–¥–µ:

- –ø—Ä–∞–∑–Ω–æ ‚Üí –±–µ–∑ –≥–æ—Ä–Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞
- –≤—ä–∑—Ä–∞—Å—Ç ‚Üí –Ω–æ—Ä–º–∞–ª–Ω–∞ –≥–æ—Ä–Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞
- –∏–∑–∫–ª—é—á–µ–Ω–∏–µ (V16) ‚Üí —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ –¥–æ 24 –≥–æ–¥–∏–Ω–∏
- –∏–Ω—Ç–µ—Ä–≤–∞–ª (10-12 –º–µ—Å–µ—Ü–∞) ‚Üí –∏–∑–ø–æ–ª–∑–≤–∞ —Å–µ –≤ —Ä–∞–Ω–Ω–∞ –¥–µ—Ç—Å–∫–∞ –≤—ä–∑—Ä–∞—Å—Ç

Engine –ª–æ–≥–∏–∫–∞:

if max_age = '' AND repeat_years > 0:

// example: annual screenings

upperBound = BirthDate + 120 years

else:

upperBound = Calc(max_age)

**4.6. repeat_years –ª–æ–≥–∏–∫–∞**

**–§–æ—Ä–º–∞–ª–Ω–æ:**

if repeat_years = k:

start_n = start_0 + k \* n

end_n = end_0 + k \* n

–∫—ä–¥–µ—Ç–æ:

- start_0 –µ –Ω–∞—á–∞–ª–Ω–∞—Ç–∞ –¥–∞—Ç–∞ –∑–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
- end_0 –µ –∫—Ä–∞–π–Ω–∞—Ç–∞ –¥–∞—Ç–∞ (—Å–ª–µ–¥ –∫–æ—Ä–µ–∫—Ü–∏–∏)
- n = 0,1,2,3,...

–î–æ–∫–∞—Ç–æ:

end_n ‚â§ max_allowed

**4.7. –õ–æ–≥–∏–∫–∞ –Ω–∞ event_trigger**

CL132 –∏–º–∞ –∫–ª—é—á–æ–≤–æ –ø–æ–ª–µ:

event_trigger = '—Ä' (birthday-based)

event_trigger = '–ø' (start-of-year-based)

**4.7.1. Trigger '—Ä' (—Ä–æ–∂–¥–µ–Ω–∞ –¥–∞—Ç–∞)**

startDate := birthDate + AgeOffset

**4.7.2. Trigger '–ø' (–ø—ä—Ä–≤–æ —è–Ω—É–∞—Ä–∏)**

temp := birthDate + AgeOffset

startDate := 01.01.(Year(temp))

–ü—Ä–∏–º–µ—Ä:

Age = 18Y

Birth = 10.07.2000

‚Üí temp = 10.07.2018

‚Üí startDate = 01.01.2018

**4.8. –ö–æ—Ä–µ–∫—Ü–∏–∏ –∑–∞ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ –ø–ª–∞–Ω–æ–≤–µ**

**4.8.1. V16 (I–º—É–Ω–∏–∑–∞—Ü–∏–∏ –Ω–∞ —Ç–∏–π–Ω–µ–π–¥–∂—ä—Ä–∏ 17-25 –≥–æ–¥.)**

–ù–ó–ò–° –ª–æ–≥–∏–∫–∞—Ç–∞:

- min_age = 17Y
- max_age = 25Y
- _–Ω–æ_ –¥–æ–ø—É—Å–∫–∞ –∏–∑–≤—ä—Ä—à–≤–∞–Ω–µ –≤ **–≤—Å–µ–∫–∏ –º–æ–º–µ–Ω—Ç** –º–µ–∂–¥—É 17 –∏ 25
- repeat_years —Ä–∞–±–æ—Ç–∏ —Ä–∞–∑–ª–∏—á–Ω–æ: –∏–Ω—Ç–µ—Ä–≤–∞–ª—ä—Ç –µ –æ—Ç—Ä–∞–∑–µ–Ω **–ø–æ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–∏ –≥–æ–¥–∏–Ω–∏**

–¢–≤–æ—è—Ç engine –≥–æ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞ —Ç–∞–∫–∞:

if Key = 'V16':

endDate = DatStrToDays(BirthDate, '24 years')

if event_trigger='–ø':

endDate = EndOfYear(endDate - 1)

**4.8.2. A1 (–ú–∞–π—á–∏–Ω–æ –∑–¥—Ä–∞–≤–µ - —Å–ø–µ—Ü–∏—Ñ–∏—á–µ–Ω offset)**

–ó–∞ A1 –ø—ä—Ä–≤–∏—è—Ç –ø–µ—Ä–∏–æ–¥ —Å–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–∞ –Ω–µ –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—è min_age, –∞:

startDate += (BirthDate - StartOfYear(BirthDate))

–¢–æ–≤–∞ –∫–æ–º–ø–µ–Ω—Å–∏—Ä–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä–∞ –Ω–∞ –±—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—Ç–∞, –Ω–æ –≤ –ù–ó–ò–° –µ –Ω–∞–ø—Ä–∞–≤–µ–Ω–æ —Ç–≤—ä—Ä–¥–æ.

**4.8.3. JM1 (–î–µ—Ç—Å–∫–∏ —Ä–∞–Ω–Ω–∏ –º–µ—Å–µ—Ü–∏)**

–¢—É–∫ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç –º–∞–ª–∫–∏ –≤—ä–∑—Ä–∞—Å—Ç–æ–≤–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏:

- 10-12 –º–µ—Å–µ—Ü–∞
- 12-15 –º–µ—Å–µ—Ü–∞
- 13-18 –º–µ—Å–µ—Ü–∞
- 19-24 –º–µ—Å–µ—Ü–∞

Engine –ª–æ–≥–∏–∫–∞:

- parse range ‚Üí (min_age, max_age)
- convert to dates
- apply event_trigger

**4.9. StartNzisDate**

–ù–ó–ò–° –∏–∑–ø–æ–ª–∑–≤–∞ –¥–∞—Ç–∞ –Ω–∞ —Å—Ç–∞—Ä—Ç –Ω–∞ –≤–∞–ª–∏–¥–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏.

–¢–≤–æ—è—Ç engine –∏–º–∞:

StartNzisData := EncodeDate(1821,01,01)

–∏–ª–∏ –ø–æ-–∫—ä—Å–Ω–æ:

if startDate < NZISStart:

skip

–¢–∞–∫–∞ —Å–µ –∏–∑–±—è–≥–≤–∞—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏, –∫–æ–∏—Ç–æ –ù–ó–ò–° –Ω–µ –ø—Ä–∏–∑–Ω–∞–≤–∞.

–ü—Ä–æ–±–ª–µ–º—ä—Ç, –∫–æ–π—Ç–æ —Å–∏ –æ–ø–∏—Å–∞–ª:

–¢–µ—Å—Ç–æ–≤–µ—Ç–µ –Ω–µ —Ä–∞–±–æ—Ç–µ—Ö–∞, –∑–∞—â–æ—Ç–æ –ù–ó–ò–° –±–µ—à–µ –∑–∞–ø–æ—á–Ω–∞–ª–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏ –ø–ª–∞–Ω–æ–≤–µ –µ–¥–Ω–∞ –≥–æ–¥–∏–Ω–∞ –ø–æ-–∫—ä—Å–Ω–æ.

‚Üí —Ä–µ—à–µ–Ω–∏–µ—Ç–æ –µ –ø—Ä–∞–≤–∏–ª–Ω–æ: engine –ø—Ä–æ–ø—É—Å–∫–∞ –ø–µ—Ä–∏–æ–¥–∏—Ç–µ, –∫–æ–∏—Ç–æ —Å–∞ ‚Äû–ø—Ä–µ–¥–∏ –Ω–∞—á–∞–ª–æ—Ç–æ".

**4.10. –ë–µ–∑–∫—Ä–∞–π–Ω–∏ –ø–µ—Ä–∏–æ–¥–∏ (–∑–∞ –≤—ä–∑—Ä–∞—Å—Ç–Ω–∏)**

–ú–Ω–æ–≥–æ CL132 –∑–∞–ø–∏—Å–∏ –∑–∞ –≤—ä–∑—Ä–∞—Å—Ç–Ω–∏ –∏–º–∞—Ç:

repeat_years = N

max_age = '' (–ø—Ä–∞–∑–Ω–æ)

Engine –ª–æ–≥–∏–∫–∞:

maxLive := DatStrToDays(BirthDate, '120 years')

–∏ —Ü–∏–∫—ä–ª—ä—Ç –≤—ä—Ä–≤–∏ –¥–æ 120 –≥–æ–¥–∏–Ω–∏ (safe-upper-bound).

**4.11. –û—Ñ–∏—Ü–∏–∞–ª–Ω–∞ —Ñ–æ—Ä–º–∞–ª–Ω–∞ –¥–µ—Ñ–∏–Ω–∏—Ü–∏—è –Ω–∞ –ø–µ—Ä–∏–æ–¥**

–ü–µ—Ä–∏–æ–¥ P –µ:

P = (startDate, endDate, repNumber, Cl132Ref)

–∫—ä–¥–µ—Ç–æ:

- startDate < endDate
- endDate < maxAge(patient)
- startDate ‚â• NZISStart
- repNumber >= -1
  - \-1 = –µ–¥–Ω–æ–∫—Ä–∞—Ç–µ–Ω
  - 0,1,2... = –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ n

**4.12. –ü—Ä–∏–º–µ—Ä: –ø—ä–ª–Ω–æ –∏–∑—á–∏—Å–ª–µ–Ω–∏–µ**

–ü–∞—Ü–∏–µ–Ω—Ç:

Birth = 10.07.2018

CL132:

min_age = "1Y"

max_age = "5Y"

repeat_years = 1

event_trigger = '–ø'

–ò–∑—á–∏—Å–ª—è–≤–∞–º–µ:

temp = 10.07.2019

start_0 = 01.01.2019

end_0 = 31.12.2019

–°–ª–µ–¥–≤–∞—â–∏:

rep=1: start_1 = 01.01.2020 - 31.12.2020

rep=2: start_2 = 01.01.2021 - 31.12.2021

rep=3: start_3 = 01.01.2022 - 31.12.2022

rep=4: start_4 = 01.01.2023 - 31.12.2023

–ú–∞–∫—Å –≤—ä–∑—Ä–∞—Å—Ç = 5 –≥–æ–¥–∏–Ω–∏ ‚Üí 10.07.2023  
‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏—è—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤–∫–ª—é—á–≤–∞ –≤–∞–ª–∏–¥–Ω–∏ –¥–Ω–∏ –∏ –µ –∫–æ—Ä–µ–∫—Ç–µ–Ω.

**4.13. –°–µ–∫—Ü–∏—è—Ç–∞ –µ –≥–æ—Ç–æ–≤–∞.**

–ê–∫–æ –∫–∞–∂–µ—à:

**–û–¥–æ–±—Ä—è–≤–∞–º –°–µ–∫—Ü–∏—è 4**

—â–µ —è –¥–æ–±–∞–≤—è –≤ DOCX, —Å–ª–µ–¥ –∫–æ–µ—Ç–æ –∑–∞–ø–æ—á–≤–∞–º:

**–°–µ–∫—Ü–∏—è 5 - Integration With PR001 / Activities / CL142 / CL088**

**(–∏–ª–∏ –∞–∫–æ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—à –¥—Ä—É–≥–∞ —Å–ª–µ–¥–≤–∞—â–∞ —Å–µ–∫—Ü–∏—è)**

**–í–∏–µ –∫–∞–∑–∞—Ö—Ç–µ:**

–¥–∞–≤–∞–π 5

**ChatGPT –∫–∞–∑–∞:**

–ü—Ä–µ–∫—Ä–∞—Å–Ω–æ - **–°–µ–∫—Ü–∏—è 5** –µ –∫–ª—é—á–æ–≤–∞, –∑–∞—â–æ—Ç–æ –æ–ø–∏—Å–≤–∞ _–∫–∞–∫ –ø–µ—Ä–∏–æ–¥–∏—Ç–µ (CL132)_ —Å–µ –ø—Ä–µ–≤—Ä—ä—â–∞—Ç –≤ _–∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏ –¥–µ–π–Ω–æ—Å—Ç–∏_ (PR001), _–∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏ –∫–æ–¥–æ–≤–µ_ (CL142) –∏ _–¥–µ—Ç–∞–π–ª–Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏_ (CL088, CL134).  
–¢–æ–≤–∞ –µ —Å–ª–æ–π, –≤ –∫–æ–π—Ç–æ —Ü–∏–∫—ä–ª—ä—Ç ‚Äû–ø–ª–∞–Ω ‚Üí —Ä–µ–∞–ª–Ω–æ –∏–∑–ø—ä–ª–Ω–∏–º–∞ –¥–µ–π–Ω–æ—Å—Ç" —Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∏—Ä–∞.

–°–ª–µ–¥ –∫–∞—Ç–æ –æ–¥–æ–±—Ä–∏—à - —â–µ –ø—Ä–µ—Ö–≤—ä—Ä–ª—è –∏ —Ç–∞–∑–∏ —Å–µ–∫—Ü–∏—è –≤ DOCX.

**#Ô∏è‚É£ –°–µ–∫—Ü–∏—è 5 - Integration of CL132 Periods with PR001, CL142, CL134, CL088**

**_‚Äû–ö–∞–∫ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–Ω–∏—è—Ç –ø–µ—Ä–∏–æ–¥ —Å—Ç–∞–≤–∞ –∏–∑–ø—ä–ª–Ω–∏–º–∞ –¥–µ–π–Ω–æ—Å—Ç"_**

**5.1. –ó–∞—â–æ –∏–º–∞ –æ—Ç–¥–µ–ª—è–Ω–µ –º–µ–∂–¥—É CL132 –∏ PR001**

**CL132 = –ü–õ–ê–ù**  
–î–µ—Ñ–∏–Ω–∏—Ä–∞ _–∫–æ–≥–∞_ –∏ _–∫–∞–∫–≤–∏ –≤–∏–¥–æ–≤–µ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏_ —Ç—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–∞—Ç –∏–∑–≤—ä—Ä—à–µ–Ω–∏.

**PR001 = –î–ï–ô–ù–û–°–¢**  
–î–µ—Ñ–∏–Ω–∏—Ä–∞ _–∫–æ–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ –¥–µ–π–Ω–æ—Å—Ç–∏_ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ —Å–ª—É—á–∞—Ç –≤—ä—Ç—Ä–µ –≤ –ø–µ—Ä–∏–æ–¥–∞.

**CL142 = –æ—Å–Ω–æ–≤–Ω–∞ –¥–µ–π–Ω–æ—Å—Ç (ACH–ò –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ / NHIF –∫–æ–¥)**  
**CL088 = –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, –ø–æ–¥-–µ–ª–µ–º–µ–Ω—Ç–∏, –∏–∑–º–µ—Ä–≤–∞–Ω–∏—è, –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏**  
**CL134 = –≤—ä–ø—Ä–æ—Å–Ω–∏—Ü–∏/–∏–Ω–¥–µ–∫—Å –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (–∫—ä–¥–µ—Ç–æ –µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)**

–°–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–æ –ø–µ—Ä–∏–æ–¥—ä—Ç –µ —Å–∞–º–æ —Ä–∞–º–∫–∞, –∞ PR001, CL142 –∏ CL088 —Å–∞ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ.

**5.2. –î–∞–Ω–Ω–∏, –∫–æ–∏—Ç–æ —Å–µ —Å–≤—ä—Ä–∑–≤–∞—Ç**

**5.2.1. CL132 ‚Üí PR001**

–í —Ç–≤–æ—è engine —Ç–æ–≤–∞ —Å–µ –∏–∑–≤—ä—Ä—à–≤–∞ —á—Ä–µ–∑:

FillPr001InCl132

–ê–ª–≥–æ—Ä–∏—Ç—ä–º—ä—Ç –ø—Ä–∞–≤–∏:

- —Ñ–∏–ª—Ç—ä—Ä –ø–æ PR001_CL132
- –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ Rules
- –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (–¥–µ—Ç–∞–π–ª–Ω–æ: RuleCl132_PR001)
- –∑–∞ –≤—Å–µ–∫–∏ CL132 —Å–µ —Ñ–æ—Ä–º–∏—Ä–∞:

FListPr001 : TList&lt;TRealPR001Item&gt;

–¢–æ–µ—Å—Ç:  
**–ï–¥–∏–Ω –ø–ª–∞–Ω (CL132) –≤–∫–ª—é—á–≤–∞ 0..N –¥–µ–π–Ω–æ—Å—Ç–∏ (PR001).**

**5.3. RuleCl132_PR001 - –¥–≤—É—Å—Ç—Ä–∞–Ω–Ω–∞ –ª–æ–≥–∏–∫–∞**

–ù—è–∫–æ–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å–∞ –∑–∞–±—Ä–∞–Ω–µ–Ω–∏ –æ—Ç –ù–ó–ò–°.

–ü—Ä–∏–º–µ—Ä:

if CL132.Key = 'C22' and PR001.Nomenclature = 'CL133' ‚Üí skip

if CL132.Key = 'C32' and PR001.Nomenclature = 'CL133' ‚Üí skip

...

–¢–æ–≤–∞ —Å–∞ —Ä–µ–¥–∫–∏, –Ω–æ –≤–∞–∂–Ω–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è.

**5.4. –°–æ—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ PR001 –≤—ä—Ç—Ä–µ –≤ –ø–ª–∞–Ω–∞**

–°–ª–µ–¥ –∫–∞—Ç–æ CL132 —Å–µ —Å–≤—ä—Ä–∂–µ —Å PR001:

PR001Coll.SortListByActId(Cl132.FListPr001)

–¢–æ–≤–∞ –ø–æ—Å—Ç–∞–≤—è –¥–µ–π–Ω–æ—Å—Ç–∏—Ç–µ –≤ –ø—Ä–∞–≤–∏–ª–µ–Ω —Ä–µ–¥ —Å–ø–æ—Ä–µ–¥ Activity_ID.

**5.5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CL142 (–í–∏—Å–æ–∫–æ –Ω–∏–≤–æ - –≥—Ä—É–ø–∏—Ä–∞–Ω–∏ –¥–µ–π–Ω–æ—Å—Ç–∏ ACHI/NHIF)**

–ú–Ω–æ–≥–æ PR001 –∏–º–∞—Ç:

PR001.CL142 : TRealCl142Item

CL142 —Å—ä–¥—ä—Ä–∂–∞:

- achi_block
- achi_chapter
- achi_code
- nhif_code (–∫—Ä–∏—Ç–∏—á–Ω–æ –∑–∞ –ù–ó–û–ö)
- specialty_cl006
- "highly" —Ñ–ª–∞–≥
- —Å–ø–∏—Å—ä–∫ –æ—Ç CL088 –∏ CL144

Engine mapping:

FillCl142InPr001

–¢–æ–µ—Å—Ç PR001 –∑–Ω–∞–µ ‚Äû–æ—Å–Ω–æ–≤–Ω–∞—Ç–∞ –∫–ª–∏–Ω–∏—á–Ω–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞" –∫—ä–º –∫–æ—è—Ç–æ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏.

**5.6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CL088 (—Ñ–∏–∑–∏–∫–∞–ª–Ω–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ / –ø–æ–¥-–µ–ª–µ–º–µ–Ω—Ç–∏)**

CL142 —Å—ä–¥—ä—Ä–∂–∞:

FListCL088 : List&lt;TRealCL088Item&gt;

CL088 = –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏ –∏–∑–º–µ—Ä–≤–∞–Ω–∏—è, –∫–æ–∏—Ç–æ –ª–µ–∫–∞—Ä—è—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ –ø–æ–ø—ä–ª–Ω–∏.

–ù–∞–ø—Ä–∏–º–µ—Ä:

- —Ä—ä—Å—Ç
- —Ç–µ–≥–ª–æ
- —Å—Ç–∞—Ç—É—Å –Ω–∞ –∫—ä—Ä–º–µ–Ω–µ
- –±–∏—Ç–æ–≤–æ-—Å–∞–Ω–∏—Ç–∞—Ä–Ω–∏ —É—Å–ª–æ–≤–∏—è
- Tanner stage
- —Ä–µ–∑—É–ª—Ç–∞—Ç –æ—Ç —Ñ–∏–∑–∏–∫–∞–ª–µ–Ω –ø—Ä–µ–≥–ª–µ–¥

–¢–≤–æ—è—Ç engine –ø–æ–ø—ä–ª–≤–∞:

FillCl088InCL142

–¢–æ–≤–∞ —Å–≤—ä—Ä–∑–≤–∞ _–≤—Å—è–∫–∞ CL142 –¥–µ–π–Ω–æ—Å—Ç —Å –Ω–µ–π–Ω–∏—Ç–µ CL088 –ø–æ–¥-–µ–ª–µ–º–µ–Ω—Ç–∏_.

**5.7. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CL144 (—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞ / –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)**

CL144 —Å—ä–¥—ä—Ä–∂–∞:

- –æ—â–µ –ø–æ-—Ñ–∏–Ω–Ω–∏ –ª–æ–≥–∏—á–µ—Å–∫–∏ —É—Å–ª–æ–≤–∏—è
- dependency —Ç–∞–±–ª–∏—Ü–∏
- –∫–æ—Ä–µ–∫—Ü–∏–∏ –ø–æ –≤—ä–∑—Ä–∞—Å—Ç –∏ –≥—Ä—É–ø–∞
- –∫–ª–∏–Ω–∏—á–Ω–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏

Engine mapping:

FillCl144InCL142

**5.8. PR001 ‚Üí CL134 (–≤—ä–ø—Ä–æ—Å–Ω–∏—Ü–∏, –∞–Ω–∫–µ—Ç–∏, –∏–Ω–¥–µ–∫—Å–∏)**

CL134 —Å—ä–¥—ä—Ä–∂–∞:

- –∫–ª—é—á
- –æ–ø–∏—Å–∞–Ω–∏–µ
- —Å—Ç–æ–π–Ω–æ—Å—Ç–∏
- CL133 –∫–∞—Ç–µ–≥–æ—Ä–∏—è (–ø—Ä–∏–º–µ—Ä: —Ä–∏—Å–∫ —Ñ–∞–∫—Ç–æ—Ä–∏, –ø—Å–∏—Ö–æ—Ä–∞–∑–≤–∏—Ç–∏–µ)
- multiple_choice
- –Ω–æ–º–µ–∫–ª–∞—Ç—É—Ä–∏ –∑–∞ –æ—Ç–≥–æ–≤–æ—Ä–∏

–¢–≤–æ—è—Ç engine –ø—Ä–∞–≤–∏:

FillCL134

–∫–æ–µ—Ç–æ:

- —Ç—ä—Ä—Å–∏ CL134 –∑–∞–ø–∏—Å–∏, —á–∏–π—Ç–æ CL133 —Å—ä–≤–ø–∞–¥–∞ —Å PR001.ActID
- –¥–æ–±–∞–≤—è –≥–∏ –≤:

TRealPR001Item.LstCl134

**5.9. –û–±–æ–±—â–µ–Ω–∏–µ –Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∏—è –º–æ–¥–µ–ª**

–ù–µ–∫–∞ –æ–±–æ–±—â–∏–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞:

**CL132 (–ø–µ—Ä–∏–æ–¥)**

‚¨á  
—Å–ø–∏—Å—ä–∫ –æ—Ç ‚Üí **PR001 (–¥–µ–π–Ω–æ—Å—Ç–∏)**  
‚¨á  
–≤—Å—è–∫–∞ –¥–µ–π–Ω–æ—Å—Ç –∏–º–∞ ‚Üí **CL142 (–æ—Å–Ω–æ–≤–Ω–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞)**  
‚¨á  
–≤—Å—è–∫–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –∏–º–∞ ‚Üí **CL088 (–ø–æ–¥-–µ–ª–µ–º–µ–Ω—Ç–∏)** + **CL144 (–ø—Ä–∞–≤–∏–ª–∞)**  
‚¨á  
–≤—Å—è–∫–∞ –¥–µ–π–Ω–æ—Å—Ç –∏–º–∞ ‚Üí **CL134 (–¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –≤—ä–ø—Ä–æ—Å–Ω–∏—Ü–∏)**

**5.10. –ö–∞–∫ engine-—ä—Ç –≥–æ –∏–∑–ø–æ–ª–∑–≤–∞ –ø–æ –≤—Ä–µ–º–µ –Ω–∞ GeneratePeriod**

–ö–æ–≥–∞—Ç–æ –µ–¥–∏–Ω –ø–µ—Ä–∏–æ–¥ —Å—Ç–∞–Ω–µ ‚Äû—Ç–µ–∫—É—â" –∏–ª–∏ ‚Äû–∞–∫—Ç—É–∞–ª–µ–Ω", UI —Ç—Ä—è–±–≤–∞ –¥–∞ –ø–æ–∫–∞–∂–µ:

- PR001 –¥–µ–π–Ω–æ—Å—Ç–∏
- CL088 –µ–ª–µ–º–µ–Ω—Ç–∏ –∑–∞ –ø–æ–ø—ä–ª–≤–∞–Ω–µ
- CL134 –≤—ä–ø—Ä–æ—Å–∏
- CL142 –∫–æ–¥–æ–≤–µ –∑–∞ –ù–ó–û–ö

–í —Ç–≤–æ—è –∫–æ–¥ —Ç–æ–≤–∞ —Å–µ —Å–ª—É—á–≤–∞ –≤:

LoadVtrGraph

–ö—ä–¥–µ—Ç–æ:

- vCl132 = —Å–∞–º–∏—è—Ç –ø–µ—Ä–∏–æ–¥
- –ø–æ–¥ –Ω–µ–≥–æ —Å–µ –¥–æ–±–∞–≤—è—Ç PR001 –µ–ª–µ–º–µ–Ω—Ç–∏—Ç–µ
- –ø–æ–¥ —Ç—è—Ö CL088 –∏ CL134

Engine —Å—ä—â–æ –æ—Ç–±–µ–ª—è–∑–≤–∞:

- –¥–∞–ª–∏ PR001 –≤–µ—á–µ –µ –∏–∑–ø—ä–ª–Ω–µ–Ω–∞ —á—Ä–µ–∑ PregledNew
- –¥–∞–ª–∏ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ –µ –∏–∑–≤—ä—Ä—à–µ–Ω–æ —á—Ä–µ–∑ ExamAnalysis

**5.11. –°—ä–ø–æ—Å—Ç–∞–≤–∫–∞ —Å —Ä–µ–∞–ª–Ω–æ –∏–∑–≤—ä—Ä—à–µ–Ω–∏ –¥–µ–π–Ω–æ—Å—Ç–∏**

**–ü—Ä–µ–≥–ª–µ–¥–∏ (PregledNew)**

–°—Ä–∞–≤–Ω—è–≤–∞—Ç —Å–µ:

PregledNew.START_DATE ‚àà \[startDate , endDate\]

**–ò–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è (ExamAnalysis)**

–°—Ä–∞–≤–Ω—è–≤–∞—Ç —Å–µ:

ExamAnalysis.NZIS_CODE_CL22 == PR001.Activity_ID

ExamAnalysis.DATA ‚àà \[startDate , endDate\]

–ò —Å–µ –º–∞—Ä–∫–∏—Ä–∞:

PR001.FExamAnal := examAnalysis record

CL132.FPregled := pregled record

**5.12. –ö—Ä–∞–π–Ω–∏—è—Ç —Ä–µ–∑—É–ª—Ç–∞—Ç**

–ó–∞ –≤—Å–µ–∫–∏ CL132 –ø–µ—Ä–∏–æ–¥ –ø–æ–ª—É—á–∞–≤–∞–º–µ:

- **–¥–∞–ª–∏ –µ –≤ –º–∏–Ω–∞–ª–æ, –Ω–∞—Å—Ç–æ—è—â–µ –∏–ª–∏ –±—ä–¥–µ—â–µ**
- **–∫–æ–∏ PR001 —Å–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏**
- **–∫–æ–∏ CL088 –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å–∞ –≤—ä–≤–µ–¥–µ–Ω–∏**
- **–∫–æ–∏ CL142 –∫–æ–¥–æ–≤–µ —â–µ –±—ä–¥–∞—Ç –≤–∫–ª—é—á–µ–Ω–∏ –≤ –ù–ó–ò–° XML**
- **–∫–æ–∏ CL134 –≤—ä–ø—Ä–æ—Å–Ω–∏—Ü–∏ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –ø—Ä–µ–¥–ª–æ–∂–∞—Ç**

–ò –≤—Å–∏—á–∫–æ —Ç–æ–≤–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –æ—Ç UI, –ù–ó–ò–° XML –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞, –∏ —Å–∏—Å—Ç–µ–º–∞—Ç–∞ –∑–∞ –∞–ª–∞—Ä–º–∏.

**‚úî –°–µ–∫—Ü–∏—è 5 –µ –∑–∞–≤—ä—Ä—à–µ–Ω–∞.**

–ê–∫–æ –∫–∞–∂–µ—à:

**–û–¥–æ–±—Ä—è–≤–∞–º –°–µ–∫—Ü–∏—è 5**

—è –≤–∫–ª—é—á–≤–∞–º –≤ DOCX –∏ –ø—Ä–µ–º–∏–Ω–∞–≤–∞–º–µ –∫—ä–º —Å–ª–µ–¥–≤–∞—â–∞—Ç–∞:

**–°–µ–∫—Ü–∏—è 6 - Engine rules for matching actual medical data (Pregledi, ExamAnalysis, Immunizations)**

–∏–ª–∏ –∞–∫–æ –∏—Å–∫–∞—à –¥—Ä—É–≥–∞ —Å–µ–∫—Ü–∏—è - –∫–∞–∂–∏.

**–í–∏–µ –∫–∞–∑–∞—Ö—Ç–µ:**

–¥–∞–≤–∞–π 6 –∏ –Ω–∞–∫—Ä–∞—è —â–µ –Ω–∞–ø—Ä–∞–≤–∏—à –æ–±—â –¥–æ–∫—É–º–µ–Ω—Ç

**ChatGPT –∫–∞–∑–∞:**

–ü–µ—Ä—Ñ–µ–∫—Ç–Ω–æ - –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞–º–µ —Å—ä—Å **–°–µ–∫—Ü–∏—è 6**, –µ–¥–Ω–∞ –æ—Ç –Ω–∞–π-—Å—ä—â–µ—Å—Ç–≤–µ–Ω–∏—Ç–µ, –∑–∞—â–æ—Ç–æ –æ–ø–∏—Å–≤–∞ _–∫–∞–∫ Engine-—ä—Ç –Ω–∞–º–∏—Ä–∞ —Ä–µ–∞–ª–Ω–∏—Ç–µ –∏–∑–≤—ä—Ä—à–µ–Ω–∏ –¥–µ–π–Ω–æ—Å—Ç–∏_ (–ø—Ä–µ–≥–ª–µ–¥–∏, –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è, –∏–º—É–Ω–∏–∑–∞—Ü–∏–∏) –∏ –≥–∏ —Å–≤—ä—Ä–∑–≤–∞ —Å –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–Ω–∏—Ç–µ –ø–µ—Ä–∏–æ–¥–∏.

–°–ª–µ–¥ –∫–∞—Ç–æ –∑–∞–≤—ä—Ä—à–∏–º –°–µ–∫—Ü–∏—è 6 ‚Üí —â–µ –ø—Ä–µ–º–∏–Ω–µ–º –∫—ä–º 7, 8, 9‚Ä¶ –∏ –Ω–∞–∫—Ä–∞—è —â–µ —Ç–∏ –≥–µ–Ω–µ—Ä–∏—Ä–∞–º **–ø—ä–ª–µ–Ω –æ–±–µ–¥–∏–Ω–µ–Ω DOCX**, –∫–∞–∫—Ç–æ –ø–æ–∂–µ–ª–∞.

**#Ô∏è‚É£ –°–ï–ö–¶–ò–Ø 6 - Rules for Matching Actual Medical Data (Pregled, ExamAnalysis, Immunizations)**

**_‚Äû–ö–∞–∫ —Å–µ –æ–ø—Ä–µ–¥–µ–ª—è –¥–∞–ª–∏ –¥–∞–¥–µ–Ω –ø–ª–∞–Ω –µ –∏–∑–ø—ä–ª–Ω–µ–Ω, —á–∞—Å—Ç–∏—á–Ω–æ –∏–∑–ø—ä–ª–Ω–µ–Ω –∏–ª–∏ –Ω–µ–∏–∑–ø—ä–ª–Ω–µ–Ω."_**

–í —Ç–∞–∑–∏ —Å–µ–∫—Ü–∏—è —Å–µ –æ–ø–∏—Å–≤–∞—Ç –ø—Ä–∞–≤–∏–ª–∞—Ç–∞, —á—Ä–µ–∑ –∫–æ–∏—Ç–æ —Å–∏—Å—Ç–µ–º–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä—è–≤–∞ –¥–∞–ª–∏ –ø–∞—Ü–∏–µ–Ω—Ç—ä—Ç –µ –∏–∑–≤—ä—Ä—à–∏–ª –Ω–µ–æ–±—Ö–æ–¥–∏–º–∏—Ç–µ –¥–µ–π–Ω–æ—Å—Ç–∏ –∑–∞ –¥–∞–¥–µ–Ω–∏—è CL132 –ø–µ—Ä–∏–æ–¥. –¢–∞–∑–∏ –ª–æ–≥–∏–∫–∞ –µ –∫—Ä–∏—Ç–∏—á–Ω–∞ –∑–∞:

- –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –ø—Ä–∞–≤–∏–ª–Ω–∏ UI —Å—ä—Å—Ç–æ—è–Ω–∏—è
- –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ Pending / Completed
- –ù–ó–ò–° –≤–∞–ª–∏–¥–∏—Ä–∞–Ω–µ (XML-—Ç–æ –∑–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏)
- –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏ –Ω–∞–ø–æ–º–Ω—è–Ω–∏—è
- —Ñ–∏–ª—Ç—Ä–∏ ‚Äû–ü–∞—Ü–∏–µ–Ω—Ç–∏ —Å –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏"

**6.1. –¢—Ä–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω–∏ —Ç–∏–ø–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ –¥–∞–Ω–Ω–∏**

**1) –ü—Ä–µ–≥–ª–µ–¥–∏ (PregledNew / TRealPregledNewItem)**

–¢–∏–ø–∏—á–Ω–∏ PR001, –∫–æ–∏—Ç–æ —Å–∞ ‚Äû–ø—Ä–µ–≥–ª–µ–¥" (CL136 = '1').

- —Å—ä–¥—ä—Ä–∂–∞—Ç START_DATE
- –∏–º–∞—Ç —Ñ–ª–∞–≥–æ–≤–µ IS_PREVENTIVE / IS_PREVENTIVE_Childrens / Adults
- –∏–º–∞—Ç CL132 link, –∫–æ–π—Ç–æ engine-—ä—Ç –ø–æ–ø—ä–ª–≤–∞

**2) –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª–Ω–∏ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è (ExamAnalysis / TRealExamAnalysisItem)**

–¢–∏–ø PR001 (CL136 = '2').

- —Å—ä–¥—ä—Ä–∂–∞—Ç DATA
- —Å—ä–¥—ä—Ä–∂–∞—Ç NZIS_CODE_CL22
- –∫–æ–¥—ä—Ç –µ –º–∞–ø–Ω–∞—Ç —Å—Ä–µ—â—É PR001.Activity_ID

**3) –ò–º—É–Ω–∏–∑–∞—Ü–∏–∏ (TRealExamImmunizationItem)**

–¢–∏–ø PR001 (CL136 = '3').

- —Å—ä–¥—ä—Ä–∂–∞—Ç –¥–∞—Ç–∞ –Ω–∞ –ø–æ—Å—Ç–∞–≤—è–Ω–µ
- —Å—ä–¥—ä—Ä–∂–∞—Ç –≤–∞–∫—Å–∏–Ω–∞–ª–µ–Ω –∫–æ–¥, –∫–æ–π—Ç–æ engine –º–æ–∂–µ –¥–∞ —Å–≤—ä—Ä–∂–µ (–ø—Ä–∏ –Ω—É–∂–¥–∞)

**6.2. –û–±—â –ø—Ä–∏–Ω—Ü–∏–ø –∑–∞ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ**

–ó–∞ –≤—Å–µ–∫–∏ CL132 –ø–µ—Ä–∏–æ–¥ (startDate ‚Üí endDate):

**1Ô∏è‚É£ –¢—ä—Ä—Å–∏–º –¥–∞–ª–∏ –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –∏–º–∞ –∏–∑–≤—ä—Ä—à–µ–Ω –ø—Ä–µ–≥–ª–µ–¥**

Pregled.START_DATE ‚àà \[startDate, endDate\]

**2Ô∏è‚É£ –¢—ä—Ä—Å–∏–º –¥–∞–ª–∏ –∏–º–∞ –∏–∑–≤—ä—Ä—à–µ–Ω–æ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ, –∫–æ–µ—Ç–æ –æ—Ç–≥–æ–≤–∞—Ä—è –Ω–∞ PR001.Activity_ID**

ExamAnalysis.NZIS_CODE_CL22 == PR001.Activity_ID

and

ExamAnalysis.DATA ‚àà \[startDate, endDate\]

**3Ô∏è‚É£ –ü—Ä–∏ –∏–º—É–Ω–∏–∑–∞—Ü–∏–∏ - –ø–æ–¥–æ–±–Ω–∞ –ª–æ–≥–∏–∫–∞**

Immunization.CODE matches PR001

and

Immunization.DATA ‚àà \[startDate, endDate\]

**6.3. –ö–∞–∫–≤–æ —Å–µ —Å–ª—É—á–≤–∞ –ø—Ä–∏ —Å—ä–≤–ø–∞–¥–µ–Ω–∏–µ**

**–ê–∫–æ –Ω–∞–º–µ—Ä–∏–º –ø—Ä–µ–≥–ª–µ–¥:**

cl132.FPregled := pregled

pregled.Cl132 := cl132

–∏ –º–∞—Ä–∫–∏—Ä–∞–º–µ –ø–µ—Ä–∏–æ–¥–∞ –∫–∞—Ç–æ **completed or partially completed**, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç –æ—Ç —Ç–æ–≤–∞ –¥–∞–ª–∏ –∏–º–∞ –∏ –¥—Ä—É–≥–∏ PR001, –∫–æ–∏—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–∞—Ç –∏–∑–ø—ä–ª–Ω–µ–Ω–∏.

**–ê–∫–æ –Ω–∞–º–µ—Ä–∏–º –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ:**

pr001.FExamAnal := examAnalysis

cl132.FExamAnal := examAnalysis (–≥–ª–∞–≤–µ–Ω –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä)

**–ê–∫–æ –Ω–∞–º–µ—Ä–∏–º –∏–º—É–Ω–∏–∑–∞—Ü–∏—è:**

pr001.FExamAnal := immunizationEntry

**6.4. –õ–æ–≥–∏–∫–∞ –∑–∞ –æ–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ —Å—Ç–∞—Ç—É—Å –Ω–∞ –ø–µ—Ä–∏–æ–¥–∞**

–í—Å–µ–∫–∏ CL132 –ø–µ—Ä–∏–æ–¥ –∏–º–∞ –ª–æ–≥–∏—á–µ—Å–∫–æ—Ç–æ –ø–æ–ª–µ:

CL137 = Pending / PartiallyCompleted / Completed

**Engine —Ä–µ—à–∞–≤–∞ —Ç–∞–∫–∞:**

**‚úî Completed (–∏–∑—Ü—è–ª–æ –∏–∑–ø—ä–ª–Ω–µ–Ω)**

–í—Å–∏—á–∫–∏ PR001, –≤–∫–ª—é—á–µ–Ω–∏ –≤ –ø–µ—Ä–∏–æ–¥–∞, –∏–º–∞—Ç:

- –∏–ª–∏ FPregled/ExamAnal != nil
- –∏–ª–∏ PR001 –µ –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω —Å–ø–æ—Ä–µ–¥ Rules / CL142 restrictions

**‚úî PartiallyCompleted**

–ü–æ–Ω–µ –µ–¥–Ω–∞ –¥–µ–π–Ω–æ—Å—Ç –µ –∏–∑–ø—ä–ª–Ω–µ–Ω–∞, –Ω–æ:

- –∏–º–∞ PR001 –±–µ–∑ —Å—ä–æ—Ç–≤–µ—Ç–µ–Ω –∏–∑–ø—ä–ª–Ω–µ–Ω –ø—Ä–µ–≥–ª–µ–¥/–∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ
- –∏–ª–∏ –µ –∏–∑–≤—ä—Ä—à–µ–Ω–∞ –≥—Ä–µ—à–Ω–∞ –¥–µ–π–Ω–æ—Å—Ç –≤ –ø–µ—Ä–∏–æ–¥–∞

**‚úî Pending (–Ω–∏—â–æ –Ω–µ –µ –∏–∑–≤—ä—Ä—à–µ–Ω–æ)**

–ù–∏—Ç–æ –ø—Ä–µ–≥–ª–µ–¥, –Ω–∏—Ç–æ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ, –Ω–∏—Ç–æ –∏–º—É–Ω–∏–∑–∞—Ü–∏—è –µ –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞.

**6.5. –ö–∞–∫ CL088 —Å–µ –≤–∫–ª—é—á–≤–∞ –≤ –ª–æ–≥–∏–∫–∞—Ç–∞**

CL088 —Å–∞ –ø–æ–¥-–µ–ª–µ–º–µ–Ω—Ç–∏ (—Ñ–∏–∑–∏–∫–∞–ª–Ω–∏ –∏–∑–º–µ—Ä–≤–∞–Ω–∏—è, –ø—Å–∏—Ö–æ—Ä–∞–∑–≤–∏—Ç–∏–µ, —É—Å–ª–æ–≤–∏—è –≤ —Å–µ–º–µ–π—Å—Ç–≤–æ—Ç–æ –∏ –¥—Ä.)

Engine –Ω–µ —Å—á–∏—Ç–∞ –ª–∏–ø—Å–∞—Ç–∞ –Ω–∞ CL088 –∑–∞ –Ω–µ–∏–∑–ø—ä–ª–Ω–µ–Ω –ø–µ—Ä–∏–æ–¥.  
–¢–µ —Å–ª—É–∂–∞—Ç –∑–∞ UI / —Ñ–æ—Ä–º—É–ª—è—Ä–∏.

–ù–æ –∞–∫–æ –Ω–∞–º–µ—Ä–∏ —Ä–µ–∞–ª–Ω–æ –ø–æ–ø—ä–ª–Ω–µ–Ω CL088 (–≤ Pregled –∏–ª–∏ –≤ XML –¥–∞–Ω–Ω–∏), –º–æ–∂–µ –¥–∞ —Å–µ —Ä–∞–∑–≥–ª–µ–∂–¥–∞ –∫–∞—Ç–æ –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–æ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ - –Ω–æ —Ç–æ–≤–∞ –µ –±—ä–¥–µ—â–æ —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ.

**6.6. –î–µ—Ç–∞–π–ª–Ω–∏—è—Ç –∞–ª–≥–æ—Ä–∏—Ç—ä–º –∑–∞ —Ç—ä—Ä—Å–µ–Ω–µ –Ω–∞ Pregled**

–ö–æ–¥—ä—Ç –µ –≤:

LoadVtrGraph / GeneratePeriod

–í—è—Ä–Ω–∞—Ç–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:

for each pregled in patient.FPregledi:

datTemp := pregled.START_DATE

if datTemp >= period.startDate AND datTemp <= period.endDate:

mark as matched

–ü—Ä–∏ –ø—ä—Ä–≤–æ —Å—ä–≤–ø–∞–¥–µ–Ω–∏–µ:

cl132.FPregled := pregled

pregled.Cl132 := cl132

break

**6.7. –î–µ—Ç–∞–π–ª–Ω–∏—è—Ç –∞–ª–≥–æ—Ä–∏—Ç—ä–º –∑–∞ —Ç—ä—Ä—Å–µ–Ω–µ –Ω–∞ ExamAnalysis**

cl22Exam = exam.NZIS_CODE_CL22

for each pr001 in cl132.FListPr001:

if pr001.Activity_ID = cl22Exam:

if exam.DATA ‚àà interval:

pr001.FExamAnal := exam

cl132.FExamAnal := exam

**6.8. –°–ø–µ—Ü–∏–∞–ª–Ω–æ –ø—Ä–∞–≤–∏–ª–æ: ‚Äû–ù–∞–º–µ—Ä–∏—Ö –ø—Ä–µ–≥–ª–µ–¥, –Ω–æ –Ω–µ –µ –ø—Ä–∞–≤–∏–ª–Ω–∏—è—Ç PR001"**

–°–ª—É—á–≤–∞ —Å–µ —á–µ—Å—Ç–æ –ø—Ä–∏:

- –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞, –∏–∑–≤—ä—Ä—à–µ–Ω–∞ –∫–∞—Ç–æ ‚Äû–∫–æ–Ω—Å—É–ª—Ç–∞—Ü–∏—è"
- –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞, –∫–æ—è—Ç–æ –µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–∞–Ω–∞ –∫–∞—Ç–æ IS_PREVENTIVE, –Ω–æ –Ω–µ —Å—ä–≤–ø–∞–¥–∞ —Å –ø–µ—Ä–∏–æ–¥–∞
- –≥—Ä–µ—à–Ω–æ –≤—ä–≤–µ–¥–µ–Ω–∏ –ø—Ä–µ–≥–ª–µ–¥–∏

Engine –∞–ª–≥–æ—Ä–∏—Ç—ä–º—ä—Ç –µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–µ–Ω:

if pregled is not within date range ‚Üí ignore

if pregled does not map to this CL132 ‚Üí do not auto-link

–¢–æ–≤–∞ –µ –ø—Ä–∞–≤–∏–ª–Ω–æ.

**6.9. –ö–∞–∫ —Å–µ –æ–ø—Ä–µ–¥–µ–ª—è ‚Äû–Ω–∞–π-–≤–∞–∂–Ω–∏—è—Ç" —Ç–µ–∫—É—â –ø–µ—Ä–∏–æ–¥**

–¢–≤–æ—è—Ç engine –æ–ø—Ä–µ–¥–µ–ª—è –µ–¥–∏–Ω —Ç–µ–∫—É—â –∞–∫—Ç–∏–≤–µ–Ω –ø–µ—Ä–∏–æ–¥:

pat.CurrentGraphIndex := index_of_period

pat.NoteProf := CL132.Description

pat.ListCurrentProf.Add(period)

–ü—Ä–∞–≤–∏–ª–æ—Ç–æ –∑–∞ –∏–∑–±–æ—Ä –µ:

- –ø—ä—Ä–≤–∏—è—Ç –ø–µ—Ä–∏–æ–¥, –∫–æ–π—Ç–æ –µ –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ \[startDate, endDate\]
- –∏ –∏–º–∞ –Ω–∞–π-–±–ª–∏–∑—ä–∫ endDate
- –∏ –Ω—è–º–∞ –∏–∑–≤—ä—Ä—à–µ–Ω–∞ –¥–µ–π–Ω–æ—Å—Ç

–ê–∫–æ –≤–µ—á–µ –∏–º–∞ —Ç–µ–∫—É—â –ø–µ—Ä–∏–æ–¥:

ShowMessage('–ò–º–∞ –ø–æ–≤–µ—á–µ –æ—Ç –µ–¥–∏–Ω –ø—Ä–µ–≥–ª–µ–¥')

–¢–æ–≤–∞ –µ –∑–∞—â–∏—Ç–µ–Ω –º–µ—Ö–∞–Ω–∏–∑—ä–º, –ø—Ä–∞–≤–∏–ª–µ–Ω.

**6.10. –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ UI –≤–ª–∏—è–Ω–∏—è**

–°–ª–µ–¥ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ—Ç–æ:

- Period nodes ‚Üí –ø–æ–∫–∞–∑–≤–∞—Ç checkbox, tick –∏–ª–∏ –±—É—Ç–æ–Ω
- PR001 nodes ‚Üí –º–∞—Ä–∫–∏—Ä–∞—Ç –∏–∑–≤—ä—Ä—à–µ–Ω–∏—Ç–µ –¥–µ–π–Ω–æ—Å—Ç–∏
- CL088 / CL134 ‚Üí —Å–µ —Ä–∞–∑–≥—ä–≤–∞—Ç –≤ UI
- –≤—Ä–∞—á—ä—Ç –≤–∏–∂–¥–∞ –∫–∞–∫–≤–æ –µ –æ—Å—Ç–∞–Ω–∞–ª–æ –Ω–µ–∏–∑–ø—ä–ª–Ω–µ–Ω–æ

UI –µ –¥–∏—Ä–µ–∫—Ç–Ω–æ –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∞ –æ—Ç matching engine-–∞.

**6.11. –ö–∞–∫ —Å–µ —Å–≤—ä—Ä–∑–≤–∞ —Å –ù–ó–ò–° XML**

–ü—Ä–∏ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ NZIS —Å—ä–æ–±—â–µ–Ω–∏–µ, engine –≤–∑–µ–º–∞:

- FPregled ‚Üí –∫–∞—Ç–æ —Å—ä–±–∏—Ç–∏–µ
- CL132.Key
- CL142 (–∞–∫–æ –∏–º–∞ PR001)
- CL088 –¥–∞–Ω–Ω–∏
- CL134 –≤—ä–ø—Ä–æ—Å–Ω–∏—Ü–∏

–ò –≥–∏ –≤–∫—é—á–≤–∞ –≤ XML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ –∑–∞ PLANNED / PERFORMED.

**6.12. –†–µ–∑—é–º–µ –Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∞—Ç–∞ –ª–æ–≥–∏–∫–∞**

CL132Period

‚Ü≥ PR001 activities

‚Ü≥ CL142 (main procedure)

‚Ü≥ CL088 (measurement parts)

‚Ü≥ CL134 (additional questionnaires)

ActualMedicalData:

Pregled

ExamAnalysis

Immunizations

MatchingEngine:

finds Pregled in date interval

finds ExamAnalysis matching PR001

marks CL132 as Completed / Partial / Pending

updates UI and NZIS information

**‚úî –°–µ–∫—Ü–∏—è 6 –µ –∑–∞–≤—ä—Ä—à–µ–Ω–∞.**

–ê–∫–æ –∫–∞–∂–µ—à:

**–û–¥–æ–±—Ä—è–≤–∞–º –°–µ–∫—Ü–∏—è 6**

—â–µ —è –≤–∫–ª—é—á–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞.

–°–ª–µ–¥ —Ç–æ–≤–∞ –ø—Ä–µ–º–∏–Ω–∞–≤–∞–º–µ –∫—ä–º:

**–°–µ–∫—Ü–∏—è 7 - UI Logic: How the VirtualTree represents LTC data (nodes, icons, states, interactions)**

–∏–ª–∏ –∞–∫–æ –∏—Å–∫–∞—à –Ω–µ—è –¥–∞ —è –ø—Ä–æ–ø—É—Å–Ω–µ–º –∏ –¥–∞ –æ—Ñ–æ—Ä–º–∏–º –¥—Ä—É–≥–∞ - –∫–∞–∂–∏.

**–í–∏–µ –∫–∞–∑–∞—Ö—Ç–µ:**

–¥–∞–≤–∞–π 7

**ChatGPT –∫–∞–∑–∞:**

–ü—Ä–æ–¥—ä–ª–∂–∞–≤–∞–º–µ —Å—ä—Å **–°–µ–∫—Ü–∏—è 7**, –µ–¥–Ω–∞ –æ—Ç –Ω–∞–π-—Ç—Ä—É–¥–Ω–∏—Ç–µ –∏ —Å—ä—â–µ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–∞–π-—Ü–µ–Ω–Ω–∏ —á–∞—Å—Ç–∏, –∑–∞—â–æ—Ç–æ —Ç–≤–æ—è—Ç UI (VirtualStringTreeHipp) –Ω–µ –µ –ø—Ä–æ—Å—Ç–æ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è, –∞ **–∞–∫—Ç–∏–≤–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞ –ª–æ–≥–∏–∫–∞—Ç–∞** - —Ç–æ–π —É–ø—Ä–∞–≤–ª—è–≤–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è—Ç–∞, –º–∞—Ä–∫–∏—Ä–∞–Ω–µ—Ç–æ, –∏–∑–±–æ—Ä–∏—Ç–µ, –ø–æ–¥—Å–∫–∞–∑–∫–∏—Ç–µ –∏ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ—Ç–æ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–Ω–∏ –¥–µ–π–Ω–æ—Å—Ç–∏.

–¢—É–∫ —Ñ–æ—Ä–º–∞–ª–∏–∑–∏—Ä–∞–º–µ –≤—Å–∏—á–∫–æ —Ç–æ–≤–∞, —Ç–∞–∫–∞ —á–µ –±—ä–¥–µ—â –µ–∫–∏–ø –∏–ª–∏ –±—ä–¥–µ—â–∞ –≤–µ—Ä—Å–∏—è –Ω–∞ —Å–∏—Å—Ç–µ–º–∞—Ç–∞ –¥–∞ –º–æ–∂–µ –¥–∞ –ø—Ä–µ—Å—ä–∑–¥–∞–¥–µ UI –ª–æ–≥–∏–∫–∞—Ç–∞ _–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è_.

**#Ô∏è‚É£ –°–µ–∫—Ü–∏—è 7 - UI Logic: VirtualTree Representation of LTC (CL132 ‚Üí PR001 ‚Üí CL088 / CL134)**

**_‚Äû–ö–∞–∫ –¥—ä—Ä–≤–æ—Ç–æ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–Ω–∏—Ç–µ –ø–µ—Ä–∏–æ–¥–∏ –∏ –∫–∞–∫ –ª–µ–∫–∞—Ä—è—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∞ —Å —Ç—è—Ö"_**

**7.1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ VirtualTree –∑–∞ –µ–¥–∏–Ω –ø–∞—Ü–∏–µ–Ω—Ç**

–î—ä—Ä–≤–æ—Ç–æ –∏–º–∞ —Å–ª–µ–¥–Ω–∞—Ç–∞ –ª–æ–≥–∏—á–µ—Å–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

–ü–∞—Ü–∏–µ–Ω—Ç (Root.Child)

‚îú‚îÄ‚îÄ –¢–µ–∫—É—â–∏ –ø–µ—Ä–∏–æ–¥–∏ (vNast)

‚îÇ ‚îú‚îÄ‚îÄ CL132 –ø–µ—Ä–∏–æ–¥ 1

‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ PR001 –¥–µ–π–Ω–æ—Å—Ç 1

‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ CL088 –ø–æ–¥–ø–æ–∫–∞–∑–∞—Ç–µ–ª

‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ CL134 –≤—ä–ø—Ä–æ—Å–Ω–∏–∫ –µ–ª–µ–º–µ–Ω—Ç

‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ PR001 –¥–µ–π–Ω–æ—Å—Ç 2

‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ ...

‚îÇ ‚îî‚îÄ‚îÄ CL132 –ø–µ—Ä–∏–æ–¥ 2

‚îú‚îÄ‚îÄ –ú–∏–Ω–∞–ª–∏ –ø–µ—Ä–∏–æ–¥–∏ (vMinali)

‚îÇ ‚îî‚îÄ‚îÄ ...

‚îî‚îÄ‚îÄ –ë—ä–¥–µ—â–∏ –ø–µ—Ä–∏–æ–¥–∏ (vBudeshti)

‚îî‚îÄ‚îÄ ...

–¢–∞–∑–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ —Å—ä–∑–¥–∞–≤–∞ –≤ LoadVtrGraph / LoadVtrGraph1.

**7.2. Node Types (AspRec.vid)**

–í—Å–µ–∫–∏ node –≤ –¥—ä—Ä–≤–æ—Ç–æ –∏–º–∞ —Ç–∏–ø:

| **–¢–∏–ø** | **–û–ø–∏—Å–∞–Ω–∏–µ** |
| --- | --- |
| vvPatient | –ü–∞—Ü–∏–µ–Ω—Ç |
| vvCl132 | –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ–Ω –ø–µ—Ä–∏–æ–¥ |
| vvPr001 | –î–µ–π–Ω–æ—Å—Ç –≤—ä—Ç—Ä–µ –≤ –ø–µ—Ä–∏–æ–¥–∞ |
| vvCl088 | –ü–æ–¥-–µ–ª–µ–º–µ–Ω—Ç –∫—ä–º –¥–µ–π–Ω–æ—Å—Ç—Ç–∞ |
| vvCl134 | –í—ä–ø—Ä–æ—Å–Ω–∏–∫ / –∏–Ω–¥–µ–∫—Å –µ–ª–µ–º–µ–Ω—Ç |

–¢–æ–≤–∞ –ø–æ–∑–≤–æ–ª—è–≤–∞ –Ω–∞ UI –¥–∞ –∑–Ω–∞–µ ‚Äû–∫–∞–∫–≤–æ" –µ –¥–∞–¥–µ–Ω node –∏ –∫–∞–∫ –¥–∞ –≥–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ä–∞.

**7.3. Node Data**

–í—ä–≤ –≤—Å–µ–∫–∏ node –µ –∑–∞–ø–∏—Å–∞–Ω–æ:

DataPos ‚Üí –ø–æ–∑–∏—Ü–∏—è –≤ ADB –±—É—Ñ–µ—Ä–∞ (—Ä–µ–∞–ª–Ω–∏—è –∑–∞–ø–∏—Å)

index ‚Üí –∏–Ω–¥–µ–∫—Å –≤ –ª–æ–∫–∞–ª–Ω–∏—è —Å–ø–∏—Å—ä–∫ (Cl132 index –∏–ª–∏ PR001 index)

vid ‚Üí —Ç–∏–ø node-–∞

–ß—Ä–µ–∑ —Ç–æ–≤–∞ UI –º–æ–∂–µ –¥–∞:

- –∑–Ω–∞–µ –∫–æ–π CL132 –ø–µ—Ä–∏–æ–¥ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–≤–∞
- –∑–Ω–∞–µ –∫–æ–π PR001 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–≤–∞
- –ª–µ—Å–Ω–æ –¥–∞ –Ω–∞–º–µ—Ä–∏ —Å—ä–æ—Ç–≤–µ—Ç–Ω–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –ø—Ä–∏ –∫–ª–∏–∫

**7.4. –†–∞–∑–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –ø–µ—Ä–∏–æ–¥–∞ –≤ —Ç—Ä–∏ –≥—Ä—É–ø–∏**

**1) –ú–∏–Ω–∞–ª–∏ (vMinali)**

–ü–µ—Ä–∏–æ–¥–∏ –∑–∞ –∫–æ–∏—Ç–æ:

UserDate > endDate

**2) –¢–µ–∫—É—â–∏ (vNast)**

startDate ‚â§ UserDate ‚â§ endDate

**3) –ë—ä–¥–µ—â–∏ (vBudeshti)**

UserDate < startDate

–¢–≤–æ—è—Ç engine –∏–º–∞ —Ñ–ª–∞–≥–æ–≤–µ:

VisibleMinali

VisibleBudeshti

–¢–∞–∫–∞ UI –º–æ–∂–µ –¥–∞ –ø–æ–∫–∞–∑–≤–∞ —Å–∞–º–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏—Ç–µ —Å–µ–∫—Ü–∏–∏.

**7.5. –õ–æ–≥–∏–∫–∞ –Ω–∞ CheckBox —Å—ä—Å—Ç–æ—è–Ω–∏—è—Ç–∞**

–¢–æ–≤–∞ –µ –µ–¥–Ω–∞ –æ—Ç –Ω–∞–π-—Å–ª–æ–∂–Ω–∏—Ç–µ UI –ª–æ–≥–∏–∫–∏ –∏ —è —Ñ–æ—Ä–º–∞–ª–∏–∑–∏—Ä–∞–º–µ —Ç—É–∫.

**‚úî vvCl132 nodes (–ø–µ—Ä–∏–æ–¥–∏)**

CL132 node –º–æ–∂–µ –¥–∞ –∏–º–∞ 3 —Å—ä—Å—Ç–æ—è–Ω–∏—è:

**1\. ctNone**

–ü–µ—Ä–∏–æ–¥—ä—Ç –µ:

- –∏–∑–ø—ä–ª–Ω–µ–Ω (–∏–º–∞ Pregled –∏–ª–∏ ExamAnalysis)
- –≤ –º–∏–Ω–∞–ª–æ—Ç–æ

**2\. ctCheckBox (unchecked)**

–ü–µ—Ä–∏–æ–¥—ä—Ç –µ:

- –±—ä–¥–µ—â
- —Ç–µ–∫—É—â, –Ω–æ –∏–º–∞ –¥—Ä—É–≥–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –∏–ª–∏ –ù–ó–ò–° –µ –º–∞—Ä–∫–∏—Ä–∞–ª–æ, —á–µ —Ç–æ–∑–∏ —Ç–∏–ø –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞ –ù–ï –ï –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ –¥–∞ —Å–µ –º–∞—Ä–∫–∏—Ä–∞ (NzisPregNotPreg)

**3\. ctCheckBox (checked, disabled)**

–ü–µ—Ä–∏–æ–¥—ä—Ç –µ —Ç–µ–∫—É—â, –≤–∞–∂–µ–Ω –∏ **–æ—â–µ –Ω–µ–∏–∑–ø—ä–ª–Ω–µ–Ω**, –Ω–æ engine –≥–æ –µ –º–∞—Ä–∫–∏—Ä–∞–ª –∫–∞—Ç–æ ‚Äû–≥–ª–∞–≤–µ–Ω –Ω–µ–æ–±—Ö–æ–¥–∏–º".

–ø–∞—Ç.CurrentGraphIndex == —Ç–æ–∑–∏ –ø–µ—Ä–∏–æ–¥

–¢–æ–≤–∞ –ø–æ–∫–∞–∑–≤–∞ –Ω–∞ –ª–µ–∫–∞—Ä—è:

‚Äû–¢–æ–≤–∞ –µ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞—Ç–∞, –∫–æ—è—Ç–æ –ø–∞—Ü–∏–µ–Ω—Ç—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏ –°–ï–ì–ê."

**‚úî vvPr001 nodes (–¥–µ–π–Ω–æ—Å—Ç–∏)**

–ü–æ–≤–µ–¥–µ–Ω–∏–µ:

**1\. –ê–∫–æ –¥–µ–π–Ω–æ—Å—Ç—Ç–∞ –µ –∏–∑–ø—ä–ª–Ω–µ–Ω–∞ (FExamAnal != nil –∏–ª–∏ FPregled != nil):**

CheckType = ctNone

State = Disabled

**2\. –ê–∫–æ –µ –Ω–µ–∏–∑–ø—ä–ª–Ω–µ–Ω–∞:**

CheckType = ctCheckBox

CheckState = unchecked

UI –ø–æ–∑–≤–æ–ª—è–≤–∞ –º–∞—Ä–∫–∏—Ä–∞–Ω–µ/–æ—Ç–º—è—Ç–∞–Ω–µ –∑–∞ –≤—ä—Ç—Ä–µ—à–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–≤–µ—á–µ —Å–≤—ä—Ä–∑–∞–Ω–∞ —Å –ù–ó–ò–° XML –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ).

**‚úî vvCl088 nodes (–ø–æ–¥-–µ–ª–µ–º–µ–Ω—Ç–∏)**

–í–∏–Ω–∞–≥–∏:

CheckType = None

–ó–∞—â–æ—Ç–æ —Ç–µ —Å–∞ _–≤—ä—Ç—Ä–µ—à–Ω–∏ –µ–ª–µ–º–µ–Ω—Ç–∏_ (—Ñ–æ—Ä–º—É–ª—è—Ä–∏), –Ω–µ ‚Äû–¥–µ–π–Ω–æ—Å—Ç".

**‚úî vvCl134 nodes (–≤—ä–ø—Ä–æ—Å–Ω–∏—Ü–∏)**

–°—ä—â–æ:

CheckType = None

–¢–µ —Å–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞—Ç –≤ –æ—Ç–¥–µ–ª–Ω–∏ UI —Ñ–æ—Ä–º–∏.

**7.6. –†–∞–∑–≥—ä–≤–∞–Ω–µ –Ω–∞ –¥—ä—Ä–≤–æ—Ç–æ**

Engine –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:

- —Ä–∞–∑–≥—ä–≤–∞ **–≤—Å–∏—á–∫–∏ —Ç–µ–∫—É—â–∏ CL132 –ø–µ—Ä–∏–æ–¥–∏**
- —Ä–∞–∑–≥—ä–≤–∞ –≤—Å–∏—á–∫–∏ PR001 –≤—ä—Ç—Ä–µ –≤ —Ç–µ–∫—É—â–∏—Ç–µ –ø–µ—Ä–∏–æ–¥–∏

vtrGraph.Expanded\[vNast\] := True;

for each child of vNast:

Expanded = True

–ü—Ä–∏ –º–∏–Ω–∞–ª–∏/–±—ä–¥–µ—â–∏ –ø–µ—Ä–∏–æ–¥–∏:

- –Ω–µ –≤–∏–Ω–∞–≥–∏ —Å–µ —Ä–∞–∑–≥—ä–≤–∞—Ç, –æ—Å–≤–µ–Ω –∞–∫–æ –ª–µ–∫–∞—Ä—è—Ç –∏–∑–±–µ—Ä–µ node.

**7.7. –û–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ –≥–ª–∞–≤–Ω–∞—Ç–∞ —Ç–µ–∫—É—â–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞**

Engine –ø—Ä–∞–≤–∏:

if period is current

if no pregled found

mark as main

–ò —Å–ª–µ–¥ —Ç–æ–≤–∞:

pat.NoteProf := –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Ç–æ–∑–∏ CL132

pat.CurrentGraphIndex := index

UI –∏–∑–ø–æ–ª–∑–≤–∞ —Ç–æ–≤–∞ –∑–∞:

- –ø–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ ‚Äû‚ö† –ò–º–∞ –ø—Ä–µ–¥—Å—Ç–æ—è—â –ø—Ä–µ–≥–ª–µ–¥"
- –ø–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ –±–µ–ª–µ–∂–∫–∞—Ç–∞ –≤ –ø–∞–Ω–µ–ª–∞ –Ω–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞
- –∞–≤—Ç–æ—Ñ–æ–∫—É—Å –≤—ä—Ä—Ö—É —Å—ä–æ—Ç–≤–µ—Ç–Ω–∏—è node

**7.8. –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ PR001 —Ç–∏–ø ‚Äû–ø—Ä–µ–≥–ª–µ–¥" (cl136 = '1')**

–ê–∫–æ –ø–µ—Ä–∏–æ–¥—ä—Ç –µ —Ç–∏–ø –ø—Ä–µ–≥–ª–µ–¥:

- CL132 node –µ –æ—Å–Ω–æ–≤–Ω–∏—è—Ç –Ω–æ—Å–∏—Ç–µ–ª –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- ExamAnalysis –Ω–µ —Å–µ —Ä–∞–∑–≥–ª–µ–∂–¥–∞
- –µ–¥–∏–Ω –ø—Ä–µ–≥–ª–µ–¥ –ø–æ–∫—Ä–∏–≤–∞ —Ü–µ–ª–∏—è CL132 –ø–µ—Ä–∏–æ–¥
- –∞–∫–æ –±—ä–¥–µ –Ω–∞–º–µ—Ä–µ–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª–µ–Ω –ø—Ä–µ–≥–ª–µ–¥ ‚Üí –Ω–µ —Å–µ —Å–≤—ä—Ä–∑–≤–∞

UI –ª–æ–≥–∏–∫–∞:

- ctNone, –∞–∫–æ –∏–º–∞ –ø—Ä–µ–≥–ª–µ–¥
- ctCheckBox (disabled), –∞–∫–æ –µ —Ç–µ–∫—É—â –∏ –Ω—è–º–∞ –ø—Ä–µ–≥–ª–µ–¥
- ctCheckBox (normal), –∞–∫–æ –µ –±—ä–¥–µ—â

**7.9. –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ PR001 —Ç–∏–ø ‚Äû–∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ" (cl136 = '2')**

–¢—É–∫ CL132 node –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –≥—Ä—É–ø–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

- –≤—Å—è–∫–æ PR001 –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ –∏–º–∞ —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω —Å—Ç–∞—Ç—É—Å
- –º–æ–∂–µ —á–∞—Å—Ç–∏—á–Ω–æ –¥–∞ –∏–º–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è
- UI –ø–æ–∫–∞–∑–≤–∞ –¥—ä—Ä–≤–æ:

–ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞ ‚Üí –ò–∑—Å–ª–µ–¥–≤–∞–Ω–µ A ‚úî

‚Üí –ò–∑—Å–ª–µ–¥–≤–∞–Ω–µ B ‚úò

‚Üí –ò–∑—Å–ª–µ–¥–≤–∞–Ω–µ C ‚úî

**7.10. –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ PR001 —Ç–∏–ø ‚Äû–∏–º—É–Ω–∏–∑–∞—Ü–∏—è" (cl136 = '3')**

–ü–æ—á—Ç–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ —Å –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è—Ç–∞.

**7.11. –ö–∞–∫ UI –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–∞ repNumber (–ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç)**

–ü–µ—Ä–∏–æ–¥–∏—Ç–µ —Å repNumber > 0 —Å–µ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–∞—Ç –∫–∞—Ç–æ —Ä–∞–∑–ª–∏—á–Ω–∏ –∑–∞–ø–∏—Å–∏:

–ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞ "–ì–æ–¥–∏—à–µ–Ω –ø—Ä–µ–≥–ª–µ–¥"

‚Üí 2021

‚Üí 2022

‚Üí 2023

‚Üí 2024

–ù–æ UI –Ω–µ –ø–æ–∫–∞–∑–≤–∞ repNumber, –∞ —Ü–µ–ª–∏—è CL132 Description:

"–ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ–Ω –ø—Ä–µ–≥–ª–µ–¥ –∑–∞ –≤—ä–∑—Ä–∞—Å—Ç 18-65 –≥."

–í —Ä–µ–∞–ª–Ω–æ—Å—Ç –ø–µ—Ä–∏–æ–¥–∞ –µ —É–Ω–∏–∫–∞–ª–µ–Ω –ø–æ startDate/endDate.

**7.12. Hover / NoteProf / Tooltips**

UI –≤–∑–µ–º–∞:

- pat.NoteProf
- CL132.Description
- CL132.Key
- startDate / endDate

–∏ –º–æ–∂–µ –¥–∞ –ø–æ–∫–∞–∑–≤–∞ tooltip:

–ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞: C12 - –ü—Ä–µ–≥–ª–µ–¥ 12-15 –º–µ—Å–µ—Ü–∞

–ò–Ω—Ç–µ—Ä–≤–∞–ª: 10.07.2023 - 10.10.2023

–°—Ç–∞—Ç—É—Å: –ø—Ä–µ–¥—Å—Ç–æ—è—â–∞

**7.13. –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è**

**‚úî –õ–µ–∫–∞—Ä—è—Ç –º–æ–∂–µ –¥–∞:**

- —â—Ä–∞–∫–Ω–µ –ø–µ—Ä–∏–æ–¥ ‚Üí –æ—Ç–≤–∞—Ä—è –ø–∞–Ω–µ–ª –∑–∞ –¥–µ–π–Ω–æ—Å—Ç—Ç–∞
- —â—Ä–∞–∫–Ω–µ PR001 ‚Üí –æ—Ç–≤–∞—Ä—è —Å—ä–æ—Ç–≤–µ—Ç–Ω–∏—è –ø–∞–Ω–µ–ª/—Ñ–æ—Ä–º–∞
- –∏–∑–≤—ä—Ä—à–∏ –¥–µ–π–Ω–æ—Å—Ç ‚Üí UI —è –∑–∞–ø–∏—Å–≤–∞
- —Å–ª–µ–¥ –∑–∞–ø–∏—Å:

Engine.RefreshGraph(patient)

–∏ UI —Å–µ –æ–±–Ω–æ–≤—è–≤–∞ —Å–ø—Ä—è–º–æ –Ω–æ–≤–∏—Ç–µ —Å—ä—Å—Ç–æ—è–Ω–∏—è.

**7.14. UI Error Cases**

Engine —Å—ä–¥—ä—Ä–∂–∞ –∑–∞—â–∏—Ç–Ω–∏ –º–µ—Ö–∞–Ω–∏–∑–º–∏:

**‚Äû–ò–º–∞ –ø–æ–≤–µ—á–µ –æ—Ç –µ–¥–∏–Ω –ø—Ä–µ–≥–ª–µ–¥"**

–¢–æ–≤–∞ –ø—Ä–µ–¥–ø–∞–∑–≤–∞ –æ—Ç –≥—Ä–µ—à–Ω–∞ —Å–∏—Ç—É–∞—Ü–∏—è, –≤ –∫–æ—è—Ç–æ:

- –¥–≤–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–Ω–∏ –ø—Ä–µ–≥–ª–µ–¥–∞ —Å–∞ –≤–ø–∏—Å–∞–Ω–∏ –≤ –µ–¥–∏–Ω –∏ —Å—ä—â–∏ –ø–µ—Ä–∏–æ–¥
- –∏–ª–∏ –ù–ó–ò–° –µ –≤—ä–≤–µ–ª–æ –¥—É–±–ª–∏—Ä–∞—â–∏ –¥–∞–Ω–Ω–∏

UI —Ç—Ä—è–±–≤–∞ –¥–∞:

- –ø–æ–∫–∞–∂–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- –º–∞—Ä–∫–∏—Ä–∞ –ø–µ—Ä–∏–æ–¥–∞ –≤ –∂—ä–ª—Ç–æ

**7.15. –û–±–æ–±—â–µ–Ω–∏–µ –Ω–∞ UI logics**

CL132 ‚Üí –æ—Å–Ω–æ–≤–µ–Ω node (–ø–µ—Ä–∏–æ–¥)

PR001 ‚Üí –¥–µ–π–Ω–æ—Å—Ç–∏ –≤—ä—Ç—Ä–µ

CL088 ‚Üí –ø–æ–¥–ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

CL134 ‚Üí –≤—ä–ø—Ä–æ—Å–Ω–∏—Ü–∏

–ü–µ—Ä–∏–æ–¥–∏—Ç–µ —Å–µ –¥–µ–ª—è—Ç –Ω–∞ –º–∏–Ω–∞–ª–∏ / —Ç–µ–∫—É—â–∏ / –±—ä–¥–µ—â–∏.

–í—Å–µ–∫–∏ node –∏–º–∞ CheckType —Å–ø–æ—Ä–µ–¥ —Å—Ç–∞—Ç—É—Å–∞.

UI –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–∞–∑–≥—ä–≤–∞ —Ç–µ–∫—É—â–∏—Ç–µ –ø–µ—Ä–∏–æ–¥–∏.

UI –ø–æ–∫–∞–∑–≤–∞ –µ–¥–∏–Ω –≥–ª–∞–≤–µ–Ω, –≤–∞–∂–µ–Ω –ø–µ—Ä–∏–æ–¥.

UI –º–∞—Ä–∫–∏—Ä–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏—Ç–µ –¥–µ–π–Ω–æ—Å—Ç–∏.

UI —Å–≤—ä—Ä–∑–≤–∞ –¥–∞–Ω–Ω–∏—Ç–µ —Å Pregled / ExamAnalysis.

**‚úî –°–µ–∫—Ü–∏—è 7 –µ –∑–∞–≤—ä—Ä—à–µ–Ω–∞.**

–ö–æ–≥–∞—Ç–æ –∫–∞–∂–µ—à **‚Äû–¥–∞–≤–∞–π 8"**, –ø—Ä–æ–¥—ä–ª–∂–∞–≤–∞–º–µ —Å—ä—Å:

**–°–µ–∫—Ü–∏—è 8 - Engine Extensions: Immunizations (V16, Vaccines, Special Rules)**

–∏–ª–∏ –¥—Ä—É–≥–∞ —Å–µ–∫—Ü–∏—è –ø–æ —Ç–≤–æ–µ –∂–µ–ª–∞–Ω–∏–µ.

–ê –Ω–∞–∫—Ä–∞—è —â–µ –Ω–∞–ø—Ä–∞–≤—è –æ–±—â–∏—è –≥–æ–ª—è–º –¥–æ–∫—É–º–µ–Ω—Ç.

**–í–∏–µ –∫–∞–∑–∞—Ö—Ç–µ:**

–¥–∞–≤–∞–π 8

**ChatGPT –∫–∞–∑–∞:**

–ü—Ä–æ–¥—ä–ª–∂–∞–≤–∞–º–µ —Å—ä—Å **–°–µ–∫—Ü–∏—è 8**, –∫–æ—è—Ç–æ –µ –≤–∞–∂–Ω–∞, –∑–∞—â–æ—Ç–æ _–∏–º—É–Ω–∏–∑–∞—Ü–∏–∏—Ç–µ –∏–º–∞—Ç –æ—Ç–¥–µ–ª–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—Ç –ø—Ä–µ–≥–ª–µ–¥–∏—Ç–µ –∏ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è—Ç–∞_, –∞ V16 –µ —Å–ø–µ—Ü–∏–∞–ª–µ–Ω —Å–ª—É—á–∞–π, –∑–∞ –∫–æ–π—Ç–æ –ù–ó–ò–° –∏–º–∞ —É–Ω–∏–∫–∞–ª–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞, –∫–æ–∏—Ç–æ –Ω–µ —Å–ª–µ–¥–≤–∞—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—è CL132/PR001 –º–æ–¥–µ–ª.

**#Ô∏è‚É£ –°–ï–ö–¶–ò–Ø 8 - Immunization Engine (Vaccines, V16 Logic, Special Cases)**

**_‚Äû–ö–∞–∫ –¥–≤–∏–≥–∞—Ç–µ–ª—è—Ç –æ–±—Ä–∞–±–æ—Ç–≤–∞ –∏–º—É–Ω–∏–∑–∞—Ü–∏–∏—Ç–µ - –æ–±—â–∏ –ø—Ä–∞–≤–∏–ª–∞ –∏ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ –∏–∑–∫–ª—é—á–µ–Ω–∏—è"_**

**8.1. –ö–∞–∫–≤–æ –æ—Ç–ª–∏—á–∞–≤–∞ –∏–º—É–Ω–∏–∑–∞—Ü–∏–∏—Ç–µ (CL136 = '3') –æ—Ç –æ—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ –¥–µ–π–Ω–æ—Å—Ç–∏**

–í CL132 –≤—Å—è–∫–∞ –¥–µ–π–Ω–æ—Å—Ç –∏–º–∞ —Ç–∏–ø:

CL136:

'1' ‚Üí –ü—Ä–µ–≥–ª–µ–¥

'2' ‚Üí –ò–∑—Å–ª–µ–¥–≤–∞–Ω–µ

'3' ‚Üí –ò–º—É–Ω–∏–∑–∞—Ü–∏—è

–ü—Ä–∏ –∏–º—É–Ω–∏–∑–∞—Ü–∏–∏—Ç–µ:

**‚úî 1) –ù—è–º–∞ ‚Äû—á–∞—Å—Ç–∏—á–Ω–æ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ"**

–ò–ª–∏ –µ –ø–æ—Å—Ç–∞–≤–µ–Ω–∞ –∏–º—É–Ω–∏–∑–∞—Ü–∏—è—Ç–∞ - –∏–ª–∏ –Ω–µ –µ.

**‚úî 2) –ü–æ–≤—Ç–∞—Ä—è–µ–º–æ—Å—Ç—Ç–∞ (repeat_years) –ø–æ–Ω—è–∫–æ–≥–∞ –µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞**

–ó–∞ –Ω—è–∫–æ–∏ –≤–∞–∫—Å–∏–Ω–∏ (–Ω–∞–ø—Ä. V16) –Ω–µ –µ ‚Äû—á–∏—Å—Ç–∞" –ø–µ—Ä–∏–æ–¥–∏—á–Ω–∞ –ª–æ–≥–∏–∫–∞.

**‚úî 3) –ü—Ä–∏–µ–º–∞ —Å–µ, —á–µ –∏–º—É–Ω–∏–∑–∞—Ü–∏—è—Ç–∞ –µ –∏–∑–ø—ä–ª–Ω–µ–Ω–∞ —Ç–æ—á–Ω–æ –≤ –¥–µ–Ω—è –Ω–∞ –ø–æ—Å—Ç–∞–≤—è–Ω–µ**

–ù—è–º–∞ –¥–∏–∞–ø–∞–∑–æ–Ω ‚Äû–ø–µ—Ä–∏–æ–¥", –≤ –∫–æ–π—Ç–æ —Ç—è –¥–∞ –≤–∞–ª–∏–¥–∏—Ä–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞—Ç–∞.

**8.2. –ö–∞–∫ –∏–º—É–Ω–∏–∑–∞—Ü–∏–∏—Ç–µ —Å–µ —Å–≤—ä—Ä–∑–≤–∞—Ç —Å PR001/CL132**

–í TProfGraph –ø–µ—Ä–∏–æ–¥—ä—Ç —Å—ä–¥—ä—Ä–∂–∞:

gr.Cl132.FListPr001 ‚Üí –¥–µ–π–Ω–æ—Å—Ç–∏

–ò –∑–∞ –≤—Å–µ–∫–∏ PR001, –∞–∫–æ:

PR001.CL136 = '3'

–∑–Ω–∞—á–∏ –¥–µ–π–Ω–æ—Å—Ç—Ç–∞ –µ –∏–º—É–Ω–∏–∑–∞—Ü–∏—è.

–í –º–æ–º–µ–Ω—Ç–∞ —Ç–≤–æ—è generate engine:

- –¥–æ–±–∞–≤—è –ø–µ—Ä–∏–æ–¥–∞ –≤ ListCurrentProf
- –Ω–µ –∏–∑–≤—ä—Ä—à–≤–∞ —Å–ø–µ—Ü–∏–∞–ª–Ω–æ —Ç—ä—Ä—Å–µ–Ω–µ –Ω–∞ –∏–º—É–Ω–∏–∑–∞—Ü–∏–∏ (—Ç–æ–≤–∞ –µ TODO –∑–∞ –õ–¢–¶)

**8.3. –î–∞–Ω–Ω–∏ –∑–∞ –∏–º—É–Ω–∏–∑–∞—Ü–∏–∏—Ç–µ**

–ò–º—É–Ω–∏–∑–∞—Ü–∏–∏—Ç–µ (–≤ –º–Ω–æ–≥–æ HIS —Å–∏—Å—Ç–µ–º–∏) –∏–º–∞—Ç —Å–ø–µ—Ü–∏–∞–ª–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

TRealExamImmunizationItem

.DATA ‚Üí –¥–∞—Ç–∞ –Ω–∞ –ø–æ—Å—Ç–∞–≤—è–Ω–µ

.CODE ‚Üí –∫–æ–¥ –Ω–∞ –≤–∞–∫—Å–∏–Ω–∞—Ç–∞

–ù–æ –≤ —Ç–≤–æ—è LTC Engine (–Ω–∞ —Ç–æ–∑–∏ –µ—Ç–∞–ø):

- —Ç–µ –Ω–µ —Å–∞ —Å–≤—ä—Ä–∑–∞–Ω–∏ –≤ GeneratePeriod
- PR001 –ª–æ–≥–∏–∫–∞—Ç–∞ –∑–∞ CL136='3' –µ —Ñ–æ—Ä–º–∞–ª–Ω–æ –ø–æ–¥–¥—ä—Ä–∂–∞–Ω–∞, –Ω–æ –Ω–µ –µ –Ω–∞–ø—ä–ª–Ω–æ –¥–æ–≤—ä—Ä—à–µ–Ω–∞

–í—ä–∑–º–æ–∂–Ω–æ —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ:  
**–∏–º–∞–º–µ PR001.Activity_ID ‚Üí –∏–º—É–Ω–∏–∑–∞—Ü–∏–æ–Ω–µ–Ω –∫–æ–¥ ‚Üí —Ç—ä—Ä—Å–µ–Ω–µ –≤ ExamImmunization —Å–ø–∏—Å—ä–∫–∞**

**8.4. –ù–∞–π-–≤–∞–∂–Ω–∏—è—Ç —Å–ø–µ—Ü–∏–∞–ª–µ–Ω —Å–ª—É—á–∞–π: V16**

–ù–µ–∫–∞ —Ñ–æ—Ä–º–∞–ª–∏–∑–∏—Ä–∞–º–µ **–æ—Ñ–∏—Ü–∏–∞–ª–Ω–∞—Ç–∞ –ù–ó–ò–° –ª–æ–≥–∏–∫–∞ –∑–∞ V16**, –∫–∞–∫—Ç–æ –∏ –∫–∞–∫ Engine-—ä—Ç —è —Ä–µ–∞–ª–∏–∑–∏—Ä–∞.

**8.4.1. –ö–∞–∫–≤–æ –µ V16?**

- –ò–º—É–Ω–∏–∑–∞—Ü–∏—è –∑–∞ —Ç–∏–π–Ω–µ–π–¥–∂—ä—Ä–∏
- –ú–æ–∂–µ –¥–∞ —Å–µ –∏–∑–≤—ä—Ä—à–∏ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ **17-25 –≥–æ–¥–∏–Ω–∏**
- –ò–º–∞ –æ—Å–æ–±–µ–Ω–æ—Å—Ç–∏ –≤ event_trigger –∏ repeat_years
- –ù–ó–ò–° –Ω–µ –ø—Ä–∏–∑–Ω–∞–≤–∞ V16, –Ω–∞–ø—Ä–∞–≤–µ–Ω–∞ –ø—Ä–µ–¥–∏ —Å—ä–æ—Ç–≤–µ—Ç–Ω–∞—Ç–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–∞ –≥–æ–¥–∏–Ω–∞

**8.4.2. CL132 –∑–∞ V16**

–¢–∏–ø–∏—á–Ω–æ —Å—ä–¥—ä—Ä–∂–∞:

min_age = 17Y

max_age = 25Y

repeat_years = 1

cl136 = 3 (–∏–º—É–Ω–∏–∑–∞—Ü–∏—è)

event_trigger = –ø (–∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ –Ω–∞—á–∞–ª–æ)

**8.4.3. –ö–∞–∫ –≥–æ –æ–±—Ä–∞–±–æ—Ç–≤–∞ —Ç–≤–æ—è—Ç Engine**

–ù–∞–º–∏—Ä–∞–º–µ –≤ –∫–æ–¥–∞:

if Key <> 'V16' then

// –Ω–æ—Ä–º–∞–ª–Ω–∞ –ª–æ–≥–∏–∫–∞

else

begin

currentMax := DatStrToDays(BrthDate, '24 years');

if event_trigger='–ø' then

currentMax := EndOfAYear(YearOf(currentMax-1));

gr.startDate := currentMin;

gr.endDate := currentMax;

gr.repNumber := -1;

pat.lstGraph.Add(gr);

end;

**–¢–æ–≤–∞ –æ–∑–Ω–∞—á–∞–≤–∞:**

**‚úî –°—Ç–∞—Ä—Ç–æ–≤–∞ –¥–∞—Ç–∞ = –Ω–æ—Ä–º–∞–ª–Ω–∞—Ç–∞ –∑–∞ min_age**

(17 –≥–æ–¥–∏–Ω–∏ ‚Üí –Ω–∞–≤—ä—Ä—à–≤–∞–Ω–µ –∏–ª–∏ 1 —è–Ω—É–∞—Ä–∏ —Å–ø–æ—Ä–µ–¥ trigger)

**‚úî –ö—Ä–∞–π –Ω–∞ –≤–∞–ª–∏–¥–Ω–∏—è –ø–µ—Ä–∏–æ–¥ = 24 –≥–æ–¥–∏–Ω–∏**

(—Ç.–µ. –¥–æ –Ω–∞–≤—ä—Ä—à–≤–∞–Ω–µ –Ω–∞ 25)

**‚úî –ù—è–º–∞ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è**

(—Ä–µ–ø–µ—Ç–∏—Ü–∏–∏—Ç–µ –Ω–µ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç –∑–∞ V16)

**‚úî –ü–µ—Ä–∏–æ–¥—ä—Ç –µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω, –Ω–µ –≥–æ–¥–∏—à–µ–Ω**

–¢–æ–≤–∞ –µ –≤–∞–∂–Ω–æ:  
**V16 –Ω–µ –µ –µ–∂–µ–≥–æ–¥–Ω–∞ –∏–º—É–Ω–∏–∑–∞—Ü–∏—è - —Ç—è –µ –µ–¥–∏–Ω–∏—á–Ω–∞ –≤–∞–∫—Å–∏–Ω–∞, –≤–∞–ª–∏–¥–Ω–∞ –≤ —Ä–∞–º–∫–∏—Ç–µ –Ω–∞ —Ü–µ–ª–∏—è –¥–∏–∞–ø–∞–∑–æ–Ω.**

**8.4.4. –ó–∞—â–æ V16 —Å–µ —Ä–∞–∑–ª–∏—á–∞–≤–∞ –æ—Ç –¥—Ä—É–≥–∏—Ç–µ CL132 –∑–∞–ø–∏—Å–∏?**

–ó–∞—â–æ—Ç–æ:

- –ù–ó–ò–° –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–∞ –≤–∞–∫—Å–∏–Ω–∞—Ç–∞ –∫–∞—Ç–æ ‚Äû–º–æ–∂–µ –¥–∞ —Å–µ –ø–æ—Å—Ç–∞–≤–∏ –≤ –∫–æ–π—Ç–æ –∏ –¥–∞ –µ –º–æ–º–µ–Ω—Ç –æ—Ç —Ç–æ–∑–∏ –≤—ä–∑—Ä–∞—Å—Ç–æ–≤ –¥–∏–∞–ø–∞–∑–æ–Ω"
- –ù–µ —Å–µ –ø—Ä–∏–ª–∞–≥–∞ –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç (–∫–∞–∫—Ç–æ ‚Äû–ø—Ä–µ–≥–ª–µ–¥ –≤—Å—è–∫–∞ –≥–æ–¥–∏–Ω–∞")
- –ü–µ—Ä–∏–æ–¥—ä—Ç –Ω–µ —Å–µ –æ–≥—Ä–∞–Ω–∏—á–∞–≤–∞ –ø–æ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–∏ –≥–æ–¥–∏–Ω–∏

**8.5. –î—Ä—É–≥–∏ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å–ª—É—á–∞–∏ (–∞–∫–æ —Å–µ –¥–æ–±–∞–≤—è—Ç –≤ –±—ä–¥–µ—â–µ)**

–ú–Ω–æ–≥–æ –≤–µ—Ä–æ—è—Ç–Ω–æ –µ –ù–ó–ò–° –¥–∞ –∏–º–∞:

- V17‚Ä¶ V20 (—Å–ø–µ—Ü–∏–∞–ª–Ω–∏ –≤–∞–∫—Å–∏–Ω–∞—Ü–∏–æ–Ω–Ω–∏ –ø–ª–∞–Ω–æ–≤–µ)
- —Ä–µ–≤–∞–∫—Å–∏–Ω–∞—Ü–∏–∏ (–º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–∏ –∏–º—É–Ω–∏–∑–∞—Ü–∏–∏, –∫–æ–∏—Ç–æ –∏–º–∞—Ç delay-based logic)

–í—ä–∑–º–æ–∂–Ω–æ—Å—Ç–∏—Ç–µ –∑–∞ —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ –≤–∫–ª—é—á–≤–∞—Ç:

**‚úî –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ ‚Äû–æ—Ç –• –¥–Ω–∏ —Å–ª–µ–¥ –ø–æ—Å–ª–µ–¥–Ω–∞—Ç–∞ –¥–æ–∑–∞"**

**‚úî –∏–º—É–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–∏ —Å–µ—Ä–∏–∏ (1-–≤–∞ –¥–æ–∑–∞, 2-—Ä–∞ –¥–æ–∑–∞, –±—É—Å—Ç–µ—Ä)**

**‚úî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç –º–µ–∂–¥—É –≤–∞–∫—Å–∏–Ω–∏**

–¢–≤–æ—è—Ç Engine –µ –ø–æ–¥–≥–æ—Ç–≤–µ–Ω –¥–∞ –≤—ä–∑–ø—Ä–∏–µ–º–µ —Ç–∞–∫–∏–≤–∞ –º–æ–¥–µ–ª–∏ —á—Ä–µ–∑:

- repeat_years
- min_interval
- max_interval
- min_age / max_age
- —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞ –≤ CL133 / CL134

**8.6. –ö–∞–∫ UI —Ç—Ä—è–±–≤–∞ –¥–∞ –ø–æ–∫–∞–∑–≤–∞ –∏–º—É–Ω–∏–∑–∞—Ü–∏–∏—Ç–µ**

**–õ–æ–≥–∏—á–Ω–æ UI –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**

- CL132 node ‚Üí ‚Äû–ò–º—É–Ω–∏–∑–∞—Ü–∏—è X"
- PR001 node ‚Üí –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—Ç–∞ –∏–º—É–Ω–∏–∑–∞—Ü–∏—è
- CL088 / CL134 –≤—ä–æ–±—â–µ –Ω–µ —É—á–∞—Å—Ç–≤–∞—Ç
- –ê–∫–æ –∏–º—É–Ω–∏–∑–∞—Ü–∏—è—Ç–∞ –µ –ø–æ—Å—Ç–∞–≤–µ–Ω–∞ ‚Üí ‚úî (–∏–∑–ø—ä–ª–Ω–µ–Ω–æ)
- –ê–∫–æ –Ω–µ –µ ‚Üí ‚¨ú (–Ω–µ–∏–∑–ø—ä–ª–Ω–µ–Ω–æ)
- –ê–∫–æ V16 ‚Üí –≥–æ–ª—è–º –∏–Ω—Ç–µ—Ä–≤–∞–ª, –±–µ–∑ —Ä–∞–∑–±–∏–≤–∫–∏ –ø–æ –≥–æ–¥–∏–Ω–∏

**8.7. –ö–∞–∫–≤–æ –ª–∏–ø—Å–≤–∞ –≤ —Ç–µ–∫—É—â–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –¥–æ–±–∞–≤–∏**

**1) –†–µ–∞–ª–Ω–æ —Ç—ä—Ä—Å–µ–Ω–µ –Ω–∞ –∑–∞–ø–∏—Å–∏—Ç–µ –≤ TRealExamImmunizationItem**

(generate engine –Ω–µ –≥–æ –ø—Ä–∞–≤–∏)

**2) –ú–∞–ø–≤–∞–Ω–µ PR001.Activity_ID ‚Üî Immunization.CODE**

(—Ç—Ä—è–±–≤–∞ —Ç–∞–±–ª–∏—Ü–∞ CL022/CL050)

**3) –û—Ç—Ä–∞–∑—è–≤–∞–Ω–µ –≤ XML ‚Äûperformed immunization"**

(–≤ XML PLANNED_TYPE ‚Üí PERFORMED)

**4) –í—ä–∑–º–æ–∂–Ω–æ—Å—Ç –∑–∞ –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ —Å–µ—Ä–∏–∏ –æ—Ç –≤–∞–∫—Å–∏–Ω–∏**

(–∞–∫–æ –ù–ó–ò–° –≤—ä–≤–µ–¥–∞—Ç multi-dose —Å—Ö–µ–º–∞ - engine –µ –ø–æ—á—Ç–∏ –≥–æ—Ç–æ–≤)

**8.8. –†–µ–∑—é–º–µ –Ω–∞ –°–µ–∫—Ü–∏—è 8**

–ò–º—É–Ω–∏–∑–∞—Ü–∏–∏—Ç–µ —Å–∞ CL136='3' ‚Üí –æ—Ç–¥–µ–ª–Ω–∏ –æ—Ç –ø—Ä–µ–≥–ª–µ–¥–∏ –∏ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è.

–ù–∞–π-–≤–∞–∂–Ω–∏—è—Ç —Å–ø–µ—Ü–∏–∞–ª–µ–Ω —Å–ª—É—á–∞–π –µ V16:

‚Ä¢ –µ–¥–∏–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª, –Ω–µ –µ–∂–µ–≥–æ–¥–µ–Ω

‚Ä¢ 17-25 –≥–æ–¥–∏–Ω–∏

‚Ä¢ endDate = 24Y (–≤ –≥–æ–¥–∏–Ω–∞—Ç–∞ –ø—Ä–µ–¥–∏ 25)

‚Ä¢ –Ω–µ —Å–µ –ø–æ–≤—Ç–∞—Ä—è

‚Ä¢ event_trigger –≤–ª–∏—è–µ —Å–∞–º–æ –Ω–∞ –Ω–∞—á–∞–ª–æ—Ç–æ (1 —è–Ω—É–∞—Ä–∏ —Å—Ä–µ—â—É —Ä–æ–∂–¥–µ–Ω –¥–µ–Ω)

Engine –≤ –º–æ–º–µ–Ω—Ç–∞:

‚Ä¢ —Ä–∞–∑–ø–æ–∑–Ω–∞–≤–∞ V16 –ø—Ä–∞–≤–∏–ª–Ω–æ

‚Ä¢ –º–∞—Ä–∫–∏—Ä–∞ –ø–µ—Ä–∏–æ–¥–∞ –∫–∞—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω

‚Ä¢ –º–æ–∂–µ –¥–∞ –±—ä–¥–µ —Ä–∞–∑—à–∏—Ä–µ–Ω –¥–∞ —Ç—ä—Ä—Å–∏ —Ä–µ–∞–ª–Ω–∏ –∏–º—É–Ω–∏–∑–∞—Ü–∏–∏ –≤ –±–∞–∑–∞—Ç–∞.

**‚úî –°–µ–∫—Ü–∏—è 8 –µ –∑–∞–≤—ä—Ä—à–µ–Ω–∞.**

–ê–∫–æ –∫–∞–∂–µ—à:

**–¥–∞–≤–∞–π 9**

—â–µ –ø—Ä–æ–¥—ä–ª–∂–∞ —Å—ä—Å:

**–°–µ–∫—Ü–∏—è 9 - Risk & Edge Cases (incorrect data, missing ages, overlapping periods, corrupted NZIS rules)**

–°–ª–µ–¥ –∫–æ–µ—Ç–æ –º–æ–∂–µ–º –¥–∞ –ø—Ä–µ–º–∏–Ω–µ–º –∫—ä–º –ø–æ—Å–ª–µ–¥–Ω–∏—Ç–µ —Å–µ–∫—Ü–∏–∏ (10-12) –∏ –Ω–∞ –∫—Ä–∞—è –¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä–∞–º **–≥–æ–ª–µ–º–∏—è –æ–±–µ–¥–∏–Ω–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç DOCX —Å –≤—Å–∏—á–∫–∏ —Å–µ–∫—Ü–∏–∏**.

–ö–∞–∂–∏ —Å–∞–º–æ: **–¥–∞–≤–∞–π 9**.

**–í–∏–µ –∫–∞–∑–∞—Ö—Ç–µ:**

–¥–∞–≤–∞–π 9

**ChatGPT –∫–∞–∑–∞:**

–ü—Ä–æ–¥—ä–ª–∂–∞–≤–∞–º–µ —Å—ä—Å **–°–µ–∫—Ü–∏—è 9**, –µ–¥–Ω–∞ –æ—Ç –Ω–∞–π-–ø–æ–ª–µ–∑–Ω–∏—Ç–µ –∑–∞ —Ä–µ–∞–ª–Ω–∏ —Å–∏—Å—Ç–µ–º–∏, –∑–∞—â–æ—Ç–æ –æ–ø–∏—Å–≤–∞ –≤—Å–∏—á–∫–∏ **risk cases, edge cases –∏ –¥–µ—Ñ–µ–∫—Ç–∏ –≤ –¥–∞–Ω–Ω–∏—Ç–µ**, –∫–æ–∏—Ç–æ –º–æ–≥–∞—Ç –¥–∞ —Å—á—É–ø—è—Ç –ª–æ–≥–∏–∫–∞—Ç–∞ - –∫–∞–∫—Ç–æ –æ—Ç —Å—Ç—Ä–∞–Ω–∞ –Ω–∞ –ù–ó–ò–°, —Ç–∞–∫–∞ –∏ –æ—Ç —Å—Ç—Ä–∞–Ω–∞ –Ω–∞ —Ä–µ–∞–ª–Ω–∏—Ç–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏ –¥–∞–Ω–Ω–∏ (Pregled, ExamAnalysis).

–¢–æ–≤–∞ –µ —Å–µ–∫—Ü–∏—è, –∫–æ—è—Ç–æ –æ—Ç–ª–∏—á–∞–≤–∞ —Å—Ç–∞–±–∏–ª–Ω–∏—è LTC Engine –æ—Ç ‚Äû–∏–≥—Ä–∞—á–∫–∞" - —Ç—É–∫ —Å–µ –≤–∏–∂–¥–∞ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—Ç–∞ –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞—Ç–∞.

**#Ô∏è‚É£ –°–ï–ö–¶–ò–Ø 9 - Risk & Edge Cases**

**_‚Äû–ì—Ä–∞–Ω–∏—á–Ω–∏ —Å–ª—É—á–∞–∏, –Ω–µ–≤–∞–ª–∏–¥–Ω–∏ –¥–∞–Ω–Ω–∏, –Ω–µ–ø—Ä–∞–≤–∏–ª–Ω–∏ –≤—ä–∑—Ä–∞—Å—Ç–∏, –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞—â–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏, –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞ –≤ –ù–ó–ò–°"_**

**9.1. –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∏—Å–∫–æ–≤–∏ —Å–ª—É—á–∞–∏**

Engine-—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–∑–¥—ä—Ä–∂–∞ –Ω–∞ —Å–ª–µ–¥–Ω–∏—Ç–µ –≥—Ä—É–ø–∏ –ø—Ä–æ–±–ª–µ–º–∏:

- **–ì—Ä–µ—à–Ω–∏ –∏–ª–∏ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏ CL132 –∑–∞–ø–∏—Å–∏**
- **–õ–∏–ø—Å–≤–∞—â–∏ PR001 –¥–µ–π–Ω–æ—Å—Ç–∏**
- **–†–∞–∑–∫—ä—Å–∞–Ω–∏ –ø–µ—Ä–∏–æ–¥–∏ (–æ—à–∏–±–∫–∏ –Ω–∞ –ù–ó–ò–°)**
- **–ü—Ä–∏–ø–æ–∫—Ä–∏–≤–∞—â–∏ —Å–µ –≤—ä–∑—Ä–∞—Å—Ç–æ–≤–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏**
- **–ì—Ä–µ—à–Ω–∏ –∏–ª–∏ –ª–∏–ø—Å–≤–∞—â–∏ –ø—Ä–µ–≥–ª–µ–¥–∏ –æ—Ç —Ä–µ–∞–ª–Ω–∏—è HIS**
- **–ò–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è —Å –≥—Ä–µ—à–µ–Ω –∫–æ–¥, –∏–∑–≤—ä–Ω –ø–µ—Ä–∏–æ–¥**
- **–†–∞–∑–ª–∏–∫–∏ –≤ –Ω–∞—á–∞–ª–Ω–∏—Ç–µ –≥–æ–¥–∏–Ω–∏ –º–µ–∂–¥—É –ù–ó–ò–° –∏ –ª–æ–∫–∞–ª–Ω–∏—è engine**
- **–ü–∞—Ü–∏–µ–Ω—Ç –±–µ–∑ –¥–∞—Ç–∞ –Ω–∞ —Ä–∞–∂–¥–∞–Ω–µ / –≥—Ä–µ—à–Ω–æ –ï–ì–ù**
- **–ü–µ—Ä–∏–æ–¥–∏, –∏–∑–ª–∏–∑–∞—â–∏ –∏–∑–≤—ä–Ω –º–∞–∫—Å–∏–º–∞–ª–Ω–∏—è —á–æ–≤–µ—à–∫–∏ –∂–∏–≤–æ—Ç**
- **V16, A1, JM1 - —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å–ª—É—á–∞–∏, –∫–æ–∏—Ç–æ —á–µ—Å—Ç–æ —Å–µ —á—É–ø—è—Ç –ø—Ä–∏ –ø—Ä–æ–º—è–Ω–∞ –Ω–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è—Ç–∞**

**9.2. Edge case: CL132 –±–µ–∑ min_age –∏–ª–∏ max_age**

–ù—è–º–∞ –≥–∞—Ä–∞–Ω—Ü–∏—è, —á–µ –ù–ó–ò–° –Ω—è–º–∞ –¥–∞ –ø—Ä–æ–ø—É—Å–Ω–µ –ø–æ–ª–µ –≤ –±—ä–¥–µ—â–∞ –≤–µ—Ä—Å–∏—è.  
–õ–æ–≥–∏–∫–∞:

**‚úî –ê–∫–æ –ª–∏–ø—Å–≤–∞ min_age ‚Üí –ø—Ä–∏–µ–º–∞ —Å–µ ‚Äû–æ—Ç —Ä–∞–∂–¥–∞–Ω–µ—Ç–æ"**

**‚úî –ê–∫–æ –ª–∏–ø—Å–≤–∞ max_age ‚Üí –∏–∑–ø–æ–ª–∑–≤–∞ —Å–µ fallback: 120 –≥–æ–¥–∏–Ω–∏**

–í —Ç–≤–æ—è –∫–æ–¥:

maxLive := DatStrToDays(BrthDate, '120 year');

–¢–æ–≤–∞ –µ –ø—Ä–∞–≤–∏–ª–Ω–æ.

**9.3. Edge case: repeat_years = '' (–ø—Ä–∞–∑–Ω–æ)**

–¢–æ–≤–∞ –æ–∑–Ω–∞—á–∞–≤–∞:

- –ø–ª–∞–Ω—ä—Ç –µ –µ–¥–Ω–æ–∫—Ä–∞—Ç–µ–Ω
- –Ω–µ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –≥–µ–Ω–µ—Ä–∏—Ä–∞—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è

Engine:

repNumber := -1

–¢–æ–≤–∞ –µ –∏–¥–µ–∞–ª–Ω–æ - —è—Å–Ω–æ –∏ –Ω–µ–¥–≤—É—Å–º–∏—Å–ª–µ–Ω–æ.

**9.4. –ì—Ä–µ—à–∫–∏ –≤ CL132: –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏ –≤—ä–∑—Ä–∞—Å—Ç–æ–≤–∏ —Ñ–æ—Ä–º–∞—Ç–∏**

–ù–∞–ø—Ä.:

- "1 –º–µ—Å–µ—Ü" –≤–º–µ—Å—Ç–æ "1M"
- "–ø—Ä–µ–¥–∏ 2 –≥." (–≤ —Å—Ç–∞—Ä–∏—Ç–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- "m1" –≤–º–µ—Å—Ç–æ "1M"
- –ª–∏–ø—Å–≤–∞—â–∞ –±—É–∫–≤–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü–∞

**Engine-—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ —Ñ–∏–ª—Ç—Ä–∏—Ä–∞ –∏–ª–∏ –¥–∞ –∏–≥–Ω–æ—Ä–∏—Ä–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω–∏ —Ñ–æ—Ä–º–∞—Ç–∏.**

–¢–≤–æ—è—Ç –º–µ—Ç–æ–¥ DatStrToDays –∏–∑–ø–æ–ª–∑–≤–∞ –º–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç split –∏ case:

ArrStr := str.Split(\[' '\]);

Period := ArrStr\[1\];

–ù–æ CL132 —Ä–µ–∞–ª–Ω–æ –∏–∑–ø–æ–ª–∑–≤–∞ —Ñ–æ—Ä–º–∞—Ç–∏:

"1 year"

"6 month"

"10-12 month"

"12-15 month"

"+1Y"

–¢.–µ. –º–∞—Å–∏–≤—ä—Ç arr\[0\], arr\[1\] –Ω–µ –≤–∏–Ω–∞–≥–∏ –µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞–Ω.

**–í—ä–∑–º–æ–∂–Ω–æ—Å—Ç –∑–∞ —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ:** –¥–∞ —Å–µ –Ω–∞–ø—Ä–∞–≤–∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª–µ–Ω AgeParser (–≤ –°–µ–∫—Ü–∏—è 4 –≤–µ—á–µ –¥–µ—Ñ–∏–Ω–∏—Ä–∞–Ω —Ñ–æ—Ä–º–∞–ª–Ω–æ).

**9.5. Edge case: –ü—Ä–∏–ø–æ–∫—Ä–∏–≤–∞—â–∏ —Å–µ –ø–µ—Ä–∏–æ–¥–∏ –≤ CL132**

–ü—Ä–∏–º–µ—Ä:

C12 12-15 –º–µ—Å–µ—Ü–∞

C13 13-18 –º–µ—Å–µ—Ü–∞

–¢—É–∫ –∏–º–∞ **–∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–µ** - –ù–ó–ò–° –≥–æ –ø—Ä–∞–≤–∏ –Ω–∞—Ä–æ—á–Ω–æ.

Engine—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ –≥–∏ —Ç—Ä–µ—Ç–∏—Ä–∞ –∫–∞—Ç–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º–∏ –ø–µ—Ä–∏–æ–¥–∏.

–¢–≤–æ—è—Ç –∫–æ–¥ –≥–æ –ø—Ä–∞–≤–∏ –ø—Ä–∞–≤–∏–ª–Ω–æ - –≤—Å–µ–∫–∏ CL132 —Å–µ —Ä–∞–∑–≥–ª–µ–∂–¥–∞ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª–Ω–æ.

**9.6. Edge case: –ü—Ä–µ–≥–ª–µ–¥–∏, –≤—ä–≤–µ–¥–µ–Ω–∏ –≤ –≥—Ä–µ—à–µ–Ω –ø–µ—Ä–∏–æ–¥**

–ß–µ—Å—Ç–æ —Å—Ä–µ—â–∞–Ω–æ –≤ —Ä–µ–∞–ª–Ω–∏—è –∂–∏–≤–æ—Ç:

- –õ–µ–∫–∞—Ä—è—Ç –µ –Ω–∞–ø–∏—Å–∞–ª –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ–Ω –ø—Ä–µ–≥–ª–µ–¥, –Ω–æ –¥–∞—Ç–∞—Ç–∞ –µ –∏–∑–≤—ä–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
- –∏–ª–∏ –µ –∑–∞–∫—ä—Å–Ω—è–ª —Å –≤—ä–≤–µ–∂–¥–∞–Ω–µ—Ç–æ
- –∏–ª–∏ –µ –∏–∑–ø–æ–ª–∑–≤–∞–Ω –≥—Ä–µ—à–µ–Ω —Ç–∏–ø –ø—Ä–µ–≥–ª–µ–¥

–¢–≤–æ—è—Ç engine –ù–ï –¥–æ–ø—É—Å–∫–∞ ‚Äû—à–∏—Ä–æ–∫–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏", –∞ –ø—Ä–∏–ª–∞–≥–∞ —Å—Ç—Ä–æ–≥–∞—Ç–∞ —Ñ–æ—Ä–º—É–ª–∞:

if prStartDate >= startDate AND prStartDate <= endDate:

match

else:

ignore

–¢–æ–≤–∞ –µ **–ø—Ä–∞–≤–∏–ª–Ω–æ**.

**9.7. Edge case: –î–≤–∞ –ø—Ä–µ–≥–ª–µ–¥–∞ –≤ –µ–¥–∏–Ω –∏ —Å—ä—â–∏ –ø–µ—Ä–∏–æ–¥**

–ü—Ä–∏–º–µ—Ä:

–ü–∞—Ü–∏–µ–Ω—Ç –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª 1.01-31.12  
–õ–µ–∫–∞—Ä—è—Ç –µ –ø–∏—Å–∞–ª 2 –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–Ω–∏ –ø—Ä–µ–≥–ª–µ–¥–∞.

Engine –æ—Ç–∫—Ä–∏–≤–∞ —Ç–æ–≤–∞:

if dataNast.DataPos != MaxInt:

ShowMessage('–ò–º–∞ –ø–æ–≤–µ—á–µ –æ—Ç –µ–¥–∏–Ω –ø—Ä–µ–≥–ª–µ–¥')

–¢–æ–≤–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç—è–≤–∞ –æ–±—ä—Ä–∫–≤–∞–Ω–µ –∏ –≥—Ä–µ—à–Ω–æ –ø–æ–ø—ä–ª–≤–∞–Ω–µ –Ω–∞ XML.

**9.8. Edge case: –ò–∑—Å–ª–µ–¥–≤–∞–Ω–µ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª–µ–Ω CL22 –∫–æ–¥**

–ü–æ–Ω—è–∫–æ–≥–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏—Ç–µ –≤—Ä—ä—â–∞—Ç –≥—Ä–µ—à–µ–Ω CL22 –∫–æ–¥, –∏–ª–∏ HIS –Ω–µ –µ –æ–±–Ω–æ–≤–µ–Ω.

Engine –ø—Ä–∞–≤–∏–ª–Ω–æ –ø—Ä–∞–≤–∏:

if cl22Exam != pr001.Activity_ID ‚Üí skip

–¢–æ–≤–∞ –µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–Ω–æ—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.

**9.9. Edge case: –ü–µ—Ä–∏–æ–¥–∏ –∏–∑–≤—ä–Ω StartNzisData**

–ò–∑–ø–∏—Ç–∞–Ω–∏—è—Ç –ø—Ä–æ–±–ª–µ–º:

–ù–ó–ò–° –µ –∑–∞–ø–æ—á–Ω–∞–ª –ø–ª–∞–Ω–∏—Ä–∞–Ω–µ –æ—Ç –ø–æ-–∫—ä—Å–Ω–∞ –≥–æ–¥–∏–Ω–∞ –æ—Ç —Ç–∞–∑–∏, –≤ –∫–æ—è—Ç–æ engine-—ä—Ç –±–∏ –∏–∑—á–∏—Å–ª–∏–ª –ø–µ—Ä–∏–æ–¥

–¢–≤–æ—è—Ç –∫–æ–¥:

if gr.startDate >= StartNzisData then

add to lstGraph

–¢–æ–≤–∞ –µ –∏–¥–µ–∞–ª–Ω–æ—Ç–æ —Ä–µ—à–µ–Ω–∏–µ.

**9.10. Edge case: –ü–∞—Ü–∏–µ–Ω—Ç –±–µ–∑ EGN –∏–ª–∏ —Å –≥—Ä–µ—à–Ω–æ –ï–ì–ù**

–ê–∫–æ –ª–∏–ø—Å–≤–∞ –ï–ì–ù:

- BirthDate –º–æ–∂–µ –¥–∞ –µ –ø—Ä–∞–∑–µ–Ω
- Engine –º–æ–∂–µ –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏ –ø–µ—Ä–∏–æ–¥–∏ ‚Äû–æ—Ç –Ω—É–ª–∞"

–ù–æ –≤ –ø—Ä–∞–∫—Ç–∏–∫–∞—Ç–∞:

- –ø–∞—Ü–∏–µ–Ω—Ç –±–µ–∑ –¥–∞—Ç–∞ –Ω–∞ —Ä–∞–∂–¥–∞–Ω–µ ‚Üí –Ω–µ —Å–µ –ø—Ä–∞–≤–∏ LTC
- engine –º–æ–∂–µ –¥–∞ —Å–ª–æ–∂–∏ –∑–∞—â–∏—Ç–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞:

if not ValidBirthDate then exit;

**9.11. Edge case: CL132 —Å –Ω–µ–ø—Ä–∞–≤–∏–ª–µ–Ω event_trigger**

–í–º–µ—Å—Ç–æ '–ø' –∏–ª–∏ '—Ä', –ø–æ–Ω—è–∫–æ–≥–∞ –ù–ó–ò–° –≤—Ä—ä—â–∞:

- –ü—Ä–∞–∑–Ω–æ –ø–æ–ª–µ
- ‚Äû–ø—Ä–∏"
- ‚Äû—Ä–æ–∂–¥"

–¢–≤–æ—è—Ç engine –∏–∑–ø–æ–ª–∑–≤–∞:

getAnsiStringMap(...)\[1\]

–∏ –≥–ª–µ–¥–∞ —Å–∞–º–æ –ø—ä—Ä–≤–∞—Ç–∞ –±—É–∫–≤–∞ ‚Üí –∫–æ–µ—Ç–æ –µ –≤—Å—ä—â–Ω–æ—Å—Ç –ø—Ä–∞–≤–∏–ª–Ω–æ, –∑–∞—â–æ—Ç–æ —Ñ–∏–ª—Ç—Ä–∏—Ä–∞ –¥–æ:

- '–ø' ‚Üí –∫–∞–ª–µ–Ω–¥–∞—Ä
- '—Ä' ‚Üí —Ä–æ–∂–¥–µ–Ω –¥–µ–Ω
- anything else ‚Üí default

**9.12. Edge case: Period endDate < startDate**

–ú–æ–∂–µ –¥–∞ —Å–µ —Å–ª—É—á–∏ –≤ rare cases:

- min_age > max_age –ø–æ—Ä–∞–¥–∏ –≥—Ä–µ—à–∫–∞
- V16-like plans –±–µ–∑ —Å–ø–µ—Ü–∏–∞–ª–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞

Engine –º–æ–∂–µ –¥–∞ –ø—Ä–æ–≤–µ—Ä–∏:

if endDate <= startDate then skip

–¢–≤–æ—è—Ç engine –≥–æ –∏–∑–±—è–≥–≤–∞, –∑–∞—â–æ—Ç–æ —Ñ–æ—Ä–º—É–ª–∏—Ç–µ —Å–∞ —Å—Ç–∞–±–∏–ª–Ω–∏ —Å –Ω–æ—Ä–º–∞–ª–Ω–∏—Ç–µ CL132.

**9.13. Edge case: –ü–∞—Å–ø–æ—Ä—Ç–Ω–∏ –≥—Ä–µ—à–∫–∏ - –¥–≤–æ–π–Ω–∏ CL132 –∑–∞ –µ–¥–Ω–∞ –∏ —Å—ä—â–∞ –≥—Ä—É–ø–∞**

–ù–∞–ø—Ä. –¥–≤–µ CL132 –∑–∞–ø–∏—Å–∏ –∑–∞ –µ–¥–Ω–∞ –∏ —Å—ä—â–∞ –≤—ä–∑—Ä–∞—Å—Ç–æ–≤–∞ –≥—Ä—É–ø–∞, —Å –º–∞–ª–∫–∏ —Ä–∞–∑–ª–∏–∫–∏ –≤ –∫–ª—é—á–∞.

Engine –ø—Ä–∞–≤–∏–ª–Ω–æ –æ—Ç–¥–µ–ª—è:

- Cl132.Key ‚Üí —É–Ω–∏–∫–∞–ª–µ–Ω –∑–∞–ø–∏—Å
- start/end ‚Üí –∑–∞–≤–∏—Å–∏ —Å–∞–º–æ –æ—Ç —Ç–æ–∑–∏ –∑–∞–ø–∏—Å

**9.14. Edge case: –†–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∑–∞ PR001 —Å—ä—Å —Å–ø–µ—Ü–∏–∞–ª–Ω–æ —É—Å–ª–æ–≤–∏–µ –≤ Rules**

PR001.Rules –º–æ–∂–µ –¥–∞ —Å—ä–¥—ä—Ä–∂–∞:

CL088 –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

–°–ø–µ—Ü–∏–∞–ª–µ–Ω –∫–ª—é—á

–£—Å–ª–æ–≤–∏–µ –ø–æ –ø–æ–ª

–ö–æ–¥—ä—Ç:

if Pos(ACL088_key, Rule88) = 0 then Continue

–µ –ø—Ä–∞–≤–∏–ª–µ–Ω - –∏–∑–∫–ª—é—á–≤–∞ –Ω–µ—Å—ä–≤–º–µ—Å—Ç–∏–º–∏—Ç–µ CL088.

**9.15. Edge case: ‚Äû–ù—è–º–∞ –Ω–∏–∫–∞–∫—ä–≤ –ø–ª–∞–Ω" (–ø–∞—Ü–∏–µ–Ω—Ç –Ω–µ –ø–æ–ø–∞–¥–∞ –≤ –Ω–∏—Ç–æ –µ–¥–∏–Ω CL132)**

–°–ª—É—á–≤–∞ —Å–µ –ø—Ä–∏:

- –ª–∏–ø—Å–∞ –Ω–∞ CL132 –∑–∞ –≤—ä–∑—Ä–∞—Å—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—Ç–∞
- –ø–æ–≤—Ä–µ–¥–µ–Ω–∏ CL132 –∑–∞–ø–∏—Å–∏
- –ø–∞—Ü–∏–µ–Ω—Ç —Å –µ–∫—Å—Ç—Ä–µ–º–Ω–∞ –≤—ä–∑—Ä–∞—Å—Ç, –Ω–∞–ø—Ä. 200 –≥–æ–¥–∏–Ω–∏ (–≥—Ä–µ—à–Ω–æ –ï–ì–ù)

Engine –ø–æ–∫–∞–∑–≤–∞:

ShowMessage('–ù—è–º–∞ –Ω–∏–∫–∞–∫—ä–≤ –ø–ª–∞–Ω')

–ú–æ–∂–µ –¥–∞ —Å–µ –¥–æ–±–∞–≤–∏ fallback:

NoteProf = "–ü–∞—Ü–∏–µ–Ω—Ç—ä—Ç –Ω—è–º–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–Ω–∏ –ø–ª–∞–Ω–æ–≤–µ –∑–∞ —Ç–∞–∑–∏ –≤—ä–∑—Ä–∞—Å—Ç."

**9.16. Edge case: –ü–µ—Ä–∏–æ–¥ —Å –ø—Ä–æ–ø—É—Å–Ω–∞—Ç–∞ –≥–æ–¥–∏–Ω–∞ –∏–ª–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª**

CL132 –ø–æ–Ω—è–∫–æ–≥–∞ –ø—Ä–∞–≤–∏:

- 18-65 –≥–æ–¥–∏–Ω–∏ ‚Üí –µ–∂–µ–≥–æ–¥–Ω–æ
- –ø—Ä–æ–ø—É—Å–∫–∞ –≥–æ–¥–∏–Ω–∞ (–æ—à–∏–±–∫–∞)
- –∏–ª–∏ –≤—ä–≤–µ–∂–¥–∞ –Ω–µ—Ä–µ–¥–æ–≤–Ω–æ repeat_years

Engine –¥–µ–ª–∏:

currentMin := IncYear(currentMin, rep);

–¢–∞–∫–∞:

- –Ω–µ–≤—ä–∑–º–æ–∂–Ω–æ –µ –¥–∞ —Å–µ –ø—Ä–æ–ø—É—Å–Ω–∞—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
- –≤–∏–Ω–∞–≥–∏ –≥–µ–Ω–µ—Ä–∏—Ä–∞ –ø—ä–ª–Ω–∞ —Å–µ—Ä–∏—è

**9.17. Edge case: –ù–ó–ò–° –≤—ä–≤–µ–∂–¥–∞ –Ω–æ–≤–∏ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç**

–ù–∞–π-—á–µ—Å—Ç–∏—è—Ç –ø—Ä–æ–±–ª–µ–º –≤ —Ä–µ–∞–ª–Ω–∏—è —Å–≤—è—Ç.

–ù–æ Engine –µ —É—Å—Ç–æ–π—á–∏–≤, –∑–∞—â–æ—Ç–æ:

- —Ä–∞–±–æ—Ç–∏ –≤—ä—Ä—Ö—É –¥–∞–Ω–Ω–∏—Ç–µ, –∞ –Ω–µ –≤—ä—Ä—Ö—É –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª–Ω–æ –∫–æ–¥–∏—Ä–∞–Ω–∏ –ø—Ä–∞–≤–∏–ª–∞
- CL132 –µ —Ü–µ–Ω—Ç—Ä–∞–ª–µ–Ω –∏–∑—Ç–æ—á–Ω–∏–∫
- PR001/CL142 –∑–∞–¥–∞–≤–∞—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—Ç–∞ –∏–∑–ø—ä–ª–Ω–∏–º–∞ —á–∞—Å—Ç
- special cases (V16, A1) —Å–∞ –∏–∑–æ–ª–∏—Ä–∞–Ω–∏ –∏ –ª–µ—Å–Ω–æ –æ–±–Ω–æ–≤—è–µ–º–∏

–¢–æ–≤–∞ –ø—Ä–∞–≤–∏ —Å–∏—Å—Ç–µ–º–∞—Ç–∞ future-proof.

**‚úî –°–µ–∫—Ü–∏—è 9 –µ –∑–∞–≤—ä—Ä—à–µ–Ω–∞.**

–ê–∫–æ –∫–∞–∂–µ—à:

**–¥–∞–≤–∞–π 10**

—â–µ –ø—Ä–æ–¥—ä–ª–∂–∞ —Å—ä—Å:

**–°–µ–∫—Ü–∏—è 10 - Performance & Scalability (10 000 –ø–∞—Ü–∏–µ–Ω—Ç–∏, 0.22 ms/–ø–∞—Ü–∏–µ–Ω—Ç)**

–°–ª–µ–¥ –°–µ–∫—Ü–∏—è 12 ‚Üí —â–µ –≥–µ–Ω–µ—Ä–∏—Ä–∞–º –ø—ä–ª–Ω–∏—è –≥–æ–ª—è–º DOCX –¥–æ–∫—É–º–µ–Ω—Ç —Å –≤—Å–∏—á–∫–∏ —Å–µ–∫—Ü–∏–∏.

**–í–∏–µ –∫–∞–∑–∞—Ö—Ç–µ:**

–¥–∞–≤–∞–π 10

**ChatGPT –∫–∞–∑–∞:**

–ü—Ä–æ–¥—ä–ª–∂–∞–≤–∞–º–µ —Å—ä—Å **–°–µ–∫—Ü–∏—è 10**, –∫—ä–¥–µ—Ç–æ –æ–ø–∏—Å–≤–∞–º–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç—Ç–∞ –∏ —Å–∫–∞–ª–∏—Ä—É–µ–º–æ—Å—Ç—Ç–∞ –Ω–∞ LTC Engine - —Ç–æ–≤–∞ –µ –∏–∑–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ –≤–∞–∂–Ω–æ, –∑–∞—â–æ—Ç–æ —Ç–≤–æ—è—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∏ —Å —Ä–µ–∞–ª–Ω–∏ –ª–∏—Å—Ç–∏ –æ—Ç **–¥–æ 10 000 –ø–∞—Ü–∏–µ–Ω—Ç–∏** –∑–∞ –µ–¥–Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞, –∞ –Ω—è–∫–æ–∏ –≥–æ–ª–µ–º–∏ –õ–ó –∏–º–∞—Ç –∏ –ø–æ–≤–µ—á–µ.

–¢–∞–∑–∏ —Å–µ–∫—Ü–∏—è –µ —Å—ä—â–æ –º–Ω–æ–≥–æ –≤–∞–∂–Ω–∞ –∑–∞ –±—ä–¥–µ—â–∞ –º–∏–≥—Ä–∞—Ü–∏—è –∫—ä–º server-side –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –∏–ª–∏ batch –∏–∑—á–∏—Å–ª–µ–Ω–∏—è –ø–æ –≥—Ä–∞—Ñ–∏–∫.

**#Ô∏è‚É£ –°–ï–ö–¶–ò–Ø 10 - Performance & Scalability**

**_‚Äû–ö–∞–∫ LTC Engine –ø–æ—Å—Ç–∏–≥–∞ 0.22 ms –Ω–∞ –ø–∞—Ü–∏–µ–Ω—Ç –∏ –∫–∞–∫ —Å–µ —Å–∫–∞–ª–∏—Ä–∞ –¥–æ 10 000 –ø–∞—Ü–∏–µ–Ω—Ç–∏"_**

**10.1. –†–µ–∞–ª–Ω–∏ –∏–∑–º–µ—Ä–µ–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏**

–û—Ç —Ç–≤–æ—è—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:

- **–°—Ä–µ–¥–Ω–æ –≤—Ä–µ–º–µ –∑–∞ –ø—Ä–µ—Å–º—è—Ç–∞–Ω–µ –Ω–∞ –µ–¥–∏–Ω –ø–∞—Ü–∏–µ–Ω—Ç: ~0.220 ms**
- –¢–æ–≤–∞ –æ–∑–Ω–∞—á–∞–≤–∞:

1000 –ø–∞—Ü–∏–µ–Ω—Ç–∏ ‚Üí ~0.22 —Å–µ–∫—É–Ω–¥–∏

5000 –ø–∞—Ü–∏–µ–Ω—Ç–∏ ‚Üí ~1.1 —Å–µ–∫—É–Ω–¥–∏

10000 –ø–∞—Ü–∏–µ–Ω—Ç–∏ ‚Üí ~2.2 —Å–µ–∫—É–Ω–¥–∏

–¢–æ–≤–∞ –µ _–∏–∑–∫–ª—é—á–∏—Ç–µ–ª–Ω–æ –¥–æ–±—Ä–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç_, –ø—Ä–µ–¥–≤–∏–¥ —Å–ª–æ–∂–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ –∞–ª–≥–æ—Ä–∏—Ç—ä–º–∞ (–ø–ª–∞–Ω–∏—Ä–∞–Ω–µ + –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ + matching).

**10.2. –§–∞–∫—Ç–æ—Ä–∏, –∫–æ–∏—Ç–æ –ø—Ä–∞–≤—è—Ç Engine-–∞ —Ç–æ–ª–∫–æ–≤–∞ –±—ä—Ä–∑**

**‚úî 1) CL132 —Å–ø–∏—Å—ä–∫—ä—Ç —Å–µ –æ–±—Ä–∞–±–æ—Ç–≤–∞ –≤–µ–¥–Ω—ä–∂, –Ω–µ –Ω–∞ –≤—Å–µ–∫–∏ –ø–∞—Ü–∏–µ–Ω—Ç**

–ù–∞–π-—Ç–µ–∂–∫–∞—Ç–∞ —á–∞—Å—Ç - –ø–∞—Ä—Å–≤–∞–Ω–µ –Ω–∞ –≤—ä–∑—Ä–∞—Å—Ç–∏—Ç–µ, –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ repeat –ø–µ—Ä–∏–æ–¥–∏ –∑–∞ –≤—Å–µ–∫–∏ CL132 - –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –∫–µ—à–∏—Ä–∞–Ω–∞.

–í —Ç–≤–æ—è engine —Ç–æ–≤–∞ —Å–µ –ø—Ä–∞–≤–∏ –∏–º–ø–ª–∏—Ü–∏—Ç–Ω–æ:

- —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ CL132 ‚Üí PR001 ‚Üí CL142 ‚Üí CL088 ‚Üí CL134 —Å–µ –∏–∑—á–∏—Å–ª—è–≤–∞ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ
- GeneratePeriod –Ω–µ —è –ø—Ä–µ—Å—ä–∑–¥–∞–≤–∞ –æ—Ç –Ω—É–ª–∞—Ç–∞

–¢–∞–∫–∞ –Ω–∞ –Ω–∏–≤–æ –ø–∞—Ü–∏–µ–Ω—Ç —Å–µ –æ–±—Ä–∞–±–æ—Ç–≤–∞—Ç —Å–∞–º–æ:

- birthdate
- –Ω–µ–≥–æ–≤–∏—Ç–µ –ø–µ—Ä–∏–æ–¥–∏
- –Ω–µ–≥–æ–≤–∏—Ç–µ –ø—Ä–µ–≥–ª–µ–¥–∏/–∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è

**‚úî 2) –ê–ª–≥–æ—Ä–∏—Ç—ä–º—ä—Ç –µ –ª–∏–Ω–µ–µ–Ω —Å–ø—Ä—è–º–æ –±—Ä–æ—è –Ω–∞ CL132, –Ω–µ –∫–≤–∞–¥—Ä–∞—Ç–∏—á–µ–Ω**

–í GeneratePeriod:

for each CL132:

calculate periods

–í—Ä—ä–∑–∫–∏—Ç–µ —Å PR001, CL142, CL088 —Å–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª–Ω–æ –ø–æ–¥—Ä–µ–¥–µ–Ω–∏.

–ó–∞—Ç–æ–≤–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç—Ç–∞ –µ:

O(#CL132_per_patient) = O(50-120) —Ä–µ–∞–ª–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏

**‚úî 3) –í—Å–∏—á–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ä—Ä—Ö—É –¥–∞—Ç–∏ —Å–∞ –ø—Ä–æ—Å—Ç–∏ (–¥–æ–±–∞–≤—è–Ω–µ –Ω–∞ –≥–æ–¥–∏–Ω–∏/–º–µ—Å–µ—Ü–∏)**

Delphi —Ñ—É–Ω–∫—Ü–∏–∏ –∫–∞—Ç–æ IncYear, IncMonth —Å–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–∞–Ω–∏ –Ω–∞ –Ω–∏–≤–æ RTL.

**‚úî 4) Matching —Å Pregled –∏ ExamAnalysis –µ –¥–æ–±—Ä–µ –æ—Ä–≥–∞–Ω–∏–∑–∏—Ä–∞–Ω**

–ü—Ä–∏ –ø–∞—Ü–∏–µ–Ω—Ç:

for each pregled:

compare date ‚àà interval

–¢–æ–≤–∞ –µ –ª–∏–Ω–µ–µ–Ω —Å–∫–∞–Ω–∏—Ä–∞—â –∞–ª–≥–æ—Ä–∏—Ç—ä–º, –∫–æ–π—Ç–æ –µ –º–Ω–æ–≥–æ –±—ä—Ä–∑ –ø—Ä–∏ –¥–∞–Ω–Ω–∏ –¥–æ ~500 –∑–∞–ø–∏—Å–∏.

**‚úî 5) –ù—è–º–∞ –¥–∏–Ω–∞–º–∏—á–Ω–∏ –∞–ª–æ–∫–∞—Ü–∏–∏ –≤ –≥–æ—Ä–µ—â–∏—è —Ü–∏–∫—ä–ª**

–¢–∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª–Ω–æ —Å—ä–∑–¥–∞–≤–∞—à:

TGraphPeriod132

–∏ —Å–∞–º–æ –ø–æ–ø—ä–ª–≤–∞—à —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ - –±–µ–∑ —Ç–µ–∂–∫–∏ –æ–±–µ–∫—Ç–∏ –≤—ä—Ç—Ä–µ.

**10.3. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª–Ω–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –∫–æ–∏—Ç–æ –º–æ–≥–∞—Ç –¥–∞ –¥–∞–¥–∞—Ç +300-500% —Å–∫–æ—Ä–æ—Å—Ç**

**‚úî 1) –ö–µ—à–∏—Ä–∞–Ω–µ –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ –∑–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∏ –±–µ–∑ –ø—Ä–æ–º–µ–Ω–∏**

–ê–∫–æ –ø–∞—Ü–∏–µ–Ω—Ç –Ω—è–º–∞ –Ω–æ–≤ –ø—Ä–µ–≥–ª–µ–¥ –æ—Ç –≤—Ä–µ–º–µ—Ç–æ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–æ—Ç–æ –ø—Ä–µ–∏–∑—á–∏—Å–ª–µ–Ω–∏–µ ‚Üí –Ω—è–º–∞ –Ω—É–∂–¥–∞ –¥–∞ —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞ GeneratePeriod.

**‚úî 2) –ü–∞—Ä–∞–ª–µ–ª–∏–∑–∞—Ü–∏—è**

–ü—Ä–∏ 10 000 –ø–∞—Ü–∏–µ–Ω—Ç–∏:

Parallel.ForEach(patientList, GeneratePeriod)

–ü—Ä–∏ 8-—è–¥—Ä–µ–Ω CPU:

- –º–æ–∂–µ –¥–∞ –ø–∞–¥–Ω–µ –¥–æ ~0.3 —Å–µ–∫—É–Ω–¥–∏ –∑–∞ 10 000 –ø–∞—Ü–∏–µ–Ω—Ç–∏
- –≤—Å–∏—á–∫–æ –µ thread-safe, –∞–∫–æ –Ω–µ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç –≥–ª–æ–±–∞–ª–Ω–∏ –±—É—Ñ–µ—Ä–∏

**‚úî 3) –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª–Ω–æ –ø–∞—Ä—Å–≤–∞–Ω–µ –Ω–∞ –≤—Å–∏—á–∫–∏ min_age/max_age –≤ CL132**

–í –º–æ–º–µ–Ω—Ç–∞:

- –ø–∞—Ä—Å–≤–∞–Ω–µ—Ç–æ –µ –º–Ω–æ–≥–æ –±—ä—Ä–∑–æ
- –Ω–æ –∞–∫–æ —Å–µ –ø—Ä–µ–º–µ—Å—Ç–∏ –≤ init —Ñ–∞–∑–∞ ‚Üí 5-20% —É—Å–∫–æ—Ä–∏ —Ü–∏–∫—ä–ª–∞

**‚úî 4) –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞ DatStrToDays**

–¢–æ–≤–∞ –µ ‚Äû–Ω–∞–π-–≥–æ—Ä–µ—â–∞—Ç–∞" —Ñ—É–Ω–∫—Ü–∏—è.

–†–∞–∑–¥–µ–ª—è–Ω–µ ‚Üí —Ç—ä–ª–∫—É–≤–∞–Ω–µ ‚Üí –¥–æ–±–∞–≤—è–Ω–µ –Ω–∞ offset-–∏ –º–æ–∂–µ –¥–∞ —Å–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–∞:

- —á—Ä–µ–∑ lookup —Ç–∞–±–ª–∏—Ü–∞ –∑–∞ ‚Äû1Y", ‚Äû6M", ‚Äû1Y6M"
- regex-free parsing

**10.4. –°–∫–∞–ª–∏—Ä–∞–Ω–µ –¥–æ 100 000 –ø–∞—Ü–∏–µ–Ω—Ç–∏ (–≤ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∏—Ä–∞–Ω HIS)**

–í–∞–∂–Ω–æ –∑–∞ –±—ä–¥–µ—â–∞ –æ–±–ª–∞—á–Ω–∞ –≤–µ—Ä—Å–∏—è –Ω–∞ –•–∏–ø–æ–∫—Ä–∞—Ç.

**–í—Ä–µ–º–µ–Ω–∞ (–ø—Ä–æ–≥–Ω–æ–∑–Ω–∏):**

| **–ë—Ä–æ–π –ø–∞—Ü–∏–µ–Ω—Ç–∏** | **–í—Ä–µ–º–µ, single-thread** | **Multi-thread (8 —è–¥—Ä–∞)** |
| --- | --- | --- |
| 10 000 | ~2.2 s | ~0.3 s |
| 20 000 | ~4.4 s | ~0.6 s |
| 50 000 | ~11 s | ~1.5 s |
| 100 000 | ~22 s | ~3.0 s |

–¢–æ–≤–∞ –µ –Ω–∞–ø—ä–ª–Ω–æ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç –∑–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–µ–Ω —Å—ä—Ä–≤—ä—Ä.

**10.5. Memory footprint**

–ó–∞ 10000 –ø–∞—Ü–∏–µ–Ω—Ç–∏:

- —Å—Ä–µ–¥–Ω–æ 20-60 –ø–µ—Ä–∏–æ–¥–∞ / –ø–∞—Ü–∏–µ–Ω—Ç
- –≤—Å–µ–∫–∏ –ø–µ—Ä–∏–æ–¥ –µ 20-40 –±–∞–π—Ç–∞ –æ–±–µ–∫—Ç + PR001/CL088 —Å—Ç—Ä—É–∫—Ç—É—Ä–∏

–û–±—â–æ:

~15-30 MB RAM

–ù–∏—Å–∫–æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ - –ø–æ–∑–≤–æ–ª—è–≤–∞ UI –¥–∞ –ø–æ–∫–∞–∑–≤–∞ –¥—ä—Ä–≤–æ –∑–∞ –≤—Å–∏—á–∫–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∏ (–∞–∫–æ –ø–æ–∏—Å–∫–∞—Ç).

**10.6. –ù–∞–π-—Å–∫—ä–ø–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –≤ UI: –ø–æ—Å—Ç—Ä–æ—è–≤–∞–Ω–µ—Ç–æ –Ω–∞ –¥—ä—Ä–≤–æ—Ç–æ**

VirtualTree –µ –±—ä—Ä–∑, –Ω–æ:

- –¥–æ–±–∞–≤—è–Ω–µ –Ω–∞ —Ö–∏–ª—è–¥–∏ –≤—ä–∑–ª–∏ –µ –ø–æ-—Å–∫—ä–ø–æ –æ—Ç —Å–∞–º–æ—Ç–æ GeneratePeriod
- –Ω–∞–π-—Ç–µ–∂–∫–æ –µ –ø—Ä–∏ —Ä–∞–∑—à–∏—Ä—è–≤–∞–Ω–µ –Ω–∞ –≤—Å–∏—á–∫–∏ –≤—ä–∑–ª–∏

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:

- –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ –Ω–∞ BeginUpdate/EndUpdate (—Ç–∏ –≥–æ –ø—Ä–∞–≤–∏—à)
- –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª–Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–∞ node –¥–∞–Ω–Ω–∏—Ç–µ
- lazy loading (–ø–æ –∂–µ–ª–∞–Ω–∏–µ)

**10.7. –ê–ª–≥–æ—Ä–∏—Ç–º–∏—á–Ω–∞ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç**

LTC Engine –µ:

- –ª–∏–Ω–µ–µ–Ω
- –±–µ–∑ recursion
- –±–µ–∑ –≥—Ä–∞—Ñ–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –±–µ–∑ backtracking

–¢–æ–≤–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞:

- –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ –≤—Ä–µ–º–µ
- –ª–∏–ø—Å–∞ –Ω–∞ –µ–∫—Å–ø–ª–æ–∑–∏—è –ø—Ä–∏ –∑–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–∏ CL132

**10.8. Deadlock / Race conditions (–≤ multi-thread)**

Engine –µ thread-safe, –∞–∫–æ:

- –Ω–µ –ø–æ–ª–∑–≤–∞—à –≥–ª–æ–±–∞–ª–Ω–∏ Buffer-–∏ –≤ ADB
- –≤—Å—è–∫–∞ thread —Ä–∞–±–æ—Ç–∏ —Å –∫–æ–ø–∏–µ –Ω–∞ –ø–∞—Ü–∏–µ–Ω—Ç
- –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∏—Ç–µ —Å–∞ read-only

–¢—ä–π –∫–∞—Ç–æ PR001/CL132/CL142 —Å–∞ –Ω–µ–∏–∑–º–µ–Ω–Ω–∏ —Å–ª–µ–¥ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ ‚Üí –∏–¥–µ–∞–ª–Ω–∞ —Å–∏—Ç—É–∞—Ü–∏—è –∑–∞ –ø–∞—Ä–∞–ª–µ–ª–Ω–æ—Å—Ç.

**10.9. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –°–µ–∫—Ü–∏—è 10**

–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ LTC Engine –µ –æ—Ç–ª–∏—á–Ω–∞.

–ê–ª–≥–æ—Ä–∏—Ç—ä–º—ä—Ç –µ –ª–∏–Ω–µ–µ–Ω –∏ —É—Å—Ç–æ–π—á–∏–≤.

–°–∫–∞–ª–∏—Ä—É–µ–ºost –¥–æ 100k –ø–∞—Ü–∏–µ–Ω—Ç–∏ –µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞.

–ü–∞—Ä–∞–ª–µ–ª–∏–∑–∞—Ü–∏—è—Ç–∞ –º–æ–∂–µ –¥–∞ —É—Å–∫–æ—Ä–∏ –¥–æ 6-10 –ø—ä—Ç–∏.

Memory footprint –µ –º–∏–Ω–∏–º–∞–ª–µ–Ω.

**‚úî –°–µ–∫—Ü–∏—è 10 –µ –∑–∞–≤—ä—Ä—à–µ–Ω–∞.**

–ö–æ–≥–∞—Ç–æ –∫–∞–∂–µ—à:

**–¥–∞–≤–∞–π 11**

—â–µ –ø—Ä–æ–¥—ä–ª–∂–∞ —Å—ä—Å:

**–°–µ–∫—Ü–∏—è 11 - Integration with NZIS (Planned, Performed, Matching Rules, XML Generation)**

–°–ª–µ–¥ –°–µ–∫—Ü–∏—è 12 ‚Üí —â–µ –≥–µ–Ω–µ—Ä–∏—Ä–∞–º —Ü–µ–ª–∏—è –æ–±–µ–¥–∏–Ω–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç.

**–í–∏–µ –∫–∞–∑–∞—Ö—Ç–µ:**

–¥–∞–≤–∞–π 11

**ChatGPT –∫–∞–∑–∞:**

–ü—Ä–æ–¥—ä–ª–∂–∞–≤–∞–º–µ —Å –µ–¥–Ω–∞ –æ—Ç **–Ω–∞–π-–∫–ª—é—á–æ–≤–∏—Ç–µ —Å–µ–∫—Ü–∏–∏** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è—Ç–∞ —Å –ù–ó–ò–°.  
–¢—É–∫ –æ–ø–∏—Å–≤–∞–º–µ **–∫–∞–∫ —Å–µ —Å–≤—ä—Ä–∑–≤–∞ LTC Engine —Å –Ω–∞—Ü–∏–æ–Ω–∞–ª–Ω–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞**, –∫–æ–∏ –¥–∞–Ω–Ω–∏ —Å–µ –∏–∑–ø—Ä–∞—â–∞—Ç, –∫–∞–∫ —Å–µ –ø—Ä–∞–≤–∏ —Å—ä–ø–æ—Å—Ç–∞–≤—è–Ω–µ (matching), –∏ –∫–∞–∫ —Å–µ –≥–µ–Ω–µ—Ä–∏—Ä–∞ XML –∑–∞ PLANNED / PERFORMED –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏.

**#Ô∏è‚É£ –°–ï–ö–¶–ò–Ø 11 - Integration with NZIS (Planned / Performed / Matching / XML Generation)**

**_‚Äû–ö–∞–∫ LTC Engine —Ä–∞–±–æ—Ç–∏ —Å –ù–ó–ò–° - –ø—Ä–∞–≤–∏–ª–∞, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, XML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –º–∞–ø–∏–Ω–≥"_**

**11.1. –î–≤–∞ –æ—Å–Ω–æ–≤–Ω–∏ —Ç–∏–ø–∞ –¥–∞–Ω–Ω–∏ –≤ –ù–ó–ò–°, —Å–≤—ä—Ä–∑–∞–Ω–∏ —Å LTC**

–ù–ó–ò–° –ø–æ–¥–¥—ä—Ä–∂–∞:

- **PLANNED TYPES** ‚Üí –∫–∞–∫–≤–∏ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏ —Å–∞ –ø—Ä–µ–¥–≤–∏–¥–µ–Ω–∏ –∑–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞
- **PERFORMED TYPES** ‚Üí –∫–∞–∫–≤–æ –µ —Ä–µ–∞–ª–Ω–æ –Ω–∞–ø—Ä–∞–≤–µ–Ω–æ

–¢–≤–æ—è—Ç LTC Engine —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä–∞ PLANNED TYPE –ø–µ—Ä–∏–æ–¥–∏—Ç–µ  
–∏ –≥–∏ –º–∞—á–≤–∞ –∫—ä–º PERFORMED TYPE –¥–∞–Ω–Ω–∏—Ç–µ (–ø—Ä–µ–≥–ª–µ–¥–∏, –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è, –∏–º—É–Ω–∏–∑–∞—Ü–∏–∏).

**11.2. –ö–∞–∫ –ù–ó–ò–° –æ–ø—Ä–µ–¥–µ–ª—è ‚Äû–ü–ª–∞–Ω"**

–ù–ó–ò–° –∏–º–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–æ –∏–∑—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞ –ø–ª–∞–Ω–æ–≤–µ—Ç–µ (CL132), –∫–æ–µ—Ç–æ –µ:

- —Å—Ç–∞—Ç–∏—á–Ω–æ (–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–æ)
- –Ω–µ —Å–µ –ø—Ä–µ–∏–∑—á–∏—Å–ª—è–≤–∞ –¥–∏–Ω–∞–º–∏—á–Ω–æ
- –∑–∞–ø–æ—á–≤–∞ –æ—Ç **–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≥–æ–¥–∏–Ω–∞** (—Ç—É–∫ –≤—ä–∑–Ω–∏–∫–≤–∞ –∏–∑–≤–µ—Å—Ç–Ω–∏—è—Ç –ø—Ä–æ–±–ª–µ–º)
- –∏–∑–∫–ª—é—á–≤–∞ –Ω—è–∫–æ–∏ —Ä–∞–Ω–Ω–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: C12 –∑–∞ –¥–µ—Ü–∞, —Ä–æ–¥–µ–Ω–∏ —Å–ª–µ–¥ 20XX)

–¢–æ–≤–∞ —Å—Ç–æ–∏ –∑–∞–¥ —Ñ–∞–∫—Ç–∞, —á–µ:

Engine-—ä—Ç —Ç–∏ —Å–º—è—Ç–∞ –ø–µ—Ä–∏–æ–¥–∏, –∫–æ–∏—Ç–æ –ù–ó–ò–° –Ω–µ –ø—Ä–∏–µ–º–∞.

**–†–µ—à–µ–Ω–∏–µ—Ç–æ:**  
Engine —Ñ–∏–ª—Ç—Ä–∏—Ä–∞ –ø–µ—Ä–∏–æ–¥–∏ –ø—Ä–µ–¥–∏ StartNzisData.

**11.3. –ö–∞–∫ —Ç–≤–æ—è—Ç Engine –∏–∑–≤–ª–∏—á–∞ PERFORMED –¥–∞–Ω–Ω–∏**

**‚úî –ü—Ä–µ–≥–ª–µ–¥–∏ ‚Üí PregledNew**

**‚úî –ò–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è ‚Üí ExamAnalysis**

**‚úî –ò–º—É–Ω–∏–∑–∞—Ü–∏–∏ ‚Üí Immunization (–∞–∫–æ —Å–µ –∞–∫—Ç–∏–≤–∏—Ä–∞)**

Matching –ª–æ–≥–∏–∫–∞—Ç–∞ –µ –≤ –°–µ–∫—Ü–∏—è 6, –Ω–æ —Ç—É–∫ –µ –≤–∞–∂–Ω–æ:

–ù–ó–ò–° –æ—á–∞–∫–≤–∞:

performedType.date

performedType.code

performedType.activity

performedType.result (–∞–∫–æ –µ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ)

Engine-—ä—Ç:

- –°–≤—ä—Ä–∑–≤–∞ CL132 –ø–µ—Ä–∏–æ–¥ ‚Üí PregledNew –∏–ª–∏ ExamAnalysis
- –ê–∫–æ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞ ‚Üí –º–∞—Ä–∫–∏—Ä–∞ –∫–∞—Ç–æ Completed
- –ê–∫–æ –Ω–µ ‚Üí –æ—Å—Ç–∞–≤–∞ Pending

**11.4. NZIS XML –∏–∑–∏—Å–∫–≤–∞–Ω–∏—è (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)**

–ü—Ä–∏ –∏–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞, XML —Å—ä–¥—ä—Ä–∂–∞ –±–ª–æ–∫:

&lt;plannedTypes&gt;

&lt;plannedType&gt;

&lt;typeId&gt;CL132_Key&lt;/typeId&gt;

&lt;startDate&gt;...&lt;/startDate&gt;

&lt;endDate&gt;...&lt;/endDate&gt;

...

&lt;/plannedType&gt;

&lt;/plannedTypes&gt;

&lt;performedTypes&gt;

&lt;performedType&gt;

&lt;typeId&gt;CL132_Key&lt;/typeId&gt;

&lt;activityId&gt;PR001.Activity_ID&lt;/activityId&gt;

&lt;date&gt;Pregled/ExamAnalysis.DATA&lt;/date&gt;

&lt;value&gt;ExamAnalysis.RESULT&lt;/value&gt;

...

&lt;/performedType&gt;

&lt;/performedTypes&gt;

**11.5. –ö–∞–∫ —Å–µ –º–∞–ø–≤–∞—Ç –≤—ä—Ç—Ä–µ—à–Ω–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –∫—ä–º XML –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏**

**–ó–∞ PLANNED:**

| **LTC Engine** | **NZIS XML** |
| --- | --- |
| gr.cl132.Key | typeId |
| gr.startDate | startDate |
| gr.endDate | endDate |
| PR001.ActID (–∞–∫—Ç–∏–≤–Ω–∏ –¥–µ–π–Ω–æ—Å—Ç–∏) | activityId (–ø–æ-–∫—ä—Å–Ω–æ) |
| CL142.nhif_code | nhifCode (–∞–∫–æ –µ –ø—Ä–∏–ª–æ–∂–∏–º–æ) |

**–ó–∞ PERFORMED:**

| **LTC –¥–∞–Ω–Ω–∏** | **NZIS XML** |
| --- | --- |
| pregled.START_DATE | date |
| pregled.LRN | referenceNumber |
| pr001.Activity_ID | activityId |
| examAnalysis.RESULT | result |
| examAnalysis.CL022 | nomenclatureCode |

**11.6. –ö–∞–∫ Engine —Ä–µ—à–∞–≤–∞ –∫–æ–∏ CL132 –¥–∞ –≤–∫–ª—é—á–∏ –≤ XML**

–¢–≤–æ—è—Ç LTC Engine **–ù–ï –≥–µ–Ω–µ—Ä–∏—Ä–∞ XML –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ**, –Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—è –≤—Å–∏—á–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∏ –¥–∞–Ω–Ω–∏ –Ω–∞:

- XML –º–æ–¥—É–ª–∞ (MsgXyyy),
- UI –µ–∫—Å–ø–æ—Ä—Ç–µ—Ä–∞,
- NZIS –∫–æ–º—É–Ω–∏–∫–∞—Ç–æ—Ä–∞.

**–ö—Ä–∏—Ç–µ—Ä–∏–∏:**

- **–¢–µ–∫—É—â–∏ –ø–µ—Ä–∏–æ–¥–∏ (–≤ –∫–æ–∏—Ç–æ –ø–æ–ø–∞–¥–∞ –¥–∞—Ç–∞—Ç–∞ –Ω–∞ –ø—Ä–µ–≥–ª–µ–¥–∞)**
- **–í—Å–∏—á–∫–∏ –ø–µ—Ä–∏–æ–¥–∏, –∫–æ–∏—Ç–æ –∏–º–∞—Ç –∏–∑–≤—ä—Ä—à–µ–Ω–∞ –¥–µ–π–Ω–æ—Å—Ç (performed)**
- **–ü–µ—Ä–∏–æ–¥–∏, –∫–æ–∏—Ç–æ –∏–∑–∏—Å–∫–≤–∞—Ç –ù–ó–ò–° –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä V16)**

**11.7. –ö–∞–∫ Engine –∫–æ—Ä–∏–≥–∏—Ä–∞ –ù–ó–ò–° –Ω–µ—Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è**

–ü—Ä–∏–º–µ—Ä–Ω–∏ –ù–ó–ò–° –¥–µ—Ñ–µ–∫—Ç–∏:

- CL132 –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ –∑–∞–ø–æ—á–≤–∞—Ç –æ—Ç –≥–æ–¥–∏–Ω–∞ X, –Ω–æ Engine —Å–º—è—Ç–∞ –æ—Ç —Ä–∞–∂–¥–∞–Ω–µ ‚Üí —Ä–∞–∑–º–∏–Ω–∞–≤–∞–Ω–µ
- PR001 –¥–µ–π–Ω–æ—Å—Ç–∏ —Å–∞ –ø—Ä–æ–º–µ–Ω–µ–Ω–∏ –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- –Ω–æ–≤–∏ CL132 –∫–ª—é—á–æ–≤–µ
- —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å–ª—É—á–∞–∏ (A1, JM1, V16)

–¢–≤–æ—è—Ç Engine –∏–º–∞ –º–µ—Ö–∞–Ω–∏–∑—ä–º:

StartNzisData

RuleCl132_PR001

special-case V16

special-case A1

–¢–∞–∫–∞ –ª–æ–∫–∞–ª–Ω–∏—è—Ç –ø–ª–∞–Ω —Å—ä–≤–ø–∞–¥–∞ —Å –ù–ó–ò–°.

**11.8. –ö–∞–∫ Engine –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç—è–≤–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª–Ω–æ –ø—ä–ª–Ω–µ–Ω–µ –Ω–∞ XML**

**‚úî –ù–∞–º–∏—Ä–∞–Ω–µ –Ω–∞ –ø–æ–≤–µ—á–µ –æ—Ç –µ–¥–∏–Ω –ø—Ä–µ–≥–ª–µ–¥ –≤ –ø–µ—Ä–∏–æ–¥**

XML –ø—Ä–∏–µ–º–∞ —Å–∞–º–æ –µ–¥–Ω–æ ‚ÄûperformedType" ‚Üí Engine –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–≤–∞.

**‚úî –ò–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è —Å –≥—Ä–µ—à–µ–Ω –∫–æ–¥**

–ù–µ —Å–µ –≤–∫–ª—é—á–≤–∞—Ç –≤ XML (–∏–∑–±—è–≥–≤–∞ –≥—Ä–µ—à–Ω–∏ —Ä–µ—Ñ—É–∑–∞–ª–∏).

**‚úî –õ–∏–ø—Å–≤–∞—â–∏ PR001 –∑–∞ –¥–∞–¥–µ–Ω CL132**

Engine –ù–ï –ø–æ–¥–∞–≤–∞ –ø—Ä–∞–∑–Ω–∏ performedType - —Ç–∞–∫–∞ –∏–∑–±–µ–≥–≤–∞ invalid XML.

**‚úî –ü–µ—Ä–∏–æ–¥–∏, –∏–∑–≤—ä–Ω –ù–ó–ò–° –¥–∏–∞–ø–∞–∑–æ–Ω–∞**

Engine –Ω–µ –≥–∏ –≤–∫–ª—é—á–≤–∞.

**11.9. –ö–∞–∫–≤–æ –æ—á–∞–∫–≤–∞ –ù–ó–ò–° –ø—Ä–∏ –∏–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞**

**1) –¢–∏–ø (CL132 Key)**

**2) –î–∞—Ç–∞ –Ω–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ**

**3) –î–µ–π–Ω–æ—Å—Ç (PR001)**

**4) –†–µ–∑—É–ª—Ç–∞—Ç (–∞–∫–æ –µ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ)**

**5) nhif code (–∞–∫–æ –µ –ø—Ä–∏–ª–æ–∂–∏–º–æ)**

–¢–≤–æ—è—Ç Engine –æ—Å–∏–≥—É—Ä—è–≤–∞ –≤—Å–∏—á–∫–æ —Ç–æ–≤–∞ —á—Ä–µ–∑:

cl132.FPregled

cl132.FExamAnal

pr001.CL142

pr001.Activity_ID

**11.10. –í—Ä—ä–∑–∫–∞—Ç–∞ –º–µ–∂–¥—É ‚Äû–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –ø—Ä–µ–≥–ª–µ–¥" (PregledNewItem) –∏ NZIS**

PregledNewItem —Å—ä–¥—ä—Ä–∂–∞:

- START_DATE ‚Üí –æ—Å–Ω–æ–≤–Ω–∞ –¥–∞—Ç–∞ –∑–∞ XML
- LRN ‚Üí –Ω–æ–º–µ—Ä –Ω–∞ –ø—Ä–µ–≥–ª–µ–¥–∞ (reference ID)
- IS_PREVENTIVE / PREVENTIVE_TYPE ‚Üí —Ç–∏–ø—ä—Ç, –∫–æ–π—Ç–æ —Å–µ –º–∞–ø–≤–∞ –∫—ä–º CL132

Engine –∏–∑–ø–æ–ª–∑–≤–∞:

if pregled.PREVENTIVE_TYPE matches CL132 group

–∑–∞ –¥–∞ –≥–æ –æ–ø—Ä–µ–¥–µ–ª–∏ –∫–∞—Ç–æ –≤–∞–ª–∏–¥–µ–Ω.

**11.11. –ò–º–ø–æ—Ä—Ç –æ—Ç –ù–ó–ò–° (MsgImport)**

LTC Engine –º–æ–∂–µ —Å—ä—â–æ:

- –¥–∞ –≤–¥–∏–≥–Ω–µ PLANNED TYPES –æ—Ç –ù–ó–ò–° (—Å–ø–∏—Å—ä–∫)
- –¥–∞ –≤–¥–∏–≥–Ω–µ PERFORMED TYPES –æ—Ç –ù–ó–ò–° (–∞–∫–æ —Å–∏—Å—Ç–µ–º–∞—Ç–∞ –ø–æ–¥–¥—ä—Ä–∂–∞)

–¢–≤–æ—è—Ç –∫–æ–¥ –∏–º–∞:

FLstMsgImportNzis

–ö–æ–µ—Ç–æ –µ –∑–∞:

- –∏–º–ø–æ—Ä—Ç –æ—Ç XML
- —Å—Ä–∞–≤–Ω—è–≤–∞–Ω–µ —Å –ª–æ–∫–∞–ª–Ω–æ –∏–∑—á–∏—Å–ª–µ–Ω–∏—è –≥—Ä–∞—Ñ
- –æ—Ç–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ –Ω–µ—Å—ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

–¢–æ–≤–∞ –ø–æ–∑–≤–æ–ª—è–≤–∞:

- –ø—Ä–æ–≤–µ—Ä–∫–∞ ‚Äû–¥–∞–ª–∏ HIS-–∞ –µ –≤ —Å–∏–Ω—Ö—Ä–æ–Ω —Å –ù–ó–ò–°"
- –ª–µ—Å–Ω–æ –ø–æ–ø—Ä–∞–≤—è–Ω–µ –Ω–∞ –ª–∏–ø—Å–≤–∞—â–∏ –¥–µ–π–Ω–æ—Å—Ç–∏

**11.12. –ö–∞–∫–≤–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–∑–ø—Ä–∞—â–∞ HIS –∫—ä–º –ù–ó–ò–° (–ø—ä–ª–µ–Ω —Å–ø–∏—Å—ä–∫)**

**‚úî 1. –î–∞–Ω–Ω–∏ –∑–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞**

**‚úî 2. PLANNED TYPES (–æ–ø–∏—Å–∞–Ω–∏—Ç–µ CL132 –ø–µ—Ä–∏–æ–¥–∏)**

**‚úî 3. PERFORMED TYPES (–ø—Ä–µ–≥–ª–µ–¥–∏/–∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è)**

**‚úî 4. –ü—ä–ª–µ–Ω XML —Ñ–æ—Ä–º–∞—Ç X003 / X005**

**‚úî 5. –ü–æ–¥–ø–∏—Å–≤–∞–Ω–µ —Å –ö–ï–ü**

Engine –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—è –¥–∞–Ω–Ω–∏ –∑–∞ –µ–ª–µ–º–µ–Ω—Ç–∏ 2 –∏ 3.

**11.13. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª–Ω–∏ –±—ä–¥–µ—â–∏ —Ä–∞–∑—à–∏—Ä–µ–Ω–∏—è –∑–∞ NZIS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–≤–µ—Ä—è–≤–∞–Ω–µ —Å –ù–ó–ò–° –ø–ª–∞–Ω–æ–≤–µ—Ç–µ**
- **–ü–æ–¥—á–µ—Ä—Ç–∞–≤–∞–Ω–µ –≤ UI –∫–æ–≥–∞ –ù–ó–ò–° –∏–º–∞ —Ä–∞–∑–º–∏–Ω–∞–≤–∞–Ω–µ**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑–ø—Ä–∞—â–∞–Ω–µ —Å–ª–µ–¥ –ø—Ä–∏–∫–ª—é—á–≤–∞–Ω–µ –Ω–∞ –ø—Ä–µ–≥–ª–µ–¥**
- **–ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è ‚Äû–∫–∞–∫–≤–æ —â–µ –∏–∑–ø—Ä–∞—Ç–∏–º –∫—ä–º –ù–ó–ò–°"**
- **API-driven LTC sync (server-side)**

**‚úî –°–µ–∫—Ü–∏—è 11 –µ –∑–∞–≤—ä—Ä—à–µ–Ω–∞.**

–ê–∫–æ –∫–∞–∂–µ—à:

**–¥–∞–≤–∞–π 12**

—â–µ –ø–æ–¥–≥–æ—Ç–≤—è –ø–æ—Å–ª–µ–¥–Ω–∞—Ç–∞ —Å–µ–∫—Ü–∏—è:

**–°–µ–∫—Ü–∏—è 12 - Full Engine Lifecycle: from Patient Load ‚Üí LTC Calculation ‚Üí UI ‚Üí NZIS XML ‚Üí Storage**

–°–ª–µ–¥ —Ç–æ–≤–∞ —â–µ –Ω–∞–ø—Ä–∞–≤—è **–æ–±—â–∏—è –≥–æ–ª—è–º –¥–æ–∫—É–º–µ–Ω—Ç** —Å –≤—Å–∏—á–∫–∏ —Å–µ–∫—Ü–∏–∏ 0-12.

**–í–∏–µ –∫–∞–∑–∞—Ö—Ç–µ:**

–¥–∞–≤–∞–π 12

**ChatGPT –∫–∞–∑–∞:**

–ü—Ä–æ–¥—ä–ª–∂–∞–≤–∞–º–µ —Å –ø–æ—Å–ª–µ–¥–Ω–∞—Ç–∞ **–°–µ–∫—Ü–∏—è 12**, –∫–æ—è—Ç–æ –æ–ø–∏—Å–≤–∞ _—Ü—è–ª–æ—Å—Ç–Ω–∏—è –∂–∏–∑–Ω–µ–Ω —Ü–∏–∫—ä–ª –Ω–∞ LTC Engine_ - –æ—Ç –∑–∞—Ä–µ–∂–¥–∞–Ω–µ—Ç–æ –Ω–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞, –ø—Ä–µ–∑ –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞—Ç–∞, –ø—Ä–µ–∑ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è, –¥–æ –ù–ó–ò–° XML –∏ –æ–±—Ä–∞—Ç–Ω–æ.

–¢–æ–≤–∞ –µ —Å–∏–Ω—Ç–µ–∑–∏—Ä–∞–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∞ –Ω–∞ —Ü—è–ª–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞.

**#Ô∏è‚É£ –°–ï–ö–¶–ò–Ø 12 - Full Engine Lifecycle**

**_‚Äû–û—Ç Patient Load ‚Üí LTC Engine ‚Üí UI ‚Üí Actions ‚Üí NZIS XML ‚Üí Persistence ‚Üí Recalculation"_**

**12.1. –û–±—â –ø—Ä–µ–≥–ª–µ–¥ –Ω–∞ –ø–æ—Ç–æ–∫–∞**

–¶–µ–ª–∏—è—Ç LTC –ø—Ä–æ—Ü–µ—Å –ø—Ä–µ–º–∏–Ω–∞–≤–∞ –ø—Ä–µ–∑ —Ç–æ—á–Ω–æ **7 —Ñ–∞–∑–∏**, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –¥–∞–ª–∏ –ø–∞—Ü–∏–µ–Ω—Ç—ä—Ç –µ –æ—Ç–≤–∞—Ä—è–Ω –æ—Ç UI, –æ—Ç XML Import –∏–ª–∏ –æ—Ç –≤—ä—Ç—Ä–µ—à–Ω–∏ —Å–∏—Å—Ç–µ–º–Ω–∏ –ø–æ–≤–∏–∫–≤–∞–Ω–∏—è:

\[1\] Patient Load

‚Üì

\[2\] Clinical Objects Binding (Pregledi, ExamAnal, Immunizations)

‚Üì

\[3\] LTC Engine (GeneratePlan ‚Üí MatchPerformed ‚Üí BuildGraph)

‚Üì

\[4\] UI Rendering (Virtual Tree / Grid)

‚Üì

\[5\] User Actions (Mark done, Open pr., Add exam, etc.)

‚Üì

\[6\] NZIS XML Generation (Planned / Performed Types)

‚Üì

\[7\] Save / Sync / Refresh (Recalculate if needed)

**12.2. –§–∞–∑–∞ 1 - Patient Load**

–ü—Ä–∏ –∏–∑–±–∏—Ä–∞–Ω–µ –Ω–∞ –ø–∞—Ü–∏–µ–Ω—Ç –æ—Ç:

- —Å–ø–∏—Å—ä–∫ –≤ UI
- —Ç—ä—Ä—Å–µ–Ω–µ
- XML import
- –≤—ä–Ω—à–µ–Ω –º–æ–¥—É–ª

—Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞—Ç –Ω—è–∫–æ–ª–∫–æ –æ–ø–µ—Ä–∞—Ü–∏–∏:

**–î–∞–Ω–Ω–∏—Ç–µ, –∫–æ–∏—Ç–æ —Å–µ –∑–∞—Ä–µ–∂–¥–∞—Ç:**

| **–û–±–µ–∫—Ç** | **–û—Ç –∫–æ–ª–µ–∫—Ü–∏—è** |
| --- | --- |
| TRealPatientNewItem | CollPatient |
| –ü—Ä–µ–≥–ª–µ–¥–∏ | PregledNewColl |
| –ò–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è | ExamAnalysisColl |
| –ò–º—É–Ω–∏–∑–∞—Ü–∏–∏ | ExamImmunizationColl (–∞–∫–æ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞) |
| –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∏ | CL132, PR001, CL134, CL088, CL142, CL050‚Ä¶ |

**–°–ª–µ–¥ –∫–∞—Ç–æ –≤—Å–∏—á–∫–∏ –æ–±–µ–∫—Ç–∏ —Å–∞ —Å–≤—ä—Ä–∑–∞–Ω–∏:**

patient.FPregledi := –≤—Å–∏—á–∫–∏ –ø—Ä–µ–≥–ª–µ–¥–∏ –∑–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞

patient.FExamAnals := –≤—Å–∏—á–∫–∏ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è

patient.lstGraph := –ø—Ä–∞–∑–µ–Ω (—â–µ —Å–µ –≥–µ–Ω–µ—Ä–∏—Ä–∞)

patient.ListCurrentProf := –ø—Ä–∞–∑–µ–Ω

**12.3. –§–∞–∑–∞ 2 - Building the Clinical Object Map**

–¢—É–∫ —Å–µ —Å—ä–∑–¥–∞–≤–∞ **–≤—ä—Ç—Ä–µ—à–Ω–∞ –º—Ä–µ–∂–∞ –æ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:

- Pregled ‚Üí Cl132 (–∞–∫–æ –µ –ø–æ–ø–∞–¥–Ω–∞–ª –≤ –ø–µ—Ä–∏–æ–¥)
- ExamAnalysis ‚Üí Cl132 (–∞–∫–æ –ø–æ–ø–∞–¥–∞ –≤ CL132 ‚Üí PR001 ‚Üí CL22)
- Cl132 ‚Üí PR001 ‚Üí CL134 ‚Üí CL088 ‚Üí CL142

–¢–æ–≤–∞ —Å–µ —Å–ª—É—á–≤–∞ —á—Ä–µ–∑:

**–§—É–Ω–∫—Ü–∏–∏ –æ—Ç —Ç–≤–æ—è –∫–æ–¥:**

- FillPr001InCl132
- FillCl134
- FillCl142InPr001
- FillCl088InCL142
- FillCl144InCL142

–í—Å–∏—á–∫–æ —Ç–æ–≤–∞ –ø–æ–¥–≥–æ—Ç–≤—è Engine-–∞ –¥–∞ —Ä–∞–±–æ—Ç–∏ —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏.

**12.4. –§–∞–∑–∞ 3 - LTC Engine Core**

**(_GeneratePeriod + Matching + State resolution_)**

–¢–æ–≤–∞ –µ **–Ω–∞–π-—Ü–µ–Ω—Ç—Ä–∞–ª–Ω–∞—Ç–∞ —á–∞—Å—Ç** –∏ –≤–∫–ª—é—á–≤–∞ –Ω—è–∫–æ–ª–∫–æ –ø–æ–¥—Ñ–∞–∑–∏:

**(1) GeneratePeriod(Apat)**

–¢—É–∫ –∑–∞ –≤—Å–µ–∫–∏ CL132:

- —Å–º—è—Ç–∞ startDate
- —Å–º—è—Ç–∞ endDate
- —Å–º—è—Ç–∞ repeating –ø–µ—Ä–∏–æ–¥–∏
- –æ—Ç—á–∏—Ç–∞ gender
- –æ—Ç—á–∏—Ç–∞ event_trigger (‚Äû–ø" = –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ / –≥–æ–¥–∏—à–µ–Ω —Å—Ç–∞—Ä—Ç)
- –æ—Ç—á–∏—Ç–∞ special cases:
  - V16
  - A1
  - JM1 (–º–∞–∫—Å –≤—ä–∑—Ä–∞—Å—Ç)
  - –ø—Ä–∞–≤–∏–ª–æ –∑–∞ –≤–∞–∫—Å–∏–Ω–∏

**–î–∞—Ç–∞ –Ω–∞ —Ä–∞–∂–¥–∞–Ω–µ = –æ—Å–Ω–æ–≤–∞**

–í—Å–∏—á–∫–∏ CL132 –∏–Ω—Ç–µ—Ä–≤–∞–ª–∏ —Å–µ –±–∞–∑–∏—Ä–∞—Ç –Ω–∞:

BrthDate := patient.BIRTH_DATE

**(2) Matching Performed Activities**

–°–ª–µ–¥ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–∏—Ç–µ –ø–µ—Ä–∏–æ–¥–∏, Engine –ø—Ä–∞–≤–∏:

**–ü—Ä–µ–≥–ª–µ–¥–∏ ‚Üí CL132**

if PregledNew.START_DATE ‚àà \[startDate..endDate\]

then link Pregled ‚Üí CL132

**–ò–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è ‚Üí PR001 ‚Üí CL132**

if ExamAnalysis.DATA ‚àà –ø–µ—Ä–∏–æ–¥ AND ExamAnalysis.CL22 == PR001.Activity_ID

then link Exam ‚Üí PR001 & CL132

**–ò–º—É–Ω–∏–∑–∞—Ü–∏–∏ ‚Üí CL132 (–∞–∫–æ –µ –≤–∞–∫—Å–∏–Ω–∞)**

**(3) –ò–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ —Å—Ç–∞—Ç—É—Å–∏—Ç–µ:**

**Possible Status:**

| **CL132** | **–°—ä—Å—Ç–æ—è–Ω–∏–µ** |
| --- | --- |
| Pending | –Ω—è–º–∞ –∏–∑–≤—ä—Ä—à–µ–Ω–∞ –¥–µ–π–Ω–æ—Å—Ç |
| Active | —Ç–µ–∫—É—â –ø–µ—Ä–∏–æ–¥ |
| Completed | –∏–º–∞ –ø—Ä–µ–≥–ª–µ–¥ –∏–ª–∏ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ |
| Future | –æ—â–µ –Ω–µ –µ –∞–∫—Ç–∏–≤–µ–Ω |
| Expired | –º–∏–Ω–∞–ª –ø–µ—Ä–∏–æ–¥ –±–µ–∑ –¥–µ–π–Ω–æ—Å—Ç (–∞–∫–æ –µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –¥–∞ —Å–µ –≤–∏–∂–¥–∞) |

Engine –Ω–µ –ø–∞–∑–∏ –¥—É–º–∏—Ç–µ ‚ÄûCompleted/Pending" –∫–∞—Ç–æ enum, –∞ –≥–∏ –æ–ø—Ä–µ–¥–µ–ª—è –¥–∏–Ω–∞–º–∏—á–Ω–æ —Å–ø–æ—Ä–µ–¥:

UserDate, gr.startDate, gr.endDate, gr.Cl132.FPregled, gr.Cl132.FExamAnal

**12.5. –§–∞–∑–∞ 4 - UI Rendering (Virtual Tree)**

–§—É–Ω–∫—Ü–∏–∏—Ç–µ:

- LoadVtrGraph
- LoadVtrGraph1
- LoadVtrGraphOutVtr

—Å–ø—É—Å–∫–∞—Ç –≥—Ä–∞—Ñ–∞ –≤ —Ç—Ä–∏ —Å–µ–∫—Ü–∏–∏:

\[–ú–ò–ù–ê–õ–ò\]

\[–¢–ï–ö–£–©–ò\]

\[–ë–™–î–ï–©–ò\]

–í—Å—è–∫–æ CL132 —Å–µ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–∞ —Å PR001 –¥–µ–π–Ω–æ—Å—Ç–∏—Ç–µ —Å–∏:

CL132

‚îú‚îÄ PR001

‚îÇ ‚îú‚îÄ CL134

‚îÇ ‚îî‚îÄ CL088 (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–µ)

‚îî‚îÄ Performed (Pregled/Exam)

UI –ø–æ–ª—É—á–∞–≤–∞ **–≥–æ—Ç–æ–≤–∞ –¥—ä—Ä–≤–æ–≤–∏–¥–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**.

**12.6. –§–∞–∑–∞ 5 - User Actions**

–ü—Ä–∏–º–µ—Ä–Ω–∏ –¥–µ–π—Å—Ç–≤–∏—è:

**‚úî –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –Ω–æ–≤ –ø—Ä–µ–≥–ª–µ–¥ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –º–∞—á–≤–∞ CL132**

**‚úî –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–∫—Ä–∏–≤–∞ PR001**

**‚úî –ò–∑—Ç—Ä–∏–≤–∞–Ω–µ –Ω–∞ –ø—Ä–µ–≥–ª–µ–¥ ‚Üí Engine recalculation**

**‚úî –ü—Ä–æ–º—è–Ω–∞ –Ω–∞ –¥–∞—Ç–∞ ‚Üí –ø—Ä–µ–Ω–∞–º–µ—Ä–∏ CL132**

**‚úî ‚Äû–û—Ç–º–µ—Ç–Ω–∏ –∫–∞—Ç–æ –∏–∑–≤—ä—Ä—à–µ–Ω–æ" ‚Üí —Å—ä–∑–¥–∞–≤–∞:**

- –Ω–æ–≤ PregledNew
- –Ω–æ–≤ ExamAnalysis
- –∏–ª–∏ –Ω–æ–≤ –º–æ–¥–∞–ª–µ–Ω –ø—Ä–æ–∑–æ—Ä–µ—Ü –∑–∞ –∏–∑–±–æ—Ä –Ω–∞ –¥–µ–π–Ω–æ—Å—Ç–∏

–°–ª–µ–¥ –≤—Å—è–∫–æ –¥–µ–π—Å—Ç–≤–∏–µ ‚Üí Engine recalculation –µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ–Ω.

**12.7. –§–∞–∑–∞ 6 - NZIS XML Generation**

–¢—É–∫ UV Engine —Å–∞–º–æ **–¥–∞–≤–∞ –¥–∞–Ω–Ω–∏—Ç–µ** –Ω–∞ XML –º–æ–¥—É–ª–∞.

–ï–∫—Å–ø–æ—Ä—Ç—ä—Ç –∫—ä–º NZIS –≤–∫–ª—é—á–≤–∞:

**1\. plannedTypes ‚Üí lstGraph**

**2\. performedTypes ‚Üí FPregledi + FExamAnals**

**3\. Link –º–µ–∂–¥—É PR001 ‚Üí CL142 (nhif_code)**

XML –º–æ–¥—É–ª—ä—Ç –∏–∑–ø–æ–ª–∑–≤–∞:

TRealPatientNewItem.FillMsgSubject()

Cl132.getAnsiStringMap()

PR001.getAnsiStringMap()

ExamAnalysis.getDateMap()

–∑–∞ –¥–∞ –ø–æ–ø—ä–ª–Ω–∏:

- X001
- X003
- X005
- X124 (–∞–∫–æ –∏–º–∞)

**12.8. –§–∞–∑–∞ 7 - Save, Sync, Refresh**

–°–ª–µ–¥ –∏–∑–ø—Ä–∞—â–∞–Ω–µ:

**‚úî HIS –∑–∞–ø–∞–∑–≤–∞ –≤—ä—Ç—Ä–µ—à–Ω–æ—Ç–æ —Å—ä—Å—Ç–æ—è–Ω–∏–µ**

**‚úî –º–æ–∂–µ –¥–∞ –ø–æ–ª—É—á–∏ –æ—Ç–≥–æ–≤–æ—Ä –æ—Ç NZIS (OK / Error)**

**‚úî –º–æ–∂–µ –¥–∞ –æ–±–Ω–æ–≤–∏ RealObj –º–æ–¥–µ–ª–∏—Ç–µ**

**‚úî –ø—Ä–µ–∑–∞—Ä–µ–∂–¥–∞ LTC Engine**

–¢–æ–≤–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞:

- –≤–∏–Ω–∞–≥–∏ –∞–∫—Ç—É–∞–ª–µ–Ω –≥—Ä–∞—Ñ
- –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç –º–µ–∂–¥—É HIS –∏ –ù–ó–ò–°
- –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç—è–≤–∞–Ω–µ –Ω–∞ –¥–≤–æ–π–Ω–æ –∏–∑–ø—Ä–∞—â–∞–Ω–µ

**12.9. –ö–∞–∫–≤–æ —Ç–æ—á–Ω–æ –µ ‚Äû–ñ–∏–∑–Ω–µ–Ω —Ü–∏–∫—ä–ª –Ω–∞ LTC Engine"**

–û–±–æ–±—â–µ–Ω–∏–µ:

Load Patient

‚Üì

Bind Clinical Data

‚Üì

Compute CL132 Timelines

‚Üì

Match Performed Activities

‚Üì

Calculate Prof Status

‚Üì

Render UI

‚Üì

User modifies data

‚Üì

Recursion: Engine recalculates

‚Üì

Export XML to NZIS

‚Üì

Sync & finalize

‚Üì

(Back to Load Patient)

–¢–æ–≤–∞ –µ –Ω–∞–ø—ä–ª–Ω–æ —Ü–∏–∫–ª–∏—á–µ–Ω –º–æ–¥–µ–ª - –≤—Å—è–∫–æ –¥–µ–π—Å—Ç–≤–∏–µ –≤—Ä—ä—â–∞ –∫–æ–Ω—Ç—Ä–æ–ª–∞ –æ–±—Ä–∞—Ç–Ω–æ –∫—ä–º Engine-–∞.

**12.10. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤ –ø—Å–µ–≤–¥–æ–∫–æ–¥**

procedure ProcessPatient(pat);

begin

LoadData(pat);

BindObjects(pat);

GeneratePeriod(pat);

MatchPerformed(pat);

BuildGraph(pat);

RenderUI(pat);

if UserPerformsAction then begin

ApplyAction();

Recalculate(pat);

end;

if NeedSendToNZIS then

ExportXml(pat);

end;